{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Synthetic Open Schema","text":"<ul> <li> <p> Portable</p> <p>Write checks once, run on any compatible runner. No vendor lock-in.</p> </li> <li> <p> Declarative</p> <p>YAML-based, Kubernetes-style configuration. Easy to read and write.</p> </li> <li> <p> Production Ready</p> <p>Stable v1.0.0 specification. Battle-tested in production environments.</p> </li> <li> <p> Open Source</p> <p>Apache 2.0 licensed. Community-driven, vendor-neutral standard.</p> </li> </ul>"},{"location":"#what-is-synthetic-open-schema","title":"What is Synthetic Open Schema?","text":"<p>Synthetic Open Schema (SOS) is an open specification that defines a vendor-neutral format for synthetic monitoring checks. It enables you to define your monitoring checks once and run them anywhere.</p> <p>Get Started Read Specification View on GitHub</p>"},{"location":"#quick-example","title":"Quick Example","text":"api-health-check.yaml<pre><code>apiVersion: v1\nkind: HttpCheck\nmetadata:\n  name: api-health-check\n  title: API Health Check\nspec:\n  url: https://api.example.com/health\n  method: GET\n  interval: 1m\n  timeout: 30s\n  checks:\n    - type: statusCode\n      value: 200\n    - type: responseTime\n      operator: lessThan\n      value: 500ms\n</code></pre> <p>See more examples \u2192</p>"},{"location":"#supported-check-types","title":"Supported Check Types","text":""},{"location":"#core-checks-apiversion-v1","title":"Core Checks (<code>apiVersion: v1</code>)","text":"<ul> <li> <p>HttpCheck</p> <p>Monitor HTTP/HTTPS endpoints with status codes, headers, response times, and body validation.</p> <p> Learn more</p> </li> <li> <p>TcpCheck</p> <p>Validate TCP port connectivity and optional response content.</p> <p> Learn more</p> </li> <li> <p>DnsCheck</p> <p>Verify DNS resolution for A, AAAA, CNAME, MX, TXT, NS, and PTR records.</p> <p> Learn more</p> </li> <li> <p>TlsCheck</p> <p>Monitor TLS/SSL certificates for expiration, validity, and custom CAs.</p> <p> Learn more</p> </li> <li> <p>DomainCheck</p> <p>Track domain registration, expiration, nameservers, and WHOIS data.</p> <p> Learn more</p> </li> </ul>"},{"location":"#browser-checks-apiversion-browserv1","title":"Browser Checks (<code>apiVersion: browser/v1</code>)","text":"<ul> <li> <p>LoadCheck</p> <p>Monitor page load performance with real browsers. Track FCP, LCP, and network timing.</p> <p> Learn more</p> </li> <li> <p>ScriptedCheck</p> <p>Execute custom browser automation scripts with Playwright-based scripting.</p> <p> Learn more</p> </li> </ul>"},{"location":"#implementations","title":"Implementations","text":""},{"location":"#official","title":"Official","text":"Python Model<pre><code>pip install synthetic-open-schema-model\n</code></pre> Python Runner<pre><code>pip install synthetic-open-schema-runner\n</code></pre> <p> View all implementations</p>"},{"location":"#open-source","title":"Open Source","text":"<p>Licensed under Apache License 2.0. Stewarded by Ideatives Inc.</p> <p> Contributing Guide  Governance  Security</p>"},{"location":"examples/","title":"Examples","text":"<p>Complete, tested YAML example configurations for all check types. All examples are validated against the reference Python implementation.</p>"},{"location":"examples/#core-checks-apiversion-v1","title":"Core Checks (<code>apiVersion: v1</code>)","text":""},{"location":"examples/#httpcheck-httphttps-endpoint-monitoring","title":"HttpCheck \u2014 HTTP/HTTPS Endpoint Monitoring","text":"http-check.yaml<pre><code>apiVersion: v1\nkind: HttpCheck\nmetadata:\n  name: api-health-check\n  title: API Health Check\n  labels:\n    environment: production\n    service: api\nspec:\n  url: https://api.example.com/health\n  method: GET\n  interval: 1m\n  timeout: 30s\n  headers:\n    User-Agent: SyntheticMonitor/1.0\n    Accept: application/json\n  checks:\n    - type: statusCode\n      value: 200\n    - type: responseTime\n      operator: lessThan\n      value: 500ms\n    - type: body\n      operator: contains\n      value: '\"status\":\"ok\"'\n    - type: header\n      key: Content-Type\n      operator: contains\n      value: application/json\n</code></pre> <p>View full HttpCheck specification \u2192</p>"},{"location":"examples/#tcpcheck-tcp-port-connectivity","title":"TcpCheck \u2014 TCP Port Connectivity","text":"tcp-check.yaml<pre><code>apiVersion: v1\nkind: TcpCheck\nmetadata:\n  name: database-connectivity\n  title: Database TCP Check\nspec:\n  host: db.example.com\n  port: 5432\n  interval: 5m\n  timeout: 10s\n  retries: 3\n  retryDelay: 5s\n  checks:\n    - type: connect\n      value: true\n    - type: responseTime\n      operator: lessThan\n      value: 100ms\n</code></pre> <p>View full TcpCheck specification \u2192</p>"},{"location":"examples/#dnscheck-dns-resolution","title":"DnsCheck \u2014 DNS Resolution","text":"dns-check.yaml<pre><code>apiVersion: v1\nkind: DnsCheck\nmetadata:\n  name: domain-resolution\n  title: DNS A Record Check\nspec:\n  hostname: example.com\n  recordType: A\n  interval: 10m\n  nameserver: 8.8.8.8  # Optional: use specific DNS server\n  checks:\n    - type: addresses\n      operator: contains\n      value: \"93.184.216.34\"\n    - type: responseTime\n      operator: lessThan\n      value: 100ms\n</code></pre> <p>View full DnsCheck specification \u2192</p>"},{"location":"examples/#tlscheck-tlsssl-certificate-monitoring","title":"TlsCheck \u2014 TLS/SSL Certificate Monitoring","text":"tls-check.yaml<pre><code>apiVersion: v1\nkind: TlsCheck\nmetadata:\n  name: api-certificate\n  title: API TLS Certificate Check\nspec:\n  host: api.example.com\n  port: 443\n  interval: 6h\n  timeout: 30s\n  checks:\n    - type: validUntil\n      operator: greaterThan\n      value: 30d\n    - type: valid\n      value: true\n    - type: issuer\n      operator: contains\n      value: \"Let's Encrypt\"\n</code></pre> <p>SMTP with STARTTLS:</p> tls-smtp.yaml<pre><code>apiVersion: v1\nkind: TlsCheck\nmetadata:\n  name: smtp-tls-check\nspec:\n  host: smtp.example.com\n  port: 587\n  starttls: smtp  # Use STARTTLS protocol\n  interval: 1h\n  checks:\n    - type: valid\n      value: true\n    - type: validUntil\n      operator: greaterThan\n      value: 7d\n</code></pre> <p>View full TlsCheck specification \u2192</p>"},{"location":"examples/#domaincheck-domain-registration-monitoring","title":"DomainCheck \u2014 Domain Registration Monitoring","text":"domain-check.yaml<pre><code>apiVersion: v1\nkind: DomainCheck\nmetadata:\n  name: domain-expiration\n  title: Domain Registration Check\nspec:\n  domain: example.com\n  interval: 1d\n  timeout: 30s\n  checks:\n    - type: expiresAt\n      operator: greaterThan\n      value: 60d\n    - type: nameservers\n      operator: containsAll\n      values:\n        - ns1.example.com\n        - ns2.example.com\n    - type: dnssecEnabled\n      value: true\n    - type: registrar\n      operator: equals\n      value: \"Example Registrar Inc.\"\n</code></pre> <p>View full DomainCheck specification \u2192</p>"},{"location":"examples/#browser-checks-apiversion-browserv1","title":"Browser Checks (<code>apiVersion: browser/v1</code>)","text":""},{"location":"examples/#loadcheck-page-load-performance","title":"LoadCheck \u2014 Page Load Performance","text":"load-check.yaml<pre><code>apiVersion: browser/v1\nkind: LoadCheck\nmetadata:\n  name: homepage-load\n  title: Homepage Load Performance\nspec:\n  url: https://example.com\n  interval: 5m\n  timeout: 60s\n  browser:\n    browserType: chromium\n    viewport:\n      width: 1920\n      height: 1080\n    userAgent: \"Mozilla/5.0 (custom)\"\n  waitUntil: networkidle\n  screenshot: true\n  checks:\n    - type: firstContentfulPaint\n      operator: lessThan\n      value: 2s\n    - type: largestContentfulPaint\n      operator: lessThan\n      value: 3s\n    - type: pageLoadTime\n      operator: lessThan\n      value: 5s\n</code></pre> <p>View full LoadCheck specification \u2192</p>"},{"location":"examples/#scriptedcheck-browser-automation","title":"ScriptedCheck \u2014 Browser Automation","text":"scripted-check.yaml<pre><code>apiVersion: browser/v1\nkind: ScriptedCheck\nmetadata:\n  name: login-flow\n  title: User Login Flow Test\nspec:\n  url: https://app.example.com/login\n  interval: 10m\n  timeout: 120s\n  browser:\n    browserType: chromium\n  script: |\n    // Fill login form\n    await page.fill('#username', 'testuser');\n    await page.fill('#password', 'testpass');\n\n    // Click login button\n    await page.click('button[type=\"submit\"]');\n\n    // Wait for dashboard\n    await page.waitForSelector('.dashboard');\n\n    // Verify logged in\n    const username = await page.textContent('.user-name');\n    if (username !== 'Test User') {\n      throw new Error('Login failed');\n    }\n  screenshot: true\n  checks:\n    - type: scriptSuccess\n      value: true\n    - type: duration\n      operator: lessThan\n      value: 10s\n</code></pre> <p>With External Script File:</p> scripted-check-with-file.yaml<pre><code>apiVersion: browser/v1\nkind: ScriptedCheck\nmetadata:\n  name: checkout-flow\nspec:\n  url: https://shop.example.com\n  interval: 15m\n  scriptFile: scripts/checkout-test.js\n  scriptParams:\n    productId: \"12345\"\n    quantity: \"2\"\n  checks:\n    - type: scriptSuccess\n      value: true\n</code></pre> <p>View full ScriptedCheck specification \u2192</p>"},{"location":"examples/#advanced-examples","title":"Advanced Examples","text":""},{"location":"examples/#multi-location-http-check","title":"Multi-Location HTTP Check","text":"<pre><code>apiVersion: v1\nkind: HttpCheck\nmetadata:\n  name: global-api-check\nspec:\n  url: https://api.example.com/v1/status\n  interval: 1m\n  locations:\n    - us-east-1\n    - eu-west-1\n    - ap-southeast-1\n  checks:\n    - type: statusCode\n      value: 200\n    - type: responseTime\n      operator: lessThan\n      value: 1s\n  channels:\n    - slack-alerts\n    - pagerduty-critical\n</code></pre>"},{"location":"examples/#http-check-with-authentication","title":"HTTP Check with Authentication","text":"<pre><code>apiVersion: v1\nkind: HttpCheck\nmetadata:\n  name: authenticated-api-check\nspec:\n  url: https://api.example.com/protected\n  method: POST\n  headers:\n    Authorization: Bearer ${API_TOKEN}\n    Content-Type: application/json\n  body: |\n    {\n      \"query\": \"health\"\n    }\n  interval: 5m\n  checks:\n    - type: statusCode\n      value: 200\n    - type: body\n      operator: contains\n      value: '\"healthy\":true'\n</code></pre>"},{"location":"examples/#dns-check-with-multiple-record-types","title":"DNS Check with Multiple Record Types","text":"<pre><code>apiVersion: v1\nkind: DnsCheck\nmetadata:\n  name: mx-record-check\nspec:\n  hostname: example.com\n  recordType: MX\n  interval: 1h\n  checks:\n    - type: records\n      operator: containsAny\n      values:\n        - \"10 mail.example.com.\"\n        - \"20 mail2.example.com.\"\n</code></pre>"},{"location":"examples/#browser-check-with-cookies","title":"Browser Check with Cookies","text":"<pre><code>apiVersion: browser/v1\nkind: LoadCheck\nmetadata:\n  name: authenticated-page-load\nspec:\n  url: https://app.example.com/dashboard\n  interval: 10m\n  browser:\n    cookies:\n      - name: session_id\n        value: ${SESSION_TOKEN}\n        domain: app.example.com\n        secure: true\n        httpOnly: true\n  checks:\n    - type: pageLoadTime\n      operator: lessThan\n      value: 3s\n</code></pre>"},{"location":"examples/#complete-example-repository","title":"Complete Example Repository","text":"<p>All examples are available in the model repository with validation tests:</p> <p>\ud83d\udce6 syntheticopenschema/model/examples</p> <p>These examples are: - \u2705 Tested against the reference implementation - \u2705 Validated on every commit - \u2705 Kept in sync with the specification - \u2705 Runnable with the Python runner</p>"},{"location":"examples/#running-examples","title":"Running Examples","text":""},{"location":"examples/#using-python-runner","title":"Using Python Runner","text":"<pre><code># Install the runner\npip install synthetic-open-schema-runner\n\n# Run an example\nsos-runner examples/http-check.yaml\n\n# Run with verbose output\nsos-runner --verbose examples/http-check.yaml\n</code></pre>"},{"location":"examples/#contributing-examples","title":"Contributing Examples","text":"<p>Have a useful example? Contribute it!</p> <ol> <li>Fork the model repository</li> <li>Add your example to <code>examples/</code></li> <li>Add a test to validate it</li> <li>Submit a pull request</li> </ol> <p>Read contribution guidelines \u2192</p>"},{"location":"getting-started/","title":"Getting Started","text":"<p>Welcome to Synthetic Open Schema! This guide will help you create and run your first synthetic check in under 5 minutes.</p>"},{"location":"getting-started/#what-youll-build","title":"What You'll Build","text":"<p>A simple HTTP endpoint monitor that:</p> <ul> <li>Checks if an API returns HTTP 200</li> <li>Validates response time is under 1 second</li> <li>Runs every 5 minutes</li> </ul>"},{"location":"getting-started/#prerequisites","title":"Prerequisites","text":"<ul> <li>Basic understanding of YAML</li> <li>A text editor</li> <li>(Optional) Python 3.11+ to run checks locally</li> </ul>"},{"location":"getting-started/#step-1-create-your-first-check","title":"Step 1: Create Your First Check","text":"<p>Create a file named <code>my-first-check.yaml</code>:</p> my-first-check.yaml<pre><code>apiVersion: v1\nkind: HttpCheck\nmetadata:\n  name: my-api-check\n  title: My First API Check\n  labels:\n    environment: production\n    team: platform\nspec:\n  url: https://httpbin.org/status/200\n  method: GET\n  interval: 5m\n  timeout: 30s\n  checks:\n    - type: statusCode\n      value: 200\n    - type: responseTime\n      operator: lessThan\n      value: 1s\n</code></pre>"},{"location":"getting-started/#step-2-understand-the-structure","title":"Step 2: Understand the Structure","text":"<p>Every Synthetic Open Schema check follows this structure:</p>"},{"location":"getting-started/#apiversion","title":"<code>apiVersion</code>","text":"<p>Specifies which API version to use: - <code>v1</code> \u2014 Core checks (HTTP, TCP, DNS, TLS, Domain) - <code>browser/v1</code> \u2014 Browser automation checks (Load, Scripted)</p>"},{"location":"getting-started/#kind","title":"<code>kind</code>","text":"<p>The type of check: - <code>HttpCheck</code>, <code>TcpCheck</code>, <code>DnsCheck</code>, <code>TlsCheck</code>, <code>DomainCheck</code> - <code>LoadCheck</code>, <code>ScriptedCheck</code></p>"},{"location":"getting-started/#metadata","title":"<code>metadata</code>","text":"<p>Information about the check: - <code>name</code> \u2014 Unique identifier (DNS-subdomain format) - <code>title</code> \u2014 Human-readable name (optional) - <code>labels</code> \u2014 Key-value pairs for organization (optional)</p>"},{"location":"getting-started/#spec","title":"<code>spec</code>","text":"<p>Check-specific configuration: - Scheduling: <code>interval</code> (e.g., <code>1m</code>, <code>5s</code>) or <code>cron</code> expression - Execution: <code>timeout</code>, <code>retries</code>, <code>locations</code> - Notifications: <code>channels</code> for alerting - Assertions: <code>checks</code> array defining success criteria</p>"},{"location":"getting-started/#step-3-run-your-check","title":"Step 3: Run Your Check","text":""},{"location":"getting-started/#option-a-using-python-runner","title":"Option A: Using Python Runner","text":"<p>Install the runner:</p> <pre><code>pip install synthetic-open-schema-runner\n</code></pre> <p>Run your check:</p> <pre><code>sos-runner my-first-check.yaml\n</code></pre> <p>Expected output:</p> <pre><code>\u2713 my-api-check: PASSED\n  \u2713 statusCode: 200 equals 200\n  \u2713 responseTime: 245ms lessThan 1s\n\nDuration: 245ms\n</code></pre>"},{"location":"getting-started/#step-4-explore-more-check-types","title":"Step 4: Explore More Check Types","text":"<p>Synthetic Open Schema supports 7 check types across two API versions:</p> <p>Core Checks (v1): - TcpCheck \u2014 Monitor TCP port connectivity - DnsCheck \u2014 Verify DNS resolution for any record type - TlsCheck \u2014 Monitor certificate expiration and validity - DomainCheck \u2014 Track domain registration and WHOIS data</p> <p>Browser Checks (browser/v1): - LoadCheck \u2014 Measure real browser page load performance - ScriptedCheck \u2014 Execute custom Playwright automation scripts</p> <p>View complete examples for all check types \u2192</p>"},{"location":"getting-started/#step-5-add-assertions","title":"Step 5: Add Assertions","text":"<p>Assertions define what \"success\" means for your check. Different check types support different assertion types:</p>"},{"location":"getting-started/#numeric-assertions","title":"Numeric Assertions","text":"<pre><code>checks:\n  - type: statusCode\n    value: 200                    # equals\n  - type: responseTime\n    operator: lessThan\n    value: 500ms\n  - type: responseTime\n    operator: greaterThanOrEqual\n    value: 100ms\n</code></pre> <p>Operators: <code>equals</code>, <code>notEquals</code>, <code>greaterThan</code>, <code>lessThan</code>, <code>greaterThanOrEqual</code>, <code>lessThanOrEqual</code></p>"},{"location":"getting-started/#string-assertions","title":"String Assertions","text":"<pre><code>checks:\n  - type: body\n    operator: contains\n    value: \"success\"\n  - type: header\n    key: Content-Type\n    operator: matches\n    value: \"^application/json\"\n</code></pre> <p>Operators: <code>equals</code>, <code>notEquals</code>, <code>contains</code>, <code>notContains</code>, <code>matches</code> (regex)</p>"},{"location":"getting-started/#boolean-assertions","title":"Boolean Assertions","text":"<pre><code>checks:\n  - type: dnssecEnabled\n    value: true\n  - type: connect\n    value: true\n</code></pre> <p>Operators: <code>equals</code>, <code>notEquals</code></p> <p>View all assertion types \u2192</p>"},{"location":"getting-started/#step-6-schedule-your-checks","title":"Step 6: Schedule Your Checks","text":""},{"location":"getting-started/#interval-based-scheduling","title":"Interval-Based Scheduling","text":"<pre><code>spec:\n  interval: 1m      # Every minute\n  interval: 30s     # Every 30 seconds\n  interval: 1h      # Every hour\n  interval: 1d      # Every day\n</code></pre>"},{"location":"getting-started/#cron-based-scheduling","title":"Cron-Based Scheduling","text":"<pre><code>spec:\n  cron: \"0 * * * *\"        # Every hour\n  cron: \"*/5 * * * *\"      # Every 5 minutes\n  cron: \"0 0 * * *\"        # Daily at midnight\n  cron: \"0 9 * * MON-FRI\"  # Weekdays at 9am\n</code></pre> <p>Note</p> <p><code>interval</code> and <code>cron</code> are mutually exclusive. Use one or the other, not both.</p>"},{"location":"getting-started/#next-steps","title":"Next Steps","text":""},{"location":"getting-started/#learn-the-specification","title":"Learn the Specification","text":"<ul> <li>Read the complete v1 specification</li> <li>Understand common types and fields</li> <li>Explore browser checks</li> </ul>"},{"location":"getting-started/#see-more-examples","title":"See More Examples","text":"<ul> <li>Browse example configurations</li> <li>View the model repository examples</li> </ul>"},{"location":"getting-started/#build-or-integrate","title":"Build or Integrate","text":"<ul> <li>View existing implementations</li> </ul>"},{"location":"getting-started/#join-the-community","title":"Join the Community","text":"<ul> <li>Contribute to the specification</li> <li>Read the governance model</li> <li>Report security issues</li> </ul>"},{"location":"getting-started/#need-help","title":"Need Help?","text":"<ul> <li>\ud83d\udcac GitHub Discussions</li> <li>\ud83d\udc1b Report Issues</li> <li>\ud83d\udcd6 Read the Spec</li> </ul> <p>Ready to monitor? Start writing your checks! \ud83d\ude80</p>"},{"location":"implementations/","title":"Implementations","text":"<p>Synthetic Open Schema can be implemented in any language. This page lists official and community implementations.</p>"},{"location":"implementations/#official-implementations","title":"Official Implementations","text":""},{"location":"implementations/#python","title":"Python","text":"<p>The reference implementation in Python, maintained by Ideatives Inc.</p>"},{"location":"implementations/#model-pydantic","title":"Model (Pydantic)","text":"<p>Pydantic-based models for all check types with strict validation.</p> <pre><code>pip install synthetic-open-schema-model\n</code></pre> <p>Repository: syntheticopenschema/model License: Apache 2.0 Python: 3.11+</p> <p>Features: - \u2705 All v1 check types - \u2705 All browser/v1 check types - \u2705 Strict Pydantic validation - \u2705 JSON Schema generation - \u2705 Type hints throughout</p> <p>Usage:</p> <pre><code>from synthetic_open_schema_model.v1 import HttpCheck\n\n# Parse YAML/JSON\ncheck = HttpCheck.model_validate({\n    \"apiVersion\": \"v1\",\n    \"kind\": \"HttpCheck\",\n    \"metadata\": {\"name\": \"my-check\"},\n    \"spec\": {\n        \"url\": \"https://example.com\",\n        \"interval\": \"1m\",\n        \"checks\": [{\"type\": \"statusCode\", \"value\": 200}]\n    }\n})\n\n# Validate and use\nprint(check.spec.url)\n</code></pre>"},{"location":"implementations/#runner-execution-engine","title":"Runner (Execution Engine)","text":"<p>Python execution engine for running checks.</p> <pre><code>pip install synthetic-open-schema-runner\n</code></pre> <p>Repository: syntheticopenschema/runner License: Apache 2.0 Python: 3.11+</p> <p>Features: - \u2705 Sync and async execution - \u2705 All v1 check types - \u2705 Browser checks (Playwright) - \u2705 Assertion evaluation - \u2705 Retry logic - \u2705 Result reporting</p> <p>CLI Usage:</p> <pre><code># Run a single check\nsos-runner check.yaml\n\n# Run with verbose output\nsos-runner --verbose check.yaml\n\n# Run with custom timeout\nsos-runner --timeout 60 check.yaml\n</code></pre> <p>Programmatic Usage:</p> <pre><code>from synthetic_open_schema_runner import run_check\nfrom synthetic_open_schema_model.v1 import HttpCheck\n\n# Create or load check\ncheck = HttpCheck(...)\n\n# Run synchronously\nresult = run_check(check)\nprint(f\"Status: {result.success}\")\n\n# Run asynchronously\nresult = await run_check_async(check)\n</code></pre>"},{"location":"implementations/#json-schemas","title":"JSON Schemas","text":"<p>JSON Schema definitions for all check types, generated from the Python model.</p> <p>Repository: syntheticopenschema/schemas License: Apache 2.0</p> <p>Usage:</p> <pre><code># Download schemas\ncurl -O https://raw.githubusercontent.com/syntheticopenschema/schemas/main/v1.json\ncurl -O https://raw.githubusercontent.com/syntheticopenschema/schemas/main/browser-v1.json\n\n# Validate with JSON Schema\njsonschema -i check.json v1.json\n</code></pre>"},{"location":"implementations/#community-implementations","title":"Community Implementations","text":"<p>Built a conformant implementation? We'd love to list it here! Open an issue with your implementation details.</p>"},{"location":"implementations/#resources","title":"Resources","text":"<ul> <li>\ud83d\udcd6 Read the Specification</li> <li>\ud83d\udca1 View Examples</li> <li>\ud83d\udc0d Python Model Source</li> <li>\ud83c\udfc3 Python Runner Source</li> <li>\ud83d\udcca JSON Schemas</li> </ul>"},{"location":"implementations/#questions","title":"Questions?","text":"<ul> <li>\ud83d\udcac GitHub Discussions</li> <li>\ud83d\udc1b Report Issues</li> <li>\ud83d\udce7 Contact through GitHub</li> </ul> <p>Ready to build? We're excited to see what you create! \ud83d\ude80</p>"},{"location":"specification/","title":"Specification Overview","text":"<p>The Synthetic Open Schema specification defines a vendor-neutral format for synthetic monitoring checks. This page provides an overview of the specification structure and how to navigate it.</p>"},{"location":"specification/#api-versions","title":"API Versions","text":"<p>Synthetic Open Schema uses semantic API versioning:</p>"},{"location":"specification/#v1-core-checks-stable","title":"<code>v1</code> \u2014 Core Checks (Stable)","text":"<p>Declarative checks with assertion-based validation:</p> <ul> <li>HttpCheck \u2014 HTTP/HTTPS endpoint monitoring</li> <li>TcpCheck \u2014 TCP port connectivity</li> <li>DnsCheck \u2014 DNS resolution validation</li> <li>TlsCheck \u2014 TLS/SSL certificate monitoring</li> <li>DomainCheck \u2014 Domain registration checks</li> </ul> <p>Status: \u2705 Stable (v1.0.0 released 2026-02-07)</p> <p>View v1 API documentation \u2192</p>"},{"location":"specification/#browserv1-browser-checks-stable","title":"<code>browser/v1</code> \u2014 Browser Checks (Stable)","text":"<p>Programmatic browser automation checks:</p> <ul> <li>LoadCheck \u2014 Page load performance monitoring</li> <li>ScriptedCheck \u2014 Browser automation scripts</li> </ul> <p>Status: \u2705 Stable (v1.0.0 released 2026-02-07)</p> <p>View browser/v1 API documentation \u2192</p>"},{"location":"specification/#specification-structure","title":"Specification Structure","text":""},{"location":"specification/#core-documents","title":"Core Documents","text":"Document Description Base Model Resource structure (<code>apiVersion</code>, <code>kind</code>, <code>metadata</code>, <code>spec</code>) Common Types Shared fields, assertion types, operators, validation rules"},{"location":"specification/#check-kind-specifications","title":"Check Kind Specifications","text":"<p>Each check kind has its own specification document:</p> <ul> <li>Fields: Required and optional fields for the check</li> <li>Assertions: Supported assertion types for validation</li> <li>Examples: Complete YAML examples</li> <li>Conformance: Requirements for implementations</li> </ul>"},{"location":"specification/#policy-documents","title":"Policy Documents","text":"Document Description Glossary Terminology and definitions Versioning API versioning strategy Compatibility Backward/forward compatibility guarantees"},{"location":"specification/#resource-model","title":"Resource Model","text":"<p>All checks follow a Kubernetes-style resource structure:</p> <pre><code>apiVersion: v1              # or browser/v1\nkind: HttpCheck             # Check type\nmetadata:\n  name: my-check            # Unique identifier\n  title: My Check           # Human-readable name (optional)\n  labels:                   # Key-value pairs (optional)\n    env: production\nspec:\n  # Check-specific configuration\n  url: https://example.com\n  interval: 1m\n  checks:\n    - type: statusCode\n      value: 200\n</code></pre>"},{"location":"specification/#key-concepts","title":"Key Concepts","text":"<ul> <li>apiVersion: Declares which API version the check uses</li> <li>kind: Specifies the check type (e.g., <code>HttpCheck</code>, <code>DnsCheck</code>)</li> <li>metadata: Information about the check (name, labels, etc.)</li> <li>spec: Check-specific configuration and assertions</li> </ul> <p>Learn more about the base model \u2192</p>"},{"location":"specification/#common-fields","title":"Common Fields","text":"<p>All check kinds share these fields in their <code>spec</code>:</p>"},{"location":"specification/#scheduling-mutually-exclusive","title":"Scheduling (Mutually Exclusive)","text":"<p>Interval-based: <pre><code>spec:\n  interval: 1m  # Every minute\n</code></pre></p> <p>Cron-based: <pre><code>spec:\n  cron: \"*/5 * * * *\"  # Every 5 minutes\n</code></pre></p>"},{"location":"specification/#execution","title":"Execution","text":"<pre><code>spec:\n  timeout: 30s              # Maximum execution time\n  retries: 3                # Number of retry attempts\n  retryDelay: 5s            # Delay between retries\n  locations:                # Execution locations\n    - us-east-1\n    - eu-west-1\n</code></pre>"},{"location":"specification/#notifications","title":"Notifications","text":"<pre><code>spec:\n  channels:                 # Notification channels\n    - slack-alerts\n    - pagerduty-critical\n</code></pre>"},{"location":"specification/#assertions","title":"Assertions","text":"<pre><code>spec:\n  checks:                   # Success criteria\n    - type: statusCode\n      value: 200\n    - type: responseTime\n      operator: lessThan\n      value: 500ms\n</code></pre> <p>View complete common fields documentation \u2192</p>"},{"location":"specification/#assertion-types","title":"Assertion Types","text":"<p>Synthetic Open Schema supports five assertion types, each with specific operators and value formats:</p> <ul> <li>Numeric \u2014 Status codes, response times, counts (operators: equals, greaterThan, lessThan, etc.)</li> <li>String \u2014 Body content, headers, DNS records (operators: equals, contains, matches, etc.)</li> <li>Boolean \u2014 Binary states like connected, valid, enabled (operators: equals, notEquals)</li> <li>Time-based \u2014 Dates, expirations, durations (operators: same as numeric)</li> <li>List \u2014 DNS records, nameservers, arrays (operators: contains, containsAny, containsAll)</li> </ul> <p>View complete assertion documentation with examples \u2192</p>"},{"location":"specification/#conformance","title":"Conformance","text":"<p>An implementation claiming compatibility with Synthetic Open Schema MUST:</p> <ol> <li>Implement the base Resource model as defined in check.md</li> <li>Support at least one check kind fully</li> <li>Reject configurations that violate normative constraints</li> <li>Clearly document which check kinds and features are supported</li> <li>Handle scheduling (interval or cron) as specified</li> <li>Evaluate assertions according to the specification</li> </ol> <p>Implementations SHOULD:</p> <ul> <li>Support all stable check kinds</li> <li>Provide clear error messages for validation failures</li> <li>Support multiple execution locations</li> <li>Implement retry logic</li> </ul> <p>Learn more about conformance requirements \u2192</p>"},{"location":"specification/#examples","title":"Examples","text":"<p>Complete, tested YAML example configurations are available in the model repository:</p> <p>Core Checks (v1):</p> <ul> <li>http-check.yaml</li> <li>tcp-check.yaml</li> <li>dns-check.yaml</li> <li>tls-check.yaml</li> <li>domain-check.yaml</li> </ul> <p>Browser Checks (browser/v1):</p> <ul> <li>load-check.yaml</li> <li>scripted-check.yaml</li> </ul> <p>View all examples \u2192</p>"},{"location":"specification/#json-schema","title":"JSON Schema","text":"<p>JSON Schema definitions for validation and tooling integration are published at:</p> <p>\ud83d\udce6 https://github.com/syntheticopenschema/schemas</p> <p>These schemas are generated from the reference Python implementation and updated with each release.</p>"},{"location":"specification/#contributing","title":"Contributing","text":"<p>To propose changes to the specification:</p> <ol> <li>Open an issue describing the proposed change</li> <li>Submit a pull request with specification updates</li> <li>Update examples and schemas accordingly</li> <li>Ensure backward compatibility (or document breaking change)</li> </ol> <p>Read the contribution guidelines \u2192</p>"},{"location":"specification/#governance","title":"Governance","text":"<p>The specification follows an open governance model:</p> <ul> <li>Steward: Ideatives Inc.</li> <li>Maintainer: @dmonroy</li> <li>RFC Process: New check types require 14-day community review</li> <li>Decision Process: Documented in GOVERNANCE.md</li> </ul> <p>Learn more about governance \u2192</p>"},{"location":"specification/#support","title":"Support","text":"<ul> <li>\ud83d\udcac GitHub Discussions</li> <li>\ud83d\udc1b Report Issues</li> <li>\ud83d\udd12 Security Issues</li> </ul>"},{"location":"specification/browser-v1/_index/","title":"Browser Check Specification","text":"<p>API Version: <code>browser/v1</code> Status: Stable</p>"},{"location":"specification/browser-v1/_index/#overview","title":"Overview","text":"<p>Browser checks use browser automation to validate web applications through real browser interactions. They support both passive monitoring (page loads) and active automation (scripted workflows).</p> <p>Key Characteristics: - Real browser execution (Chromium, Firefox, WebKit) - Visual rendering and JavaScript execution - Performance metrics collection - Hybrid validation model (scripts + assertions)</p>"},{"location":"specification/browser-v1/_index/#implementation-independence","title":"Implementation Independence","text":"<p>IMPORTANT: This specification does NOT prescribe: - Which browser automation library to use (Playwright, Puppeteer, Selenium, etc.) - How to implement browser orchestration - Specific API surface for scripts</p> <p>Vendor Responsibility: Organizations implementing Synthetic Open Schema MUST: 1. Document which orchestrator(s) they support 2. Provide clear API documentation for script authors 3. Publish code examples for common use cases 4. Advertise which languages and engines are supported</p> <p>The specification defines WHAT to validate (browser config, assertions, check structure). Implementations choose HOW to execute (orchestrator, API surface, runtime).</p> <p>Portability: Scripts written for one implementation (e.g., using Playwright) may NOT be portable to another implementation (e.g., using Puppeteer) unless they share the same orchestrator.</p>"},{"location":"specification/browser-v1/_index/#differences-from-core-checks-v1","title":"Differences from Core Checks (v1)","text":"Aspect Core Checks (v1) Browser Checks (browser/v1) API Version <code>v1</code> <code>browser/v1</code> Execution Protocol-level (HTTP, TCP, DNS) Browser automation Complexity Simple, declarative Advanced, may include scripting Dependencies Minimal Browser automation library Implementation All runners Optional for runners Performance Fast (milliseconds) Slower (seconds)"},{"location":"specification/browser-v1/_index/#supported-check-kinds","title":"Supported Check Kinds","text":""},{"location":"specification/browser-v1/_index/#current","title":"Current","text":"<ul> <li>LoadCheck - Passive page load and performance monitoring</li> <li>ScriptedCheck - Active browser automation with custom scripts</li> </ul>"},{"location":"specification/browser-v1/_index/#planned","title":"Planned","text":"<ul> <li>PuppeteerCheck - Browser automation using Puppeteer</li> <li>SeleniumCheck - Browser automation using Selenium WebDriver</li> </ul>"},{"location":"specification/browser-v1/_index/#resource-structure","title":"Resource Structure","text":"<p>Browser checks follow the same base resource structure as core checks:</p> <pre><code>apiVersion: browser/v1\nkind: LoadCheck  # or ScriptedCheck\nmetadata:\n  name: check-name\n  title: \"Human-readable title\"\n  labels:\n    key: value\nspec:\n  url: https://example.com\n  browser:\n    engine: chromium\n    viewport:\n      width: 1920\n      height: 1080\n  # Check-specific fields\n  # Common fields (interval, timeout, etc.)\n</code></pre>"},{"location":"specification/browser-v1/_index/#common-fields","title":"Common Fields","text":"<p>Browser checks inherit common fields from the base <code>CheckSpec</code>:</p> <ul> <li><code>interval</code> or <code>cron</code> - Scheduling (REQUIRED, mutually exclusive)</li> <li><code>timeout</code> - Maximum execution time (OPTIONAL, default: <code>30s</code> for LoadCheck, <code>60s</code> for ScriptedCheck)</li> <li><code>retries</code> - Retry attempts (OPTIONAL, default: <code>1</code>)</li> <li><code>locations</code> - Execution locations (OPTIONAL, default: <code>[]</code>)</li> <li><code>channels</code> - Notification destinations (OPTIONAL, default: <code>[]</code>)</li> </ul> <p>See v1/check.md for detailed specifications.</p>"},{"location":"specification/browser-v1/_index/#hybrid-validation-model","title":"Hybrid Validation Model","text":"<p>Browser checks use a hybrid model combining scripts and assertions:</p>"},{"location":"specification/browser-v1/_index/#loadcheck-passive","title":"LoadCheck (Passive)","text":"<ul> <li>No script: Simply loads the page</li> <li>Assertions: Validate page load results (status, load time, elements, text)</li> <li>Example: Page load performance monitoring</li> </ul> <pre><code>spec:\n  url: https://example.com\n  checks:\n    - type: status\n      operator: equals\n      value: 200\n    - type: loadTime\n      operator: lessThan\n      value: 3000\n</code></pre>"},{"location":"specification/browser-v1/_index/#scriptedcheck-active","title":"ScriptedCheck (Active)","text":"<ul> <li>Script: Custom automation logic (login, form submission, navigation)</li> <li>Assertions: Validate final state after script execution</li> <li>Both: Script can fail (throw error) OR assertions can fail</li> </ul> <pre><code>spec:\n  url: https://app.example.com/login\n  script:\n    language: javascript\n    entrypoint: validateLogin\n    source:\n      inline: |\n        async function validateLogin(page, context) {\n          await page.fill('#username', 'test@example.com');\n          await page.click('#submit');\n          await page.waitForNavigation();\n        }\n  checks:\n    - type: elementPresent\n      selector: \".user-menu\"\n      operator: equals\n      value: true\n</code></pre>"},{"location":"specification/browser-v1/_index/#common-types","title":"Common Types","text":"<p>Browser checks share common configuration types:</p> <ul> <li>BrowserEngine - Browser engine selection (<code>chromium</code>, <code>firefox</code>, <code>webkit</code>)</li> <li>Viewport - Browser window dimensions</li> <li>BrowserConfig - Complete browser configuration</li> </ul> <p>See common.md for full specifications.</p>"},{"location":"specification/browser-v1/_index/#check-specifications","title":"Check Specifications","text":"<ul> <li>load_check.md - LoadCheck (passive page load monitoring)</li> <li>scripted_check.md - ScriptedCheck (active browser automation)</li> </ul>"},{"location":"specification/browser-v1/_index/#design-rationale","title":"Design Rationale","text":""},{"location":"specification/browser-v1/_index/#why-separate-api-version","title":"Why Separate API Version?","text":"<ol> <li>Different Execution Model: Browser automation requires different runtime than protocol-level checks</li> <li>Heavy Dependencies: Browser automation libraries (Playwright, Puppeteer) are large (100+ MB)</li> <li>Optional Implementation: Not all runners need to support browser checks</li> <li>Independent Evolution: Browser check features can evolve without affecting v1</li> <li>Performance Trade-off: Browser checks are slower but provide richer validation</li> <li>Clear Separation: Distinct API version makes the difference explicit</li> </ol>"},{"location":"specification/browser-v1/_index/#why-hybrid-model-scripts-assertions","title":"Why Hybrid Model (Scripts + Assertions)?","text":"<p>LoadCheck: No script needed, pure declarative assertions work well for page loads.</p> <p>ScriptedCheck: Hybrid approach provides flexibility: - Script: Executes complex workflows (login, checkout, multi-step forms) - Assertions: Validates final state in a structured, reportable way - Both: Script errors provide immediate feedback, assertions provide detailed validation</p> <p>This is more powerful than script-only or assertion-only approaches.</p>"},{"location":"specification/browser-v1/_index/#why-loadcheck-and-scriptedcheck-instead-of-single-playwrightcheck","title":"Why LoadCheck and ScriptedCheck Instead of Single PlaywrightCheck?","text":"<p>Separating passive and active checks: - Clarity: Intent is clear from the check kind - Simplicity: LoadCheck is simpler (no script configuration) - Performance: Runners can optimize passive checks differently - Governance: Different checks may have different approval workflows</p>"},{"location":"specification/browser-v1/_index/#conformance","title":"Conformance","text":"<p>Implementations claiming support for <code>browser/v1</code> MUST:</p> <ol> <li>Support the base browser check resource model (<code>BrowserConfig</code>, <code>Viewport</code>, <code>BrowserEngine</code>)</li> <li>Execute at least one browser check kind (LoadCheck or ScriptedCheck)</li> <li>Inherit common scheduling and execution semantics from v1</li> <li>Support at least one browser engine (<code>chromium</code>, <code>firefox</code>, or <code>webkit</code>)</li> <li>Honor browser configuration (viewport, user agent, locale, timezone)</li> <li>Evaluate assertions in the <code>checks</code> field</li> <li>Report errors clearly (script errors, assertion failures, browser errors)</li> <li>Implement proper timeouts and retries</li> <li>Document which browser automation library/orchestrator is used</li> <li>Provide code examples for supported script languages and orchestrators</li> <li>Clearly specify the API surface provided to scripts (<code>page</code>, <code>context</code>)</li> </ol> <p>Implementations MAY: - Support all browser engines or a subset - Support multiple script languages - Support multiple orchestrators (Playwright, Puppeteer, Selenium, custom) - Provide additional browser-specific features (screenshots, video recording) - Extend with custom browser check types - Collect additional performance metrics - Use cloud browser services or custom browser automation protocols</p>"},{"location":"specification/browser-v1/_index/#relationship-to-v1","title":"Relationship to v1","text":"<p>Browser checks (<code>browser/v1</code>) extend the same base types as core checks (<code>v1</code>): - Use same <code>Resource</code> structure (apiVersion, kind, metadata, spec) - Inherit <code>CheckSpec</code> for common fields (interval, cron, timeout, retries, locations, channels) - Follow same validation rules (extra fields forbidden, strict typing) - Use same assertion base types (NumericAssertion, StringAssertion, BooleanAssertion)</p> <p>Key differences: - Execution: Browser automation vs protocol-level requests - Performance: Seconds vs milliseconds - Dependencies: Browser library vs minimal dependencies - Validation: Hybrid (scripts + assertions) vs pure assertions</p>"},{"location":"specification/browser-v1/_index/#examples","title":"Examples","text":"<p>Example browser checks are in the model repository <code>examples/</code> directory:</p> <ul> <li>load-check.yaml - LoadCheck example</li> <li>scripted-check.yaml - ScriptedCheck with inline script</li> <li>scripted-check-with-file.yaml - ScriptedCheck with external script</li> </ul>"},{"location":"specification/browser-v1/_index/#migration-note","title":"Migration Note","text":"<p>In earlier versions, there was a single <code>PlaywrightCheck</code> kind. This has been split into two distinct check kinds:</p> <ul> <li>LoadCheck - For passive page load monitoring (no scripting)</li> <li>ScriptedCheck - For active browser automation (with scripting)</li> </ul> <p>This separation provides better clarity and allows for simpler configurations when scripting is not needed.</p>"},{"location":"specification/browser-v1/common/","title":"Browser Common Types","text":"<p>API Version: <code>browser/v1</code> Status: Stable</p>"},{"location":"specification/browser-v1/common/#overview","title":"Overview","text":"<p>This document defines common types and configurations shared across all browser check kinds in the <code>browser/v1</code> API version.</p>"},{"location":"specification/browser-v1/common/#table-of-contents","title":"Table of Contents","text":"<ul> <li>BrowserEngine</li> <li>Viewport</li> <li>BrowserConfig</li> <li>Design Rationale</li> <li>Examples</li> </ul>"},{"location":"specification/browser-v1/common/#browserengine","title":"BrowserEngine","text":"<p>Browser engine for check execution.</p>"},{"location":"specification/browser-v1/common/#type","title":"Type","text":"<p><code>BrowserEngine</code> is an enumeration string with the following valid values:</p> Value Description Underlying Technology <code>chromium</code> Chromium-based browser Chromium/Chrome <code>firefox</code> Mozilla Firefox browser Gecko <code>webkit</code> WebKit-based browser WebKit (Safari)"},{"location":"specification/browser-v1/common/#semantics","title":"Semantics","text":"<ul> <li>The browser engine determines which browser implementation is used for check execution</li> <li>Each engine has different rendering behavior, JavaScript engine, and capabilities</li> <li>Cross-browser testing requires executing checks with multiple engines</li> <li>Runner implementations MUST support at least one engine</li> <li>Runner implementations SHOULD document which engines are supported</li> </ul>"},{"location":"specification/browser-v1/common/#conformance-requirements","title":"Conformance Requirements","text":"<p>Runners claiming support for <code>browser/v1</code> MUST: - Support at least one value from the <code>BrowserEngine</code> enumeration - Document which engines are supported - Return clear errors if an unsupported engine is requested - Use the specified engine consistently across check executions</p>"},{"location":"specification/browser-v1/common/#implementation-notes","title":"Implementation Notes","text":"<p>The browser automation library/orchestrator used is implementation-specific. The specification does not prescribe Playwright, Puppeteer, Selenium, or any other specific library.</p> <p>Implementations MUST document which automation libraries they support and how <code>BrowserEngine</code> values map to actual browser binaries.</p> <p>Example mappings (implementation-dependent):</p> <p>Playwright (example): - <code>chromium</code> \u2192 Chromium (typically Chrome) - <code>firefox</code> \u2192 Mozilla Firefox - <code>webkit</code> \u2192 WebKit (Safari Technology Preview on macOS)</p> <p>Puppeteer (example): - <code>chromium</code> \u2192 Chromium/Chrome only - <code>firefox</code> and <code>webkit</code> \u2192 Not supported</p> <p>Selenium WebDriver (example): - <code>chromium</code> \u2192 ChromeDriver - <code>firefox</code> \u2192 GeckoDriver - <code>webkit</code> \u2192 WebKitDriver (limited support)</p> <p>Custom implementations may: - Use headless Chrome/Firefox directly - Integrate with cloud browser services (BrowserStack, Sauce Labs) - Implement custom browser automation protocols</p>"},{"location":"specification/browser-v1/common/#viewport","title":"Viewport","text":"<p>Browser viewport dimensions in pixels.</p>"},{"location":"specification/browser-v1/common/#fields","title":"Fields","text":"Field Type Required Description <code>width</code> <code>integer</code> REQUIRED Viewport width in pixels <code>height</code> <code>integer</code> REQUIRED Viewport height in pixels"},{"location":"specification/browser-v1/common/#constraints","title":"Constraints","text":"<ul> <li><code>width</code> MUST be a positive integer (&gt; 0)</li> <li><code>height</code> MUST be a positive integer (&gt; 0)</li> <li>Common viewport sizes:</li> <li>Desktop: 1920x1080, 1366x768, 1440x900</li> <li>Tablet: 768x1024, 1024x768</li> <li>Mobile: 375x667 (iPhone), 360x640 (Android)</li> </ul>"},{"location":"specification/browser-v1/common/#semantics_1","title":"Semantics","text":"<p>The viewport defines the visible browser window size: - Affects responsive design behavior (media queries) - Determines element visibility and layout - Does not include browser chrome (toolbars, address bar) - Combined with <code>deviceScaleFactor</code> for mobile emulation</p>"},{"location":"specification/browser-v1/common/#example","title":"Example","text":"<pre><code>viewport:\n  width: 1920\n  height: 1080\n</code></pre>"},{"location":"specification/browser-v1/common/#browserconfig","title":"BrowserConfig","text":"<p>Complete browser configuration for check execution.</p>"},{"location":"specification/browser-v1/common/#fields_1","title":"Fields","text":"Field Type Required Default Description <code>engine</code> <code>BrowserEngine</code> REQUIRED \u2014 Browser engine to use <code>viewport</code> <code>Viewport</code> REQUIRED \u2014 Viewport dimensions <code>deviceScaleFactor</code> <code>float</code> OPTIONAL <code>1.0</code> Device pixel ratio <code>userAgent</code> <code>string</code> OPTIONAL engine default Custom user agent string <code>locale</code> <code>string</code> OPTIONAL <code>en-US</code> Browser locale (language/region) <code>timezone</code> <code>string</code> OPTIONAL runner default IANA timezone identifier"},{"location":"specification/browser-v1/common/#field-details","title":"Field Details","text":""},{"location":"specification/browser-v1/common/#engine","title":"<code>engine</code>","text":"<ul> <li>Type: <code>BrowserEngine</code></li> <li>Required: REQUIRED</li> <li>Description: Specifies which browser engine to use for execution</li> </ul>"},{"location":"specification/browser-v1/common/#viewport_1","title":"<code>viewport</code>","text":"<ul> <li>Type: <code>Viewport</code></li> <li>Required: REQUIRED</li> <li>Description: Defines the browser window size in pixels</li> </ul>"},{"location":"specification/browser-v1/common/#devicescalefactor","title":"<code>deviceScaleFactor</code>","text":"<ul> <li>Type: <code>float</code></li> <li>Required: OPTIONAL</li> <li>Default: <code>1.0</code></li> <li>Description: Device pixel ratio for mobile/retina emulation</li> <li>Common values:</li> <li><code>1.0</code> - Standard desktop display</li> <li><code>2.0</code> - Retina/HiDPI displays, modern iPhones</li> <li><code>3.0</code> - High-density Android devices</li> <li>Constraints: MUST be &gt; 0, typically between 1.0 and 4.0</li> </ul>"},{"location":"specification/browser-v1/common/#useragent","title":"<code>userAgent</code>","text":"<ul> <li>Type: <code>string</code></li> <li>Required: OPTIONAL</li> <li>Default: Browser engine's default user agent</li> <li>Description: Custom user agent string for browser identification</li> <li>Use cases:</li> <li>Mobile device emulation</li> <li>Testing user-agent specific behavior</li> <li>Bypassing bot detection (controversial)</li> <li>Security: Changing user agent does not provide true anonymity</li> </ul>"},{"location":"specification/browser-v1/common/#locale","title":"<code>locale</code>","text":"<ul> <li>Type: <code>string</code></li> <li>Required: OPTIONAL</li> <li>Default: <code>en-US</code></li> <li>Description: Browser locale in BCP 47 format (e.g., <code>en-US</code>, <code>fr-FR</code>, <code>ja-JP</code>)</li> <li>Affects:</li> <li>Date/time formatting</li> <li>Number formatting</li> <li>Language-specific text rendering</li> <li>Accept-Language HTTP header</li> <li>Format: ISO 639-1 language code + ISO 3166-1 country code</li> </ul>"},{"location":"specification/browser-v1/common/#timezone","title":"<code>timezone</code>","text":"<ul> <li>Type: <code>string</code></li> <li>Required: OPTIONAL</li> <li>Default: Runner's system timezone</li> <li>Description: IANA timezone identifier (e.g., <code>America/New_York</code>, <code>Europe/London</code>, <code>Asia/Tokyo</code>)</li> <li>Affects:</li> <li>JavaScript <code>Date</code> object behavior</li> <li>Timezone-sensitive rendering</li> <li>Scheduled events in web applications</li> <li>Format: IANA Time Zone Database names</li> </ul>"},{"location":"specification/browser-v1/common/#validation-rules","title":"Validation Rules","text":"<ol> <li>Extra fields forbidden: Additional fields beyond those defined MUST NOT be present</li> <li>Engine support: Runner MUST validate engine is supported before execution</li> <li>Viewport range: Both width and height MUST be positive integers</li> <li>Locale format: If provided, locale SHOULD be valid BCP 47 format</li> <li>Timezone format: If provided, timezone SHOULD be valid IANA identifier</li> </ol>"},{"location":"specification/browser-v1/common/#example_1","title":"Example","text":"<pre><code>browser:\n  engine: chromium\n  viewport:\n    width: 1920\n    height: 1080\n  deviceScaleFactor: 1.0\n  userAgent: \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36\"\n  locale: en-US\n  timezone: America/Los_Angeles\n</code></pre>"},{"location":"specification/browser-v1/common/#design-rationale","title":"Design Rationale","text":""},{"location":"specification/browser-v1/common/#why-separate-browserconfig","title":"Why Separate BrowserConfig?","text":"<ol> <li>Reusability: Same browser configuration shared across LoadCheck and ScriptedCheck</li> <li>Consistency: Ensures uniform browser behavior across check types</li> <li>Testability: Standardized configuration makes check behavior predictable</li> <li>Mobile Emulation: Viewport + deviceScaleFactor + userAgent enable mobile testing</li> </ol>"},{"location":"specification/browser-v1/common/#why-required-viewport","title":"Why Required Viewport?","text":"<p>Unlike real browser usage, synthetic checks require deterministic, repeatable behavior: - Responsive designs change based on viewport size - Element visibility depends on viewport dimensions - Performance metrics vary by viewport (larger = more rendering work) - Requiring explicit viewport prevents non-deterministic behavior</p>"},{"location":"specification/browser-v1/common/#timezone-and-locale","title":"Timezone and Locale","text":"<p>Web applications often have timezone and locale-specific behavior: - E-commerce sites show region-specific pricing - Booking systems display times in user timezone - Content sites show localized text - Explicit configuration ensures checks validate correct behavior</p>"},{"location":"specification/browser-v1/common/#common-use-cases","title":"Common Use Cases","text":""},{"location":"specification/browser-v1/common/#desktop-browser-testing","title":"Desktop Browser Testing","text":"<pre><code>browser:\n  engine: chromium\n  viewport:\n    width: 1920\n    height: 1080\n  deviceScaleFactor: 1.0\n</code></pre>"},{"location":"specification/browser-v1/common/#mobile-device-emulation-iphone-14","title":"Mobile Device Emulation (iPhone 14)","text":"<pre><code>browser:\n  engine: webkit\n  viewport:\n    width: 390\n    height: 844\n  deviceScaleFactor: 3.0\n  userAgent: \"Mozilla/5.0 (iPhone; CPU iPhone OS 16_0 like Mac OS X)\"\n</code></pre>"},{"location":"specification/browser-v1/common/#mobile-device-emulation-android","title":"Mobile Device Emulation (Android)","text":"<pre><code>browser:\n  engine: chromium\n  viewport:\n    width: 360\n    height: 640\n  deviceScaleFactor: 2.0\n  userAgent: \"Mozilla/5.0 (Linux; Android 13) AppleWebKit/537.36\"\n</code></pre>"},{"location":"specification/browser-v1/common/#tablet-testing-ipad","title":"Tablet Testing (iPad)","text":"<pre><code>browser:\n  engine: webkit\n  viewport:\n    width: 768\n    height: 1024\n  deviceScaleFactor: 2.0\n</code></pre>"},{"location":"specification/browser-v1/common/#cross-browser-testing","title":"Cross-Browser Testing","text":"<p>Execute same check with different engines:</p> <pre><code># Chromium variant\nbrowser:\n  engine: chromium\n  viewport:\n    width: 1366\n    height: 768\n</code></pre> <pre><code># Firefox variant\nbrowser:\n  engine: firefox\n  viewport:\n    width: 1366\n    height: 768\n</code></pre> <pre><code># WebKit variant\nbrowser:\n  engine: webkit\n  viewport:\n    width: 1366\n    height: 768\n</code></pre>"},{"location":"specification/browser-v1/common/#localized-testing","title":"Localized Testing","text":"<pre><code>browser:\n  engine: chromium\n  viewport:\n    width: 1920\n    height: 1080\n  locale: ja-JP\n  timezone: Asia/Tokyo\n</code></pre>"},{"location":"specification/browser-v1/common/#security-considerations","title":"Security Considerations","text":""},{"location":"specification/browser-v1/common/#user-agent-spoofing","title":"User Agent Spoofing","text":"<p>Changing <code>userAgent</code> allows impersonating different browsers: - Legitimate use: Testing responsive behavior, mobile emulation - Problematic use: Bypassing user-agent based security controls - Recommendation: Document why custom user agents are used</p>"},{"location":"specification/browser-v1/common/#bot-detection","title":"Bot Detection","text":"<p>Some websites use browser fingerprinting to detect automation: - Changing user agent alone is insufficient to bypass detection - Browsers launched via automation have detectable characteristics - Consider using stealth mode or authenticated sessions for monitoring production sites</p>"},{"location":"specification/browser-v1/common/#data-privacy","title":"Data Privacy","text":"<p>Browser checks may: - Store cookies and local storage - Execute third-party scripts - Transmit data to external services</p> <p>Ensure compliance with data privacy regulations (GDPR, CCPA) when monitoring production sites.</p>"},{"location":"specification/browser-v1/common/#conformance","title":"Conformance","text":"<p>Implementations claiming support for <code>browser/v1</code> common types MUST: 1. Support the <code>BrowserConfig</code> structure exactly as defined 2. Forbid extra fields (strict validation) 3. Support at least one <code>BrowserEngine</code> value 4. Honor <code>viewport</code> settings precisely 5. Apply <code>deviceScaleFactor</code> if provided 6. Apply <code>userAgent</code>, <code>locale</code>, and <code>timezone</code> if provided 7. Return clear errors for unsupported engines or invalid configurations</p> <p>Implementations MAY: - Support additional browser engines via custom values - Provide defaults for optional fields - Add validation warnings for unusual configurations</p>"},{"location":"specification/browser-v1/common/#related-documents","title":"Related Documents","text":"<ul> <li>browser/v1/_index.md - Browser check overview</li> <li>browser/v1/load_check.md - LoadCheck specification</li> <li>browser/v1/scripted_check.md - ScriptedCheck specification</li> <li>v1/common.md - Core v1 common types</li> </ul> <p>Status: Stable Last Updated: 2026-02-07</p>"},{"location":"specification/browser-v1/load_check/","title":"LoadCheck Specification","text":"<p>API Version: <code>browser/v1</code> Kind: <code>LoadCheck</code> Status: Stable</p>"},{"location":"specification/browser-v1/load_check/#overview","title":"Overview","text":"<p>LoadCheck validates page load behavior and collects performance metrics using passive browser automation. Unlike ScriptedCheck (active automation), LoadCheck simply loads a URL and validates the resulting page state.</p> <p>Use Cases: - Page load performance monitoring - Core Web Vitals tracking - Uptime monitoring with browser validation - Content availability checks - Frontend performance regression detection</p>"},{"location":"specification/browser-v1/load_check/#table-of-contents","title":"Table of Contents","text":"<ul> <li>Resource Structure</li> <li>LoadCheckSpec</li> <li>CollectionConfig</li> <li>Assertion Types</li> <li>Examples</li> <li>Implementation Notes</li> <li>Security Considerations</li> <li>Conformance</li> </ul>"},{"location":"specification/browser-v1/load_check/#resource-structure","title":"Resource Structure","text":"<pre><code>apiVersion: browser/v1\nkind: LoadCheck\nmetadata:\n  name: check-name\n  title: \"Human-readable title\"\n  labels:\n    key: value\nspec:\n  url: https://example.com\n  browser:\n    engine: chromium\n    viewport:\n      width: 1920\n      height: 1080\n  collect:\n    performance: true\n    webVitals: true\n    resources: false\n  checks:\n    - type: status\n      operator: equals\n      value: 200\n    - type: loadTime\n      operator: lessThan\n      value: 3000\n  interval: 5m\n</code></pre>"},{"location":"specification/browser-v1/load_check/#loadcheckspec","title":"LoadCheckSpec","text":"<p>Specification for passive page load check.</p>"},{"location":"specification/browser-v1/load_check/#fields","title":"Fields","text":"Field Type Required Default Description <code>url</code> <code>URL</code> REQUIRED \u2014 Target URL to load <code>browser</code> <code>BrowserConfig</code> REQUIRED \u2014 Browser configuration <code>collect</code> <code>CollectionConfig</code> OPTIONAL see below Performance data collection <code>checks</code> <code>LoadCheckAssertion[]</code> OPTIONAL <code>[]</code> Assertions to validate <code>interval</code> <code>Time</code> CONDITIONAL \u2014 Scheduling interval (mutually exclusive with <code>cron</code>) <code>cron</code> <code>Crontab</code> CONDITIONAL \u2014 Cron schedule (mutually exclusive with <code>interval</code>) <code>timeout</code> <code>Time</code> OPTIONAL <code>30s</code> Maximum execution time <code>retries</code> <code>integer</code> OPTIONAL <code>1</code> Number of retry attempts <code>locations</code> <code>string[]</code> OPTIONAL <code>[]</code> Execution locations <code>channels</code> <code>NotificationChannel[]</code> OPTIONAL <code>[]</code> Notification destinations"},{"location":"specification/browser-v1/load_check/#field-details","title":"Field Details","text":""},{"location":"specification/browser-v1/load_check/#url","title":"<code>url</code>","text":"<ul> <li>Type: <code>URL</code> (RFC 3986 compliant URL string)</li> <li>Required: REQUIRED</li> <li>Description: Target URL to load in the browser</li> <li>Constraints:</li> <li>MUST use <code>http://</code> or <code>https://</code> scheme</li> <li>MUST be a valid, absolute URL</li> <li>Fragment identifiers (<code>#hash</code>) are allowed</li> <li>Query parameters are allowed</li> <li>Examples:</li> <li><code>https://example.com</code></li> <li><code>https://app.example.com/login</code></li> <li><code>https://shop.example.com/products?category=electronics</code></li> </ul>"},{"location":"specification/browser-v1/load_check/#browser","title":"<code>browser</code>","text":"<ul> <li>Type: <code>BrowserConfig</code></li> <li>Required: REQUIRED</li> <li>Description: Browser engine, viewport, and emulation settings</li> <li>See: common.md#browserconfig for full specification</li> </ul>"},{"location":"specification/browser-v1/load_check/#collect","title":"<code>collect</code>","text":"<ul> <li>Type: <code>CollectionConfig</code></li> <li>Required: OPTIONAL</li> <li>Default: <code>CollectionConfig()</code> with defaults (performance: true, webVitals: true, resources: false)</li> <li>Description: Configures which performance metrics to collect during page load</li> </ul>"},{"location":"specification/browser-v1/load_check/#checks","title":"<code>checks</code>","text":"<ul> <li>Type: Array of <code>LoadCheckAssertion</code></li> <li>Required: OPTIONAL</li> <li>Default: <code>[]</code> (empty array)</li> <li>Description: Assertions to validate against page load results</li> <li>Note: Empty checks array is valid (collect-only mode)</li> </ul>"},{"location":"specification/browser-v1/load_check/#common-fields","title":"Common Fields","text":"<p>LoadCheck inherits common scheduling and execution fields from base <code>CheckSpec</code>: - See v1/check.md for <code>interval</code>, <code>cron</code>, <code>timeout</code>, <code>retries</code>, <code>locations</code>, <code>channels</code></p>"},{"location":"specification/browser-v1/load_check/#collectionconfig","title":"CollectionConfig","text":"<p>Configures performance data collection during page load.</p>"},{"location":"specification/browser-v1/load_check/#fields_1","title":"Fields","text":"Field Type Required Default Description <code>performance</code> <code>boolean</code> OPTIONAL <code>true</code> Collect Navigation Timing API metrics <code>webVitals</code> <code>boolean</code> OPTIONAL <code>true</code> Collect Core Web Vitals (LCP, FID, CLS) <code>resources</code> <code>boolean</code> OPTIONAL <code>false</code> Collect individual resource timing data"},{"location":"specification/browser-v1/load_check/#field-details_1","title":"Field Details","text":""},{"location":"specification/browser-v1/load_check/#performance","title":"<code>performance</code>","text":"<ul> <li>Type: <code>boolean</code></li> <li>Default: <code>true</code></li> <li>Description: Collect Navigation Timing API metrics</li> <li>Metrics collected (implementation-specific):</li> <li>DNS lookup time</li> <li>TCP connection time</li> <li>TLS handshake time</li> <li>Time to first byte (TTFB)</li> <li>DOM content loaded time</li> <li>Page load complete time</li> <li>Total page size</li> <li>Standard: W3C Navigation Timing Level 2</li> </ul>"},{"location":"specification/browser-v1/load_check/#webvitals","title":"<code>webVitals</code>","text":"<ul> <li>Type: <code>boolean</code></li> <li>Default: <code>true</code></li> <li>Description: Collect Core Web Vitals metrics</li> <li>Metrics collected (implementation-specific):</li> <li>LCP (Largest Contentful Paint) - Loading performance</li> <li>FID (First Input Delay) - Interactivity (replaced by INP in 2024)</li> <li>CLS (Cumulative Layout Shift) - Visual stability</li> <li>INP (Interaction to Next Paint) - Responsiveness</li> <li>TTFB (Time to First Byte) - Server response time</li> <li>FCP (First Contentful Paint) - Initial rendering</li> <li>Standard: Web Vitals Initiative</li> <li>Note: Implementations SHOULD collect metrics using web-vitals library or equivalent</li> </ul>"},{"location":"specification/browser-v1/load_check/#resources","title":"<code>resources</code>","text":"<ul> <li>Type: <code>boolean</code></li> <li>Default: <code>false</code></li> <li>Description: Collect detailed timing for each resource (scripts, stylesheets, images, etc.)</li> <li>Warning: Enabling this can generate large amounts of data</li> <li>Use cases:</li> <li>Identifying slow third-party scripts</li> <li>Analyzing resource waterfall</li> <li>Debugging performance issues</li> <li>Standard: Resource Timing Level 2</li> </ul>"},{"location":"specification/browser-v1/load_check/#semantics","title":"Semantics","text":"<ul> <li>Setting all flags to <code>false</code> is valid but provides minimal observability</li> <li>Metrics are collected but not automatically asserted against</li> <li>Assertions use <code>checks</code> field to validate performance thresholds</li> <li>Collection happens regardless of assertion pass/fail</li> <li>Resource collection can significantly increase result payload size</li> </ul>"},{"location":"specification/browser-v1/load_check/#example","title":"Example","text":"<pre><code>collect:\n  performance: true   # Collect navigation timing\n  webVitals: true     # Collect Core Web Vitals\n  resources: false    # Skip individual resource timing\n</code></pre>"},{"location":"specification/browser-v1/load_check/#assertion-types","title":"Assertion Types","text":"<p>LoadCheck supports four assertion types for validating page load results.</p> <p>All assertions extend base assertion types defined in v1/common.md.</p>"},{"location":"specification/browser-v1/load_check/#statusassertion","title":"StatusAssertion","text":"<p>Assert on HTTP response status code.</p> <p>Extends: <code>NumericAssertion</code></p>"},{"location":"specification/browser-v1/load_check/#fields_2","title":"Fields","text":"Field Type Required Description <code>type</code> <code>\"status\"</code> REQUIRED Assertion type discriminator <code>operator</code> <code>NumericOperator</code> REQUIRED Comparison operator <code>value</code> <code>integer</code> REQUIRED Expected status code"},{"location":"specification/browser-v1/load_check/#supported-operators","title":"Supported Operators","text":"<ul> <li><code>equals</code> - Exact match</li> <li><code>notEquals</code> - Not equal</li> <li><code>greaterThan</code> - Greater than</li> <li><code>greaterThanOrEquals</code> - Greater than or equal</li> <li><code>lessThan</code> - Less than</li> <li><code>lessThanOrEquals</code> - Less than or equal</li> </ul>"},{"location":"specification/browser-v1/load_check/#semantics_1","title":"Semantics","text":"<ul> <li>Validates the HTTP status code of the initial page load response</li> <li>Does not validate redirect intermediate status codes (only final response)</li> <li>Most common: <code>operator: equals, value: 200</code></li> </ul>"},{"location":"specification/browser-v1/load_check/#examples","title":"Examples","text":"<pre><code># Exact status code match\n- type: status\n  operator: equals\n  value: 200\n\n# Success range (2xx)\n- type: status\n  operator: greaterThanOrEquals\n  value: 200\n- type: status\n  operator: lessThan\n  value: 300\n\n# Not an error\n- type: status\n  operator: lessThan\n  value: 400\n</code></pre>"},{"location":"specification/browser-v1/load_check/#loadtimeassertion","title":"LoadTimeAssertion","text":"<p>Assert on total page load time in milliseconds.</p> <p>Extends: <code>NumericAssertion</code></p>"},{"location":"specification/browser-v1/load_check/#fields_3","title":"Fields","text":"Field Type Required Description <code>type</code> <code>\"loadTime\"</code> REQUIRED Assertion type discriminator <code>operator</code> <code>NumericOperator</code> REQUIRED Comparison operator <code>value</code> <code>integer</code> REQUIRED Time threshold in milliseconds"},{"location":"specification/browser-v1/load_check/#supported-operators_1","title":"Supported Operators","text":"<ul> <li><code>equals</code> - Exact match (rarely useful)</li> <li><code>notEquals</code> - Not equal (rarely useful)</li> <li><code>greaterThan</code> - Greater than</li> <li><code>greaterThanOrEquals</code> - Greater than or equal</li> <li><code>lessThan</code> - Less than (most common)</li> <li><code>lessThanOrEquals</code> - Less than or equal</li> </ul>"},{"location":"specification/browser-v1/load_check/#semantics_2","title":"Semantics","text":"<ul> <li>Measures time from navigation start to <code>load</code> event completion</li> <li>Includes all network requests, rendering, and script execution</li> <li>Corresponds to <code>loadEventEnd - navigationStart</code> in Navigation Timing API</li> <li>Values are in milliseconds (not seconds)</li> </ul>"},{"location":"specification/browser-v1/load_check/#performance-guidance","title":"Performance Guidance","text":"Load Time Classification User Experience &lt; 1000ms Excellent Near-instantaneous 1000-3000ms Good Acceptable for most users 3000-5000ms Fair Noticeable delay &gt; 5000ms Poor Users likely to abandon"},{"location":"specification/browser-v1/load_check/#examples_1","title":"Examples","text":"<pre><code># Load within 3 seconds\n- type: loadTime\n  operator: lessThan\n  value: 3000\n\n# Load within 5 seconds\n- type: loadTime\n  operator: lessThanOrEquals\n  value: 5000\n</code></pre>"},{"location":"specification/browser-v1/load_check/#elementpresentassertion","title":"ElementPresentAssertion","text":"<p>Assert on element presence in the DOM.</p> <p>Extends: <code>BooleanAssertion</code></p>"},{"location":"specification/browser-v1/load_check/#fields_4","title":"Fields","text":"Field Type Required Description <code>type</code> <code>\"elementPresent\"</code> REQUIRED Assertion type discriminator <code>selector</code> <code>string</code> REQUIRED CSS selector for element <code>operator</code> <code>BooleanOperator</code> REQUIRED Comparison operator <code>value</code> <code>boolean</code> REQUIRED Expected presence state"},{"location":"specification/browser-v1/load_check/#supported-operators_2","title":"Supported Operators","text":"<ul> <li><code>equals</code> - Element presence matches expected value</li> <li><code>is</code> - Alias for <code>equals</code></li> </ul>"},{"location":"specification/browser-v1/load_check/#semantics_3","title":"Semantics","text":"<ul> <li>Checks whether element exists in DOM (not whether it's visible)</li> <li>Uses CSS selector syntax (same as <code>document.querySelector()</code>)</li> <li>Element found \u2192 <code>true</code>, element not found \u2192 <code>false</code></li> <li>Does NOT wait for element (evaluated after page load complete)</li> <li>Visibility is not checked (use ScriptedCheck's <code>elementVisible</code> for that)</li> </ul>"},{"location":"specification/browser-v1/load_check/#selector-syntax","title":"Selector Syntax","text":"<p>Supports full CSS selector syntax: - Tag: <code>div</code>, <code>h1</code>, <code>button</code> - ID: <code>#header</code>, <code>#login-form</code> - Class: <code>.nav-item</code>, <code>.btn-primary</code> - Attribute: <code>[data-test=\"submit\"]</code>, <code>[aria-label=\"Close\"]</code> - Combinators: <code>nav &gt; ul &gt; li</code>, <code>.container .card</code> - Pseudo-classes: <code>:first-child</code>, <code>:nth-of-type(2)</code></p>"},{"location":"specification/browser-v1/load_check/#examples_2","title":"Examples","text":"<pre><code># Element should be present\n- type: elementPresent\n  selector: \"h1\"\n  operator: equals\n  value: true\n\n# Element should NOT be present\n- type: elementPresent\n  selector: \".error-banner\"\n  operator: equals\n  value: false\n\n# Specific element by ID\n- type: elementPresent\n  selector: \"#checkout-button\"\n  operator: is\n  value: true\n\n# Data attribute selector\n- type: elementPresent\n  selector: \"[data-test='success-message']\"\n  operator: equals\n  value: true\n</code></pre>"},{"location":"specification/browser-v1/load_check/#textcontainsassertion","title":"TextContainsAssertion","text":"<p>Assert on page text content.</p> <p>Extends: <code>StringAssertion</code></p>"},{"location":"specification/browser-v1/load_check/#fields_5","title":"Fields","text":"Field Type Required Description <code>type</code> <code>\"textContains\"</code> REQUIRED Assertion type discriminator <code>operator</code> <code>StringOperator</code> REQUIRED Comparison operator <code>value</code> <code>string</code> REQUIRED Text to search for or match"},{"location":"specification/browser-v1/load_check/#supported-operators_3","title":"Supported Operators","text":"<ul> <li><code>equals</code> - Exact match (case-sensitive)</li> <li><code>notEquals</code> - Not equal</li> <li><code>contains</code> - Contains substring (case-sensitive, most common)</li> <li><code>notContains</code> - Does not contain substring</li> <li><code>startsWith</code> - Starts with prefix</li> <li><code>endsWith</code> - Ends with suffix</li> <li><code>matches</code> - Regular expression match</li> </ul>"},{"location":"specification/browser-v1/load_check/#semantics_4","title":"Semantics","text":"<ul> <li>Searches full page text content (all visible text)</li> <li>Uses <code>document.body.innerText</code> or equivalent</li> <li>Case-sensitive by default</li> <li>Does NOT search HTML source (only rendered text)</li> <li>Does NOT search hidden elements</li> </ul>"},{"location":"specification/browser-v1/load_check/#examples_3","title":"Examples","text":"<pre><code># Page contains specific text\n- type: textContains\n  operator: contains\n  value: \"Welcome to our site\"\n\n# Page does NOT contain error message\n- type: textContains\n  operator: notContains\n  value: \"Error:\"\n\n# Exact title match\n- type: textContains\n  operator: equals\n  value: \"Example Domain\"\n\n# Regex match for dynamic content\n- type: textContains\n  operator: matches\n  value: \"Order #[0-9]{6} confirmed\"\n</code></pre>"},{"location":"specification/browser-v1/load_check/#complete-examples","title":"Complete Examples","text":""},{"location":"specification/browser-v1/load_check/#example-1-basic-page-load-check","title":"Example 1: Basic Page Load Check","text":"<pre><code>apiVersion: browser/v1\nkind: LoadCheck\nmetadata:\n  name: homepage-load\n  title: \"Homepage Load Performance\"\nspec:\n  url: https://example.com\n\n  browser:\n    engine: chromium\n    viewport:\n      width: 1920\n      height: 1080\n\n  checks:\n    - type: status\n      operator: equals\n      value: 200\n\n    - type: loadTime\n      operator: lessThan\n      value: 3000\n\n    - type: elementPresent\n      selector: \"h1\"\n      operator: equals\n      value: true\n\n  interval: 5m\n</code></pre>"},{"location":"specification/browser-v1/load_check/#example-2-performance-monitoring-with-web-vitals","title":"Example 2: Performance Monitoring with Web Vitals","text":"<pre><code>apiVersion: browser/v1\nkind: LoadCheck\nmetadata:\n  name: app-performance\n  title: \"Application Performance Monitoring\"\n  labels:\n    team: frontend\n    criticality: high\nspec:\n  url: https://app.example.com/dashboard\n\n  browser:\n    engine: chromium\n    viewport:\n      width: 1366\n      height: 768\n    locale: en-US\n    timezone: America/New_York\n\n  collect:\n    performance: true\n    webVitals: true\n    resources: false\n\n  checks:\n    - type: status\n      operator: equals\n      value: 200\n\n    - type: loadTime\n      operator: lessThan\n      value: 2000\n\n    - type: textContains\n      operator: contains\n      value: \"Dashboard\"\n\n  interval: 3m\n  timeout: 30s\n  retries: 2\n  locations:\n    - us-east-1\n    - eu-west-1\n</code></pre>"},{"location":"specification/browser-v1/load_check/#example-3-mobile-performance-check","title":"Example 3: Mobile Performance Check","text":"<pre><code>apiVersion: browser/v1\nkind: LoadCheck\nmetadata:\n  name: mobile-performance\n  title: \"Mobile Page Performance (iPhone)\"\nspec:\n  url: https://m.example.com\n\n  browser:\n    engine: webkit\n    viewport:\n      width: 390\n      height: 844\n    deviceScaleFactor: 3.0\n    userAgent: \"Mozilla/5.0 (iPhone; CPU iPhone OS 16_0 like Mac OS X)\"\n\n  collect:\n    performance: true\n    webVitals: true\n    resources: true  # Collect detailed resource timing\n\n  checks:\n    - type: status\n      operator: equals\n      value: 200\n\n    - type: loadTime\n      operator: lessThan\n      value: 5000  # Mobile networks are slower\n\n    - type: elementPresent\n      selector: \".mobile-nav\"\n      operator: equals\n      value: true\n\n  interval: 10m\n</code></pre>"},{"location":"specification/browser-v1/load_check/#example-4-content-availability-check","title":"Example 4: Content Availability Check","text":"<pre><code>apiVersion: browser/v1\nkind: LoadCheck\nmetadata:\n  name: product-page-check\n  title: \"Product Page Content Validation\"\nspec:\n  url: https://shop.example.com/products/widget\n\n  browser:\n    engine: chromium\n    viewport:\n      width: 1920\n      height: 1080\n\n  collect:\n    performance: false\n    webVitals: false\n    resources: false\n\n  checks:\n    - type: status\n      operator: equals\n      value: 200\n\n    - type: elementPresent\n      selector: \".product-title\"\n      operator: equals\n      value: true\n\n    - type: elementPresent\n      selector: \".price\"\n      operator: equals\n      value: true\n\n    - type: elementPresent\n      selector: \".add-to-cart\"\n      operator: equals\n      value: true\n\n    - type: textContains\n      operator: contains\n      value: \"In Stock\"\n\n    - type: textContains\n      operator: notContains\n      value: \"Out of Stock\"\n\n  interval: 5m\n</code></pre>"},{"location":"specification/browser-v1/load_check/#example-5-multi-region-performance","title":"Example 5: Multi-Region Performance","text":"<pre><code>apiVersion: browser/v1\nkind: LoadCheck\nmetadata:\n  name: global-performance\n  title: \"Global CDN Performance Check\"\n  labels:\n    environment: production\nspec:\n  url: https://cdn.example.com/landing\n\n  browser:\n    engine: chromium\n    viewport:\n      width: 1920\n      height: 1080\n\n  collect:\n    performance: true\n    webVitals: true\n    resources: false\n\n  checks:\n    - type: status\n      operator: equals\n      value: 200\n\n    - type: loadTime\n      operator: lessThan\n      value: 2000\n\n  interval: 5m\n  locations:\n    - us-east-1\n    - us-west-2\n    - eu-west-1\n    - eu-central-1\n    - ap-southeast-1\n    - ap-northeast-1\n\n  channels:\n    - channel: slack-cdn-alerts\n      severity: High\n</code></pre>"},{"location":"specification/browser-v1/load_check/#implementation-notes","title":"Implementation Notes","text":""},{"location":"specification/browser-v1/load_check/#browser-automation-library","title":"Browser Automation Library","text":"<p>The browser automation library/orchestrator used is implementation-specific. This specification does not prescribe Playwright, Puppeteer, Selenium, or any other specific library.</p> <p>Implementations MUST: - Document which automation libraries are supported - Provide code examples for their chosen orchestrator(s) - Clearly document API surface provided to users (if extensible)</p>"},{"location":"specification/browser-v1/load_check/#page-load-semantics","title":"Page Load Semantics","text":"<p>LoadCheck follows standard browser page load behavior:</p> <ol> <li>Navigation: Navigate to <code>url</code> using chosen orchestrator</li> <li>Network: Complete all network requests</li> <li>Parsing: Parse HTML, CSS, JavaScript</li> <li>Execution: Execute scripts</li> <li>Rendering: Render page</li> <li>Load Event: Fire <code>window.onload</code> event</li> <li>Collection: Collect performance metrics</li> <li>Assertion: Evaluate all <code>checks</code></li> </ol>"},{"location":"specification/browser-v1/load_check/#timing-measurement","title":"Timing Measurement","text":"<p>Load Time measurement using standard browser APIs:</p> <pre><code>// Navigation Timing API\nconst loadTime = performance.timing.loadEventEnd - performance.timing.navigationStart;\n\n// Or using Performance Timeline API\nconst [navigation] = performance.getEntriesByType('navigation');\nconst loadTime = navigation.loadEventEnd;\n</code></pre> <p>Implementations MAY use orchestrator-specific APIs if they provide equivalent measurements.</p>"},{"location":"specification/browser-v1/load_check/#performance-collection","title":"Performance Collection","text":"<p>Implementations SHOULD collect metrics using standard browser APIs: - Navigation Timing API: <code>performance.timing</code> or <code>performance.getEntriesByType('navigation')</code> - Resource Timing API: <code>performance.getEntriesByType('resource')</code> - Web Vitals: <code>web-vitals</code> library or equivalent</p> <p>Orchestrator-specific APIs are acceptable if they provide equivalent data.</p>"},{"location":"specification/browser-v1/load_check/#element-selectors","title":"Element Selectors","text":"<p>Element presence checked using CSS selectors: <pre><code>const element = document.querySelector(selector);\nconst isPresent = element !== null;\n</code></pre></p>"},{"location":"specification/browser-v1/load_check/#text-content","title":"Text Content","text":"<p>Text content extraction: <pre><code>const text = document.body.innerText; // or textContent\n</code></pre></p>"},{"location":"specification/browser-v1/load_check/#browser-context-isolation","title":"Browser Context Isolation","text":"<p>Each check execution SHOULD use a fresh browser context: - No cookies from previous runs - No local storage or session storage - No service workers - Clean cache (unless explicitly configured otherwise)</p> <p>This ensures deterministic, repeatable behavior across all orchestrator implementations.</p>"},{"location":"specification/browser-v1/load_check/#security-considerations","title":"Security Considerations","text":""},{"location":"specification/browser-v1/load_check/#third-party-content","title":"Third-Party Content","text":"<p>Loading pages executes third-party scripts: - Scripts can make external requests - Scripts can set cookies - Scripts can fingerprint the browser</p> <p>Mitigation: Run checks in isolated browser contexts, rotate user agents if needed.</p>"},{"location":"specification/browser-v1/load_check/#authentication","title":"Authentication","text":"<p>LoadCheck does NOT support authenticated checks out of the box: - No cookie injection - No HTTP authentication - No programmatic login</p> <p>Workaround: Use ScriptedCheck for authenticated workflows.</p>"},{"location":"specification/browser-v1/load_check/#data-privacy","title":"Data Privacy","text":"<p>Collecting performance metrics may include: - Full URL with query parameters (may contain PII) - Resource URLs (third-party tracking scripts) - Text content (may contain sensitive data)</p> <p>Recommendation: Ensure compliance with data privacy regulations (GDPR, CCPA).</p>"},{"location":"specification/browser-v1/load_check/#conformance","title":"Conformance","text":"<p>Implementations claiming support for <code>LoadCheck</code> MUST:</p> <ol> <li>Load URL: Navigate to specified URL in configured browser</li> <li>Wait for Load: Wait for <code>window.onload</code> event</li> <li>Collect Metrics: Collect performance data based on <code>collect</code> configuration</li> <li>Evaluate Assertions: Evaluate all <code>checks</code> assertions</li> <li>Report Results: Return pass/fail status and collected metrics</li> <li>Honor Browser Config: Apply all <code>BrowserConfig</code> settings</li> <li>Timeout Handling: Abort check if <code>timeout</code> is exceeded</li> <li>Retry Logic: Retry failed checks up to <code>retries</code> count</li> </ol> <p>Implementations MAY: - Collect additional metrics beyond those specified - Provide screenshot capture on failure - Support custom collection configuration - Cache browser instances for performance</p>"},{"location":"specification/browser-v1/load_check/#related-documents","title":"Related Documents","text":"<ul> <li>browser/v1/_index.md - Browser check overview</li> <li>browser/v1/common.md - BrowserConfig, BrowserEngine, Viewport</li> <li>browser/v1/scripted_check.md - ScriptedCheck (active automation)</li> <li>v1/common.md - Core v1 common types</li> <li>v1/check.md - Base Check resource</li> </ul> <p>Status: Stable Last Updated: 2026-02-07</p>"},{"location":"specification/browser-v1/scripted_check/","title":"ScriptedCheck Specification","text":"<p>API Version: <code>browser/v1</code> Kind: <code>ScriptedCheck</code> Status: Stable</p>"},{"location":"specification/browser-v1/scripted_check/#overview","title":"Overview","text":"<p>ScriptedCheck executes custom browser automation scripts to validate complex user workflows and application behavior. Unlike LoadCheck (passive monitoring), ScriptedCheck actively interacts with the page using programmatic scripts.</p> <p>Use Cases: - Multi-step user workflows (login, checkout, form submission) - Interactive application testing - Custom validation logic - Stateful monitoring (sessions, shopping carts) - Complex assertions requiring DOM manipulation - Cross-page navigation flows</p>"},{"location":"specification/browser-v1/scripted_check/#table-of-contents","title":"Table of Contents","text":"<ul> <li>Resource Structure</li> <li>ScriptedCheckSpec</li> <li>ScriptConfig</li> <li>ScriptLanguage</li> <li>ScriptSource</li> <li>Assertion Types</li> <li>Script Execution Model</li> <li>Examples</li> <li>Implementation Notes</li> <li>Security Considerations</li> <li>Conformance</li> </ul>"},{"location":"specification/browser-v1/scripted_check/#resource-structure","title":"Resource Structure","text":"<pre><code>apiVersion: browser/v1\nkind: ScriptedCheck\nmetadata:\n  name: check-name\n  title: \"Human-readable title\"\n  labels:\n    key: value\nspec:\n  url: https://example.com\n  browser:\n    engine: chromium\n    viewport:\n      width: 1920\n      height: 1080\n  script:\n    language: javascript\n    entrypoint: myFunction\n    source:\n      inline: |\n        async function myFunction(page, context) {\n          // Custom automation logic\n          await page.click('#button');\n        }\n  checks:\n    - type: elementPresent\n      selector: \"#result\"\n      operator: equals\n      value: true\n  interval: 5m\n</code></pre>"},{"location":"specification/browser-v1/scripted_check/#scriptedcheckspec","title":"ScriptedCheckSpec","text":"<p>Specification for scripted browser check.</p>"},{"location":"specification/browser-v1/scripted_check/#fields","title":"Fields","text":"Field Type Required Default Description <code>url</code> <code>URL</code> REQUIRED \u2014 Initial page URL to load <code>browser</code> <code>BrowserConfig</code> REQUIRED \u2014 Browser configuration <code>script</code> <code>ScriptConfig</code> REQUIRED \u2014 Script execution configuration <code>checks</code> <code>ScriptedCheckAssertion[]</code> OPTIONAL <code>[]</code> Assertions to validate <code>interval</code> <code>Time</code> CONDITIONAL \u2014 Scheduling interval (mutually exclusive with <code>cron</code>) <code>cron</code> <code>Crontab</code> CONDITIONAL \u2014 Cron schedule (mutually exclusive with <code>interval</code>) <code>timeout</code> <code>Time</code> OPTIONAL <code>60s</code> Maximum execution time <code>retries</code> <code>integer</code> OPTIONAL <code>1</code> Number of retry attempts <code>locations</code> <code>string[]</code> OPTIONAL <code>[]</code> Execution locations <code>channels</code> <code>NotificationChannel[]</code> OPTIONAL <code>[]</code> Notification destinations"},{"location":"specification/browser-v1/scripted_check/#field-details","title":"Field Details","text":""},{"location":"specification/browser-v1/scripted_check/#url","title":"<code>url</code>","text":"<ul> <li>Type: <code>URL</code> (RFC 3986 compliant URL string)</li> <li>Required: REQUIRED</li> <li>Description: Initial page to load before script execution</li> <li>Constraints:</li> <li>MUST use <code>http://</code> or <code>https://</code> scheme</li> <li>MUST be a valid, absolute URL</li> <li>Note: Script can navigate to other pages after initial load</li> </ul>"},{"location":"specification/browser-v1/scripted_check/#browser","title":"<code>browser</code>","text":"<ul> <li>Type: <code>BrowserConfig</code></li> <li>Required: REQUIRED</li> <li>Description: Browser engine, viewport, and emulation settings</li> <li>See: common.md#browserconfig for full specification</li> </ul>"},{"location":"specification/browser-v1/scripted_check/#script","title":"<code>script</code>","text":"<ul> <li>Type: <code>ScriptConfig</code></li> <li>Required: REQUIRED</li> <li>Description: Script language, entrypoint function, and source code</li> </ul>"},{"location":"specification/browser-v1/scripted_check/#checks","title":"<code>checks</code>","text":"<ul> <li>Type: Array of <code>ScriptedCheckAssertion</code></li> <li>Required: OPTIONAL</li> <li>Default: <code>[]</code> (empty array)</li> <li>Description: Assertions to validate after script execution</li> <li>Note: Script can throw errors independently of assertions</li> </ul>"},{"location":"specification/browser-v1/scripted_check/#common-fields","title":"Common Fields","text":"<p>ScriptedCheck inherits common scheduling and execution fields from base <code>CheckSpec</code>: - See v1/check.md for <code>interval</code>, <code>cron</code>, <code>timeout</code>, <code>retries</code>, <code>locations</code>, <code>channels</code></p>"},{"location":"specification/browser-v1/scripted_check/#scriptconfig","title":"ScriptConfig","text":"<p>Script execution configuration.</p>"},{"location":"specification/browser-v1/scripted_check/#fields_1","title":"Fields","text":"Field Type Required Description <code>language</code> <code>ScriptLanguage</code> REQUIRED Script programming language <code>entrypoint</code> <code>string</code> REQUIRED Function name to execute <code>source</code> <code>ScriptSource</code> REQUIRED Script source code (inline or file)"},{"location":"specification/browser-v1/scripted_check/#field-details_1","title":"Field Details","text":""},{"location":"specification/browser-v1/scripted_check/#language","title":"<code>language</code>","text":"<ul> <li>Type: <code>ScriptLanguage</code></li> <li>Required: REQUIRED</li> <li>Description: Programming language of the script</li> <li>Supported values: <code>javascript</code>, <code>typescript</code>, <code>python</code></li> </ul>"},{"location":"specification/browser-v1/scripted_check/#entrypoint","title":"<code>entrypoint</code>","text":"<ul> <li>Type: <code>string</code></li> <li>Required: REQUIRED</li> <li>Description: Name of the function to execute</li> <li>Constraints:</li> <li>MUST be a valid function name in the specified language</li> <li>MUST exist in the script source</li> <li>Function MUST be async (JavaScript/TypeScript) or coroutine (Python)</li> <li>Examples: <code>validateLogin</code>, <code>testCheckoutFlow</code>, <code>run</code></li> </ul>"},{"location":"specification/browser-v1/scripted_check/#source","title":"<code>source</code>","text":"<ul> <li>Type: <code>ScriptSource</code></li> <li>Required: REQUIRED</li> <li>Description: Script source code configuration</li> <li>Validation: Exactly one of <code>inline</code> or <code>file</code> MUST be provided</li> </ul>"},{"location":"specification/browser-v1/scripted_check/#scriptlanguage","title":"ScriptLanguage","text":"<p>Supported script programming languages.</p>"},{"location":"specification/browser-v1/scripted_check/#values","title":"Values","text":"Language Description Runtime Async Support <code>javascript</code> JavaScript (ES2020+) Node.js or browser <code>async/await</code> <code>typescript</code> TypeScript (transpiled) Node.js (compiled to JS) <code>async/await</code> <code>python</code> Python 3.11+ CPython <code>async/await</code>"},{"location":"specification/browser-v1/scripted_check/#semantics","title":"Semantics","text":"<ul> <li>JavaScript: Native browser runtime, fastest execution, widest compatibility</li> <li>TypeScript: Type safety, compiled to JavaScript before execution</li> <li>Python: Playwright Python bindings, familiar to QA/DevOps teams</li> </ul>"},{"location":"specification/browser-v1/scripted_check/#implementation-requirements","title":"Implementation Requirements","text":"<p>Runners claiming support for ScriptedCheck MUST support at least one language. Runners SHOULD document which languages are supported.</p>"},{"location":"specification/browser-v1/scripted_check/#scriptsource","title":"ScriptSource","text":"<p>Script source code configuration.</p>"},{"location":"specification/browser-v1/scripted_check/#fields_2","title":"Fields","text":"Field Type Required Description <code>inline</code> <code>string</code> CONDITIONAL Inline script source code <code>file</code> <code>string</code> CONDITIONAL Path to external script file"},{"location":"specification/browser-v1/scripted_check/#validation-rules","title":"Validation Rules","text":"<p>Mutual Exclusion: Exactly one of <code>inline</code> or <code>file</code> MUST be provided.</p> <ul> <li>If both are provided \u2192 Validation error</li> <li>If neither is provided \u2192 Validation error</li> </ul>"},{"location":"specification/browser-v1/scripted_check/#field-details_2","title":"Field Details","text":""},{"location":"specification/browser-v1/scripted_check/#inline","title":"<code>inline</code>","text":"<ul> <li>Type: <code>string</code></li> <li>Description: Full script source code embedded in YAML</li> <li>Use cases:</li> <li>Short scripts (&lt; 50 lines)</li> <li>Self-contained checks</li> <li>Quick prototyping</li> <li>Advantages:</li> <li>Single-file configuration</li> <li>Easy to version control</li> <li>Portable across environments</li> <li>Disadvantages:</li> <li>YAML escaping complexity for large scripts</li> <li>No syntax highlighting in YAML</li> <li>Harder to test independently</li> </ul>"},{"location":"specification/browser-v1/scripted_check/#file","title":"<code>file</code>","text":"<ul> <li>Type: <code>string</code></li> <li>Description: File path to external script (absolute or relative)</li> <li>Use cases:</li> <li>Complex scripts (&gt; 50 lines)</li> <li>Shared scripts across multiple checks</li> <li>Scripts with external dependencies</li> <li>Advantages:</li> <li>Full IDE support (syntax highlighting, linting)</li> <li>Easier to test and debug</li> <li>Better for complex logic</li> <li>Disadvantages:</li> <li>Multi-file configuration</li> <li>Path resolution complexity</li> <li>Path resolution:</li> <li>Relative paths resolved from check definition location</li> <li>Absolute paths used as-is</li> <li>Implementation-specific resolution rules</li> </ul>"},{"location":"specification/browser-v1/scripted_check/#assertion-types","title":"Assertion Types","text":"<p>ScriptedCheck supports five assertion types for validating script execution results.</p> <p>All assertions extend base assertion types defined in v1/common.md.</p>"},{"location":"specification/browser-v1/scripted_check/#elementpresentassertion","title":"ElementPresentAssertion","text":"<p>Assert on element presence in the DOM.</p> <p>Extends: <code>BooleanAssertion</code></p>"},{"location":"specification/browser-v1/scripted_check/#fields_3","title":"Fields","text":"Field Type Required Description <code>type</code> <code>\"elementPresent\"</code> REQUIRED Assertion type discriminator <code>selector</code> <code>string</code> REQUIRED CSS selector for element <code>operator</code> <code>BooleanOperator</code> REQUIRED Comparison operator <code>value</code> <code>boolean</code> REQUIRED Expected presence state"},{"location":"specification/browser-v1/scripted_check/#semantics_1","title":"Semantics","text":"<ul> <li>Checks whether element exists in DOM after script execution</li> <li>Does NOT check visibility (use <code>elementVisible</code> for that)</li> <li>Uses CSS selector syntax</li> <li>Evaluated on the page as it exists after script completes</li> </ul>"},{"location":"specification/browser-v1/scripted_check/#examples","title":"Examples","text":"<pre><code># Element should be present after script\n- type: elementPresent\n  selector: \"#success-message\"\n  operator: equals\n  value: true\n\n# Element should be removed by script\n- type: elementPresent\n  selector: \".loading-spinner\"\n  operator: equals\n  value: false\n</code></pre>"},{"location":"specification/browser-v1/scripted_check/#elementvisibleassertion","title":"ElementVisibleAssertion","text":"<p>Assert on element visibility.</p> <p>Extends: <code>BooleanAssertion</code></p>"},{"location":"specification/browser-v1/scripted_check/#fields_4","title":"Fields","text":"Field Type Required Description <code>type</code> <code>\"elementVisible\"</code> REQUIRED Assertion type discriminator <code>selector</code> <code>string</code> REQUIRED CSS selector for element <code>operator</code> <code>BooleanOperator</code> REQUIRED Comparison operator <code>value</code> <code>boolean</code> REQUIRED Expected visibility state"},{"location":"specification/browser-v1/scripted_check/#semantics_2","title":"Semantics","text":"<ul> <li>Checks whether element is visible (not just present in DOM)</li> <li>Visibility criteria:</li> <li>Element has non-zero dimensions</li> <li>Element is not <code>display: none</code></li> <li>Element is not <code>visibility: hidden</code></li> <li>Element is not <code>opacity: 0</code> (implementation-dependent)</li> <li>Element is not obscured by another element (implementation-dependent)</li> <li>More strict than <code>elementPresent</code></li> </ul>"},{"location":"specification/browser-v1/scripted_check/#examples_1","title":"Examples","text":"<pre><code># User menu should be visible after login\n- type: elementVisible\n  selector: \".user-menu\"\n  operator: equals\n  value: true\n\n# Modal should be hidden\n- type: elementVisible\n  selector: \"#modal\"\n  operator: equals\n  value: false\n</code></pre>"},{"location":"specification/browser-v1/scripted_check/#textcontainsassertion","title":"TextContainsAssertion","text":"<p>Assert on page text content.</p> <p>Extends: <code>StringAssertion</code></p>"},{"location":"specification/browser-v1/scripted_check/#fields_5","title":"Fields","text":"Field Type Required Description <code>type</code> <code>\"textContains\"</code> REQUIRED Assertion type discriminator <code>operator</code> <code>StringOperator</code> REQUIRED Comparison operator <code>value</code> <code>string</code> REQUIRED Text to search for or match"},{"location":"specification/browser-v1/scripted_check/#supported-operators","title":"Supported Operators","text":"<ul> <li><code>equals</code> - Exact match (case-sensitive)</li> <li><code>notEquals</code> - Not equal</li> <li><code>contains</code> - Contains substring (most common)</li> <li><code>notContains</code> - Does not contain substring</li> <li><code>startsWith</code> - Starts with prefix</li> <li><code>endsWith</code> - Ends with suffix</li> <li><code>matches</code> - Regular expression match</li> </ul>"},{"location":"specification/browser-v1/scripted_check/#semantics_3","title":"Semantics","text":"<ul> <li>Searches full page text content after script execution</li> <li>Uses <code>document.body.innerText</code> or equivalent</li> <li>Case-sensitive by default</li> <li>Searches visible text only (not HTML source)</li> </ul>"},{"location":"specification/browser-v1/scripted_check/#examples_2","title":"Examples","text":"<pre><code># Welcome message after login\n- type: textContains\n  operator: contains\n  value: \"Welcome back\"\n\n# No error messages\n- type: textContains\n  operator: notContains\n  value: \"Error\"\n\n# Confirmation message\n- type: textContains\n  operator: matches\n  value: \"Order #[0-9]+ confirmed\"\n</code></pre>"},{"location":"specification/browser-v1/scripted_check/#urlmatchesassertion","title":"UrlMatchesAssertion","text":"<p>Assert on current page URL.</p> <p>Extends: <code>StringAssertion</code></p>"},{"location":"specification/browser-v1/scripted_check/#fields_6","title":"Fields","text":"Field Type Required Description <code>type</code> <code>\"urlMatches\"</code> REQUIRED Assertion type discriminator <code>operator</code> <code>StringOperator</code> REQUIRED Comparison operator <code>value</code> <code>string</code> REQUIRED URL pattern to match"},{"location":"specification/browser-v1/scripted_check/#supported-operators_1","title":"Supported Operators","text":"<ul> <li><code>equals</code> - Exact URL match</li> <li><code>notEquals</code> - Not equal</li> <li><code>contains</code> - URL contains substring (most common)</li> <li><code>notContains</code> - URL does not contain substring</li> <li><code>startsWith</code> - URL starts with prefix</li> <li><code>endsWith</code> - URL ends with suffix</li> <li><code>matches</code> - Regular expression match</li> </ul>"},{"location":"specification/browser-v1/scripted_check/#semantics_4","title":"Semantics","text":"<ul> <li>Checks <code>window.location.href</code> after script execution</li> <li>Useful for validating navigation (redirects, form submissions)</li> <li>Full URL including protocol, domain, path, query, and fragment</li> </ul>"},{"location":"specification/browser-v1/scripted_check/#examples_3","title":"Examples","text":"<pre><code># Redirected to dashboard after login\n- type: urlMatches\n  operator: contains\n  value: \"/dashboard\"\n\n# On correct domain\n- type: urlMatches\n  operator: startsWith\n  value: \"https://app.example.com\"\n\n# Order confirmation URL\n- type: urlMatches\n  operator: matches\n  value: \"https://shop\\\\.example\\\\.com/order/[0-9]+\"\n</code></pre>"},{"location":"specification/browser-v1/scripted_check/#consoleerrorcountassertion","title":"ConsoleErrorCountAssertion","text":"<p>Assert on browser console error count.</p> <p>Extends: <code>NumericAssertion</code></p>"},{"location":"specification/browser-v1/scripted_check/#fields_7","title":"Fields","text":"Field Type Required Description <code>type</code> <code>\"consoleErrorCount\"</code> REQUIRED Assertion type discriminator <code>operator</code> <code>NumericOperator</code> REQUIRED Comparison operator <code>value</code> <code>integer</code> REQUIRED Expected error count threshold"},{"location":"specification/browser-v1/scripted_check/#supported-operators_2","title":"Supported Operators","text":"<ul> <li><code>equals</code> - Exact count</li> <li><code>notEquals</code> - Not equal</li> <li><code>greaterThan</code> - Greater than</li> <li><code>greaterThanOrEquals</code> - Greater than or equal</li> <li><code>lessThan</code> - Less than (most common)</li> <li><code>lessThanOrEquals</code> - Less than or equal</li> </ul>"},{"location":"specification/browser-v1/scripted_check/#semantics_5","title":"Semantics","text":"<ul> <li>Counts JavaScript errors logged to browser console during check execution</li> <li>Includes:</li> <li>Uncaught exceptions</li> <li>Network errors (failed resource loads)</li> <li>Syntax errors</li> <li>Runtime errors</li> <li>Does NOT include:</li> <li>Console warnings</li> <li>Console info messages</li> <li>Caught exceptions (try/catch)</li> </ul>"},{"location":"specification/browser-v1/scripted_check/#examples_4","title":"Examples","text":"<pre><code># No JavaScript errors\n- type: consoleErrorCount\n  operator: equals\n  value: 0\n\n# Tolerate up to 1 error (e.g., third-party script)\n- type: consoleErrorCount\n  operator: lessThan\n  value: 2\n</code></pre>"},{"location":"specification/browser-v1/scripted_check/#script-execution-model","title":"Script Execution Model","text":""},{"location":"specification/browser-v1/scripted_check/#browser-automation-library","title":"Browser Automation Library","text":"<p>IMPORTANT: The browser automation library/orchestrator used is implementation-specific. This specification does NOT prescribe: - Playwright - Puppeteer - Selenium WebDriver - Or any other specific library</p> <p>Implementations MUST: 1. Document which orchestrator(s) they support 2. Provide code examples for each supported orchestrator 3. Define the exact <code>page</code> and <code>context</code> API surface 4. Publish sample scripts showing common patterns</p> <p>Organizations implementing Synthetic Open Schema MUST clearly advertise: - Which scripting languages are supported - Which browser automation libraries are used - API documentation for <code>page</code> and <code>context</code> objects - Complete working examples for each use case</p>"},{"location":"specification/browser-v1/scripted_check/#function-signature","title":"Function Signature","text":"<p>Scripts MUST define an async function with the following signature:</p>"},{"location":"specification/browser-v1/scripted_check/#javascripttypescript","title":"JavaScript/TypeScript","text":"<pre><code>async function entrypointName(page, context) {\n  // Script logic using orchestrator-specific API\n  // Can return custom metrics (object)\n  // Throws error on failure\n}\n</code></pre> <p>Parameters: - <code>page</code>: Browser page automation API (implementation-specific) - <code>context</code>: Additional utilities and configuration (implementation-specific)</p> <p>Return value: Optional object with custom metrics (implementation-specific)</p>"},{"location":"specification/browser-v1/scripted_check/#python","title":"Python","text":"<pre><code>async def entrypoint_name(page, context):\n    # Script logic using orchestrator-specific API\n    # Can return custom metrics (dict)\n    # Raises exception on failure\n</code></pre> <p>Parameters: - <code>page</code>: Browser page automation API (implementation-specific) - <code>context</code>: Additional utilities and configuration (implementation-specific)</p> <p>Return value: Optional dict with custom metrics (implementation-specific)</p>"},{"location":"specification/browser-v1/scripted_check/#example-api-surfaces-by-orchestrator","title":"Example API Surfaces by Orchestrator","text":"<p>The following examples show how different implementations might expose browser automation APIs. These are examples only - actual implementations may vary.</p>"},{"location":"specification/browser-v1/scripted_check/#playwright-api-example","title":"Playwright API (Example)","text":"<pre><code>async function validateLogin(page, context) {\n  // page is Playwright Page object\n  await page.goto('https://example.com/login');\n  await page.fill('#username', context.env.USERNAME);\n  await page.click('button[type=\"submit\"]');\n  await page.waitForNavigation();\n}\n</code></pre>"},{"location":"specification/browser-v1/scripted_check/#puppeteer-api-example","title":"Puppeteer API (Example)","text":"<pre><code>async function validateLogin(page, context) {\n  // page is Puppeteer Page object\n  await page.goto('https://example.com/login');\n  await page.type('#username', context.env.USERNAME);\n  await page.click('button[type=\"submit\"]');\n  await page.waitForNavigation();\n}\n</code></pre>"},{"location":"specification/browser-v1/scripted_check/#selenium-webdriver-api-example","title":"Selenium WebDriver API (Example)","text":"<pre><code>async function validateLogin(driver, context) {\n  // driver is WebDriver instance\n  await driver.get('https://example.com/login');\n  const username = await driver.findElement(By.id('username'));\n  await username.sendKeys(context.env.USERNAME);\n  const submit = await driver.findElement(By.css('button[type=\"submit\"]'));\n  await submit.click();\n  await driver.wait(until.urlContains('/dashboard'));\n}\n</code></pre>"},{"location":"specification/browser-v1/scripted_check/#custom-implementation-api-example","title":"Custom Implementation API (Example)","text":"<pre><code>async function validateLogin(browser, context) {\n  // Custom browser automation API\n  const page = await browser.newPage();\n  await page.navigate('https://example.com/login');\n  await page.input('#username', context.env.USERNAME);\n  await page.submit('button[type=\"submit\"]');\n  await page.waitForUrl('/dashboard');\n}\n</code></pre> <p>Note: Organizations MUST document their specific API surface. Scripts are NOT portable across different implementations unless they use the same orchestrator.</p>"},{"location":"specification/browser-v1/scripted_check/#execution-flow","title":"Execution Flow","text":"<ol> <li>Initialize: Create browser context with <code>BrowserConfig</code></li> <li>Navigate: Load initial <code>url</code></li> <li>Execute Script: Call entrypoint function with <code>page</code> and <code>context</code></li> <li>Collect State: Capture final page state (URL, DOM, console errors)</li> <li>Evaluate Assertions: Run all <code>checks</code> assertions</li> <li>Report Results: Return pass/fail status, metrics, and errors</li> </ol>"},{"location":"specification/browser-v1/scripted_check/#error-handling","title":"Error Handling","text":"<p>Scripts can fail in two ways:</p>"},{"location":"specification/browser-v1/scripted_check/#1-script-throws-error","title":"1. Script Throws Error","text":"<pre><code>async function validateLogin(page, context) {\n  const loginButton = await page.$('#login');\n  if (!loginButton) {\n    throw new Error('Login button not found');  // Check FAILS\n  }\n}\n</code></pre> <p>Result: Check fails immediately, assertions not evaluated</p>"},{"location":"specification/browser-v1/scripted_check/#2-assertion-fails","title":"2. Assertion Fails","text":"<pre><code>checks:\n  - type: elementPresent\n    selector: \"#user-menu\"\n    operator: equals\n    value: true  # If missing, check FAILS\n</code></pre> <p>Result: Check fails after script completes</p>"},{"location":"specification/browser-v1/scripted_check/#script-best-practices","title":"Script Best Practices","text":""},{"location":"specification/browser-v1/scripted_check/#use-explicit-waits","title":"Use Explicit Waits","text":"<pre><code>// Bad: No wait, may fail due to timing\nawait page.click('#submit');\nconst result = await page.$('#result');\n\n// Good: Wait for element\nawait page.click('#submit');\nawait page.waitForSelector('#result', { timeout: 5000 });\nconst result = await page.$('#result');\n</code></pre>"},{"location":"specification/browser-v1/scripted_check/#return-custom-metrics","title":"Return Custom Metrics","text":"<pre><code>async function validateCheckout(page, context) {\n  const startTime = Date.now();\n\n  // Execute checkout flow\n  await page.click('#checkout');\n  await page.waitForNavigation();\n\n  const duration = Date.now() - startTime;\n\n  // Return custom metrics\n  return {\n    checkoutDuration: duration,\n    cartItems: await page.$$eval('.cart-item', items =&gt; items.length)\n  };\n}\n</code></pre>"},{"location":"specification/browser-v1/scripted_check/#handle-errors-gracefully","title":"Handle Errors Gracefully","text":"<pre><code>async function validateForm(page, context) {\n  try {\n    await page.fill('#email', 'test@example.com');\n    await page.click('#submit');\n    await page.waitForSelector('.success', { timeout: 5000 });\n  } catch (error) {\n    // Add context to errors\n    throw new Error(`Form submission failed: ${error.message}`);\n  }\n}\n</code></pre>"},{"location":"specification/browser-v1/scripted_check/#complete-examples","title":"Complete Examples","text":""},{"location":"specification/browser-v1/scripted_check/#example-1-login-flow-validation","title":"Example 1: Login Flow Validation","text":"<pre><code>apiVersion: browser/v1\nkind: ScriptedCheck\nmetadata:\n  name: login-flow\n  title: \"User Login Validation\"\nspec:\n  url: https://app.example.com/login\n\n  browser:\n    engine: chromium\n    viewport:\n      width: 1366\n      height: 768\n\n  script:\n    language: javascript\n    entrypoint: validateLogin\n    source:\n      inline: |\n        async function validateLogin(page, context) {\n          // Fill login form\n          await page.fill('#username', 'test@example.com');\n          await page.fill('#password', 'password123');\n\n          // Submit form\n          await page.click('button[type=\"submit\"]');\n\n          // Wait for navigation\n          await page.waitForNavigation({ timeout: 5000 });\n\n          // Verify logged in\n          const userMenu = await page.$('.user-menu');\n          if (!userMenu) {\n            throw new Error('Login failed: user menu not found');\n          }\n        }\n\n  checks:\n    - type: elementPresent\n      selector: \".user-menu\"\n      operator: equals\n      value: true\n\n    - type: elementVisible\n      selector: \".user-menu\"\n      operator: equals\n      value: true\n\n    - type: urlMatches\n      operator: contains\n      value: \"/dashboard\"\n\n    - type: textContains\n      operator: contains\n      value: \"Welcome\"\n\n    - type: consoleErrorCount\n      operator: equals\n      value: 0\n\n  interval: 10m\n  timeout: 60s\n  retries: 3\n</code></pre>"},{"location":"specification/browser-v1/scripted_check/#example-2-e-commerce-checkout-flow-external-script","title":"Example 2: E-commerce Checkout Flow (External Script)","text":"<pre><code>apiVersion: browser/v1\nkind: ScriptedCheck\nmetadata:\n  name: checkout-flow\n  title: \"E-commerce Checkout Validation\"\n  labels:\n    criticality: high\n    team: commerce\nspec:\n  url: https://shop.example.com\n\n  browser:\n    engine: chromium\n    viewport:\n      width: 1920\n      height: 1080\n    deviceScaleFactor: 2.0\n\n  script:\n    language: typescript\n    entrypoint: validateCheckoutFlow\n    source:\n      file: scripts/checkout-validation.ts\n\n  checks:\n    - type: urlMatches\n      operator: contains\n      value: \"/order/\"\n\n    - type: elementPresent\n      selector: \"#order-confirmation\"\n      operator: equals\n      value: true\n\n    - type: textContains\n      operator: contains\n      value: \"Order confirmed\"\n\n    - type: consoleErrorCount\n      operator: lessThan\n      value: 1\n\n  interval: 5m\n  timeout: 120s\n  retries: 2\n\n  locations:\n    - us-east-1\n    - eu-west-1\n\n  channels:\n    - channel: pagerduty-commerce\n      severity: Critical\n</code></pre> <p>External script (<code>scripts/checkout-validation.ts</code>):</p> <pre><code>async function validateCheckoutFlow(page: any, context: any) {\n  // Add product to cart\n  await page.click('[data-test=\"add-to-cart\"]');\n  await page.waitForSelector('.cart-badge', { timeout: 3000 });\n\n  // Go to cart\n  await page.click('[data-test=\"cart-icon\"]');\n  await page.waitForSelector('.cart-items', { timeout: 3000 });\n\n  // Proceed to checkout\n  await page.click('[data-test=\"checkout-button\"]');\n  await page.waitForNavigation({ timeout: 5000 });\n\n  // Fill shipping information\n  await page.fill('#shipping-name', 'Test User');\n  await page.fill('#shipping-address', '123 Test St');\n  await page.fill('#shipping-city', 'Test City');\n  await page.fill('#shipping-zip', '12345');\n\n  // Fill payment information (test mode)\n  await page.fill('#card-number', '4242424242424242');\n  await page.fill('#card-expiry', '12/25');\n  await page.fill('#card-cvc', '123');\n\n  // Submit order\n  await page.click('[data-test=\"place-order\"]');\n  await page.waitForNavigation({ timeout: 10000 });\n\n  // Return custom metrics\n  const orderNumber = await page.textContent('#order-number');\n  return {\n    orderNumber: orderNumber,\n    timestamp: new Date().toISOString()\n  };\n}\n</code></pre>"},{"location":"specification/browser-v1/scripted_check/#example-3-multi-page-form-submission-python","title":"Example 3: Multi-Page Form Submission (Python)","text":"<pre><code>apiVersion: browser/v1\nkind: ScriptedCheck\nmetadata:\n  name: survey-submission\n  title: \"Multi-Step Survey Validation\"\nspec:\n  url: https://survey.example.com\n\n  browser:\n    engine: firefox\n    viewport:\n      width: 1280\n      height: 720\n\n  script:\n    language: python\n    entrypoint: validate_survey_flow\n    source:\n      inline: |\n        async def validate_survey_flow(page, context):\n            # Page 1: Personal info\n            await page.fill(\"#name\", \"Test User\")\n            await page.fill(\"#email\", \"test@example.com\")\n            await page.click(\"button[data-step='next']\")\n            await page.wait_for_selector(\"[data-step='2']\", timeout=3000)\n\n            # Page 2: Preferences\n            await page.click(\"#option-a\")\n            await page.click(\"button[data-step='next']\")\n            await page.wait_for_selector(\"[data-step='3']\", timeout=3000)\n\n            # Page 3: Submit\n            await page.fill(\"#comments\", \"Test comment\")\n            await page.click(\"button[type='submit']\")\n            await page.wait_for_navigation(timeout=5000)\n\n            # Verify confirmation\n            confirmation = await page.query_selector(\"#confirmation-code\")\n            if not confirmation:\n                raise Exception(\"Survey submission failed\")\n\n  checks:\n    - type: elementPresent\n      selector: \"#confirmation-code\"\n      operator: equals\n      value: true\n\n    - type: textContains\n      operator: contains\n      value: \"Thank you\"\n\n    - type: urlMatches\n      operator: contains\n      value: \"/confirmation\"\n\n  interval: 1h\n</code></pre>"},{"location":"specification/browser-v1/scripted_check/#example-4-api-integration-test","title":"Example 4: API Integration Test","text":"<pre><code>apiVersion: browser/v1\nkind: ScriptedCheck\nmetadata:\n  name: api-integration\n  title: \"Frontend + API Integration Test\"\nspec:\n  url: https://app.example.com/data\n\n  browser:\n    engine: chromium\n    viewport:\n      width: 1920\n      height: 1080\n\n  script:\n    language: javascript\n    entrypoint: validateApiIntegration\n    source:\n      inline: |\n        async function validateApiIntegration(page, context) {\n          // Intercept API requests\n          const requests = [];\n          page.on('request', req =&gt; {\n            if (req.url().includes('/api/')) {\n              requests.push(req.url());\n            }\n          });\n\n          // Trigger data load\n          await page.click('#load-data');\n          await page.waitForSelector('.data-loaded', { timeout: 5000 });\n\n          // Verify API was called\n          if (requests.length === 0) {\n            throw new Error('No API requests detected');\n          }\n\n          // Return metrics\n          return {\n            apiRequestCount: requests.length,\n            apiEndpoints: requests\n          };\n        }\n\n  checks:\n    - type: elementPresent\n      selector: \".data-loaded\"\n      operator: equals\n      value: true\n\n    - type: textContains\n      operator: notContains\n      value: \"Loading...\"\n\n    - type: consoleErrorCount\n      operator: equals\n      value: 0\n\n  interval: 5m\n</code></pre>"},{"location":"specification/browser-v1/scripted_check/#implementation-notes","title":"Implementation Notes","text":""},{"location":"specification/browser-v1/scripted_check/#browser-automation-library-selection","title":"Browser Automation Library Selection","text":"<p>Vendor Responsibility: Organizations implementing Synthetic Open Schema MUST:</p> <ol> <li>Choose Orchestrator(s): Select which browser automation library to use</li> <li>Playwright (Node.js, Python, Java, .NET)</li> <li>Puppeteer (Node.js)</li> <li>Selenium WebDriver (multi-language)</li> <li>Custom or proprietary solutions</li> <li> <p>Cloud browser services (BrowserStack, Sauce Labs, etc.)</p> </li> <li> <p>Document API Surface: Clearly specify what <code>page</code> and <code>context</code> provide</p> </li> <li>Method signatures and return types</li> <li>Available automation APIs</li> <li>Error handling behavior</li> <li> <p>Timeout semantics</p> </li> <li> <p>Provide Code Examples: Publish sample scripts for common scenarios</p> </li> <li>Login flows</li> <li>Form submissions</li> <li>Multi-page navigation</li> <li>File uploads</li> <li>Dropdown selections</li> <li> <p>Waiting strategies</p> </li> <li> <p>Advertise Support: Make it clear which:</p> </li> <li>Languages are supported (javascript, typescript, python)</li> <li>Orchestrators are used</li> <li>Browser engines are available</li> <li>Limitations exist</li> </ol>"},{"location":"specification/browser-v1/scripted_check/#browser-automation-api","title":"Browser Automation API","text":"<p>Implementations provide orchestrator-specific APIs: - <code>page</code>: Browser page automation object (varies by orchestrator) - <code>context</code>: Additional utilities (logging, metrics, environment variables, secrets)</p>"},{"location":"specification/browser-v1/scripted_check/#script-isolation","title":"Script Isolation","text":"<p>Each check execution SHOULD: - Use a fresh browser context - Clear cookies and storage - Reset browser state - Use isolated script environment</p>"},{"location":"specification/browser-v1/scripted_check/#timeout-behavior","title":"Timeout Behavior","text":"<ul> <li><code>timeout</code> applies to entire check execution (navigation + script + assertions)</li> <li>Scripts SHOULD implement internal timeouts for individual operations</li> <li>Exceeding timeout results in check failure</li> </ul>"},{"location":"specification/browser-v1/scripted_check/#custom-metrics","title":"Custom Metrics","text":"<p>Scripts can return custom metrics as objects:</p> <pre><code>return {\n  loginDuration: 1234,\n  cartItems: 5,\n  totalPrice: 99.99\n};\n</code></pre> <p>Implementations MAY store and display these metrics separately from assertions.</p>"},{"location":"specification/browser-v1/scripted_check/#script-portability-and-vendor-lock-in","title":"Script Portability and Vendor Lock-in","text":""},{"location":"specification/browser-v1/scripted_check/#portability-considerations","title":"Portability Considerations","text":"<p>Scripts are NOT portable across implementations using different orchestrators: - A script written for Playwright cannot run on Puppeteer without modification - A script using Selenium WebDriver API is incompatible with Playwright - Custom orchestrators have unique APIs</p> <p>Why? - Each orchestrator has different method names and signatures - Browser interaction patterns vary (e.g., <code>page.click()</code> vs <code>element.click()</code>) - Wait strategies differ across libraries - Return types and error handling vary</p>"},{"location":"specification/browser-v1/scripted_check/#mitigating-vendor-lock-in","title":"Mitigating Vendor Lock-in","text":"<p>Organizations can reduce vendor lock-in by:</p> <ol> <li> <p>Abstraction Layer: Provide a common API wrapper    <pre><code>// Vendor-provided abstraction\nasync function login(page, username, password) {\n  // Wraps orchestrator-specific calls\n  await page.input('#username', username);\n  await page.input('#password', password);\n  await page.submit('#login-form');\n}\n</code></pre></p> </li> <li> <p>Script Templates: Provide templates for common patterns</p> </li> <li>Form filling patterns</li> <li>Navigation patterns</li> <li>Waiting strategies</li> <li> <p>Error handling</p> </li> <li> <p>Migration Tools: Offer tools to convert scripts between orchestrators</p> </li> <li> <p>Documentation: Clearly document portability limitations upfront</p> </li> </ol>"},{"location":"specification/browser-v1/scripted_check/#vendor-responsibilities","title":"Vendor Responsibilities","text":"<p>When implementing ScriptedCheck, vendors SHOULD:</p> <ol> <li>Be Explicit: Clearly state which orchestrator is used</li> <li>\"Uses Playwright for browser automation\"</li> <li>\"Built on Puppeteer\"</li> <li> <p>\"Selenium WebDriver compatible\"</p> </li> <li> <p>Provide Examples: Publish extensive code samples</p> </li> <li>Login flows (simple, multi-factor, SSO)</li> <li>E-commerce workflows (browse, cart, checkout)</li> <li>Form submissions (search, filters, upload)</li> <li> <p>Navigation patterns (multi-page, SPA, tabs)</p> </li> <li> <p>Document API: Full API reference for <code>page</code> and <code>context</code></p> </li> <li>What methods are available?</li> <li>What do they return?</li> <li>How do errors surface?</li> <li> <p>What are the timeout defaults?</p> </li> <li> <p>Support Migration: If changing orchestrators, provide migration guides</p> </li> <li> <p>Consider Abstraction: Consider providing orchestrator-agnostic helpers</p> </li> </ol>"},{"location":"specification/browser-v1/scripted_check/#security-considerations","title":"Security Considerations","text":""},{"location":"specification/browser-v1/scripted_check/#script-execution","title":"Script Execution","text":"<p>Scripts execute with full browser automation capabilities: - Can navigate to any URL - Can submit forms with arbitrary data - Can execute arbitrary JavaScript in page context - Can make external HTTP requests</p> <p>Mitigation: Restrict script sources, review scripts before deployment, use separate environments for testing.</p>"},{"location":"specification/browser-v1/scripted_check/#credential-management","title":"Credential Management","text":"<p>Scripts often require credentials (usernames, passwords, API keys): - DO NOT hardcode credentials in scripts - USE environment variables or secret management - INJECT credentials securely via <code>context</code> parameter</p> <p>Example: <pre><code>async function validateLogin(page, context) {\n  // Good: Use context for credentials\n  const username = context.env.TEST_USERNAME;\n  const password = context.env.TEST_PASSWORD;\n\n  await page.fill('#username', username);\n  await page.fill('#password', password);\n}\n</code></pre></p>"},{"location":"specification/browser-v1/scripted_check/#sensitive-data","title":"Sensitive Data","text":"<p>Scripts may interact with production data: - Avoid modifying production state (use test accounts, read-only operations) - Be cautious with form submissions, purchases, deletions - Consider using dedicated test environments</p>"},{"location":"specification/browser-v1/scripted_check/#script-tampering","title":"Script Tampering","text":"<p>If loading scripts from <code>file</code>: - Validate script integrity (checksums, signatures) - Restrict file system access - Use read-only script directories</p>"},{"location":"specification/browser-v1/scripted_check/#conformance","title":"Conformance","text":"<p>Implementations claiming support for <code>ScriptedCheck</code> MUST:</p> <ol> <li>Load URL: Navigate to specified <code>url</code> in configured browser</li> <li>Execute Script: Run script entrypoint function with <code>page</code> and <code>context</code> parameters</li> <li>Handle Errors: Fail check if script throws error</li> <li>Evaluate Assertions: Run all <code>checks</code> assertions after script completes</li> <li>Report Results: Return pass/fail status, script output, and assertion results</li> <li>Honor Timeout: Abort check if <code>timeout</code> is exceeded</li> <li>Support Language: Support at least one <code>ScriptLanguage</code></li> </ol> <p>Implementations MAY: - Support multiple languages - Provide additional context utilities - Capture screenshots on failure - Record video of execution - Store custom metrics returned by scripts</p>"},{"location":"specification/browser-v1/scripted_check/#related-documents","title":"Related Documents","text":"<ul> <li>browser/v1/_index.md - Browser check overview</li> <li>browser/v1/common.md - BrowserConfig, BrowserEngine, Viewport</li> <li>browser/v1/load_check.md - LoadCheck (passive monitoring)</li> <li>v1/common.md - Core v1 common types</li> <li>v1/check.md - Base Check resource</li> </ul> <p>Status: Stable Last Updated: 2026-02-07</p>"},{"location":"specification/policy/compatibility/","title":"Compatibility","text":"<p>This document defines forward and backward compatibility guarantees for Synthetic Open Schema.</p>"},{"location":"specification/policy/compatibility/#compatibility-principles","title":"Compatibility Principles","text":""},{"location":"specification/policy/compatibility/#backward-compatibility","title":"Backward Compatibility","text":"<p>Definition: Checks written for an older version of the specification MUST work with implementations supporting a newer version within the same major version.</p> <p>Example: A check written for <code>v1.0</code> MUST work with a runner implementing <code>v1.5</code>.</p>"},{"location":"specification/policy/compatibility/#forward-compatibility","title":"Forward Compatibility","text":"<p>Definition: Implementations SHOULD handle checks that include unknown fields gracefully, either by ignoring them or providing clear error messages.</p> <p>Example: A <code>v1.0</code> implementation encountering a <code>v1.5</code> check with new optional fields SHOULD either: 1. Ignore the unknown fields and execute the check 2. Provide a clear error indicating unsupported fields</p>"},{"location":"specification/policy/compatibility/#version-compatibility-matrix","title":"Version Compatibility Matrix","text":""},{"location":"specification/policy/compatibility/#within-stable-major-versions","title":"Within Stable Major Versions","text":"Check Version Runner Version Compatibility Notes v1.0 v1.0 \u2705 Full Exact match v1.0 v1.5 \u2705 Full Backward compatible v1.5 v1.0 \u26a0\ufe0f Partial Unknown fields may be ignored v1 v2 \u274c None Major version breaking change"},{"location":"specification/policy/compatibility/#betaalpha-versions","title":"Beta/Alpha Versions","text":"<p>Beta and alpha versions have NO compatibility guarantees across versions:</p> Check Version Runner Version Compatibility v1beta1 v1beta2 \u274c None v1alpha1 v1alpha2 \u274c None v1beta1 v1 \u274c None (migration required)"},{"location":"specification/policy/compatibility/#field-evolution-rules","title":"Field Evolution Rules","text":""},{"location":"specification/policy/compatibility/#adding-fields","title":"Adding Fields","text":"<p>New optional fields MAY be added in minor versions:</p> <pre><code># v1.0\nspec:\n  url: https://example.com\n  timeout: 5s\n\n# v1.1 adds optional field\nspec:\n  url: https://example.com\n  timeout: 5s\n  maxRedirects: 3  # New in v1.1, optional\n</code></pre> <p>New required fields MUST NOT be added within a major version.</p>"},{"location":"specification/policy/compatibility/#deprecating-fields","title":"Deprecating Fields","text":"<p>Fields may be deprecated but MUST remain functional:</p> <pre><code># Deprecated in v1.5, removed in v2.0\nspec:\n  url: https://example.com\n  retries: 3  # Deprecated, use retryPolicy instead\n  retryPolicy:  # New field replacing retries\n    maxAttempts: 3\n</code></pre>"},{"location":"specification/policy/compatibility/#changing-defaults","title":"Changing Defaults","text":"<p>Default values MUST NOT change within a major version, as this changes behavior.</p>"},{"location":"specification/policy/compatibility/#check-kind-compatibility","title":"Check Kind Compatibility","text":""},{"location":"specification/policy/compatibility/#adding-check-kinds","title":"Adding Check Kinds","text":"<p>New check kinds MAY be added at any time: - HttpCheck, TcpCheck (v1.0) - DnsCheck, SslCheck (v1.1) \u2190 Allowed - BrowserCheck (v1.2) \u2190 Allowed</p>"},{"location":"specification/policy/compatibility/#removing-check-kinds","title":"Removing Check Kinds","text":"<p>Check kinds MUST NOT be removed within a major version: - Deprecation warnings in v1.x - Removal only in v2.0</p>"},{"location":"specification/policy/compatibility/#assertion-compatibility","title":"Assertion Compatibility","text":""},{"location":"specification/policy/compatibility/#adding-assertions","title":"Adding Assertions","text":"<p>New assertion types MAY be added:</p> <pre><code># v1.0\nchecks:\n  - type: statusCode\n    operator: equals\n    value: 200\n\n# v1.1 adds new assertion type\nchecks:\n  - type: statusCode\n    operator: equals\n    value: 200\n  - type: responseTime  # New in v1.1\n    operator: lessThan\n    value: 500ms\n</code></pre>"},{"location":"specification/policy/compatibility/#adding-operators","title":"Adding Operators","text":"<p>New operators MAY be added for existing assertions:</p> <pre><code># v1.0: equals, notEquals, contains\noperator: equals\n\n# v1.1: adds regex operator\noperator: regex  # New in v1.1\n</code></pre>"},{"location":"specification/policy/compatibility/#implementation-requirements","title":"Implementation Requirements","text":""},{"location":"specification/policy/compatibility/#conformance-levels","title":"Conformance Levels","text":"<p>Implementations SHOULD declare their conformance level:</p> <p>Full Conformance: Supports all required features of the declared version Partial Conformance: Supports subset of features (must document which)</p> <p>Example: <pre><code>This runner supports Synthetic Open Schema v1.2 with full conformance.\nSupported check kinds: HttpCheck, TcpCheck, DnsCheck, SslCheck\n</code></pre></p>"},{"location":"specification/policy/compatibility/#unknown-field-handling","title":"Unknown Field Handling","text":"<p>Implementations MUST either: 1. Strict Mode: Reject checks with unknown fields (recommended for validation tools) 2. Permissive Mode: Ignore unknown fields and execute check (recommended for runners)</p> <p>The mode SHOULD be configurable.</p>"},{"location":"specification/policy/compatibility/#migration-guides","title":"Migration Guides","text":"<p>When major versions introduce breaking changes, migration guides MUST be provided documenting: 1. What changed 2. Why it changed 3. How to migrate existing checks 4. Automated migration tools (if available)</p>"},{"location":"specification/policy/compatibility/#guarantees-summary","title":"Guarantees Summary","text":"Guarantee Within Major Version Across Major Versions Backward Compatibility \u2705 Required \u274c Not guaranteed Forward Compatibility \u26a0\ufe0f Best effort \u274c Not guaranteed Field additions \u2705 Allowed (optional) \u2705 Allowed Field removals \u274c Prohibited \u2705 Allowed Default changes \u274c Prohibited \u2705 Allowed Check kind additions \u2705 Allowed \u2705 Allowed Check kind removals \u274c Prohibited \u2705 Allowed (with deprecation)"},{"location":"specification/policy/glossary/","title":"Glossary","text":"<p>This document defines terminology used throughout the Synthetic Open Schema specification.</p>"},{"location":"specification/policy/glossary/#rfc-2119-keywords","title":"RFC 2119 Keywords","text":"<p>The key words \"MUST\", \"MUST NOT\", \"REQUIRED\", \"SHALL\", \"SHALL NOT\", \"SHOULD\", \"SHOULD NOT\", \"RECOMMENDED\", \"MAY\", and \"OPTIONAL\" are to be interpreted as described in RFC 2119.</p>"},{"location":"specification/policy/glossary/#terms","title":"Terms","text":""},{"location":"specification/policy/glossary/#check","title":"Check","text":"<p>A declarative definition of a synthetic monitoring test, including what to monitor, how to evaluate it, and when to run it.</p>"},{"location":"specification/policy/glossary/#check-kind","title":"Check Kind","text":"<p>The type of check (e.g., HttpCheck, TcpCheck, DnsCheck). Determines the fields available in the spec and the execution semantics.</p>"},{"location":"specification/policy/glossary/#resource","title":"Resource","text":"<p>The base model for all check definitions, containing <code>apiVersion</code>, <code>kind</code>, <code>metadata</code>, and <code>spec</code> fields.</p>"},{"location":"specification/policy/glossary/#assertion","title":"Assertion","text":"<p>A condition that must be evaluated to determine if a check passes or fails. Multiple assertions can be defined per check.</p>"},{"location":"specification/policy/glossary/#runner","title":"Runner","text":"<p>An implementation that executes checks according to this specification. Runners are responsible for performing the check and evaluating assertions.</p>"},{"location":"specification/policy/glossary/#spec","title":"Spec","text":"<p>The <code>spec</code> field in a check definition, containing check-specific configuration (URL, timeout, assertions, etc.).</p>"},{"location":"specification/policy/glossary/#metadata","title":"Metadata","text":"<p>The <code>metadata</code> field in a check definition, containing identifying information like name and labels.</p>"},{"location":"specification/policy/glossary/#api-version","title":"API Version","text":"<p>The version of the schema specification a check conforms to (e.g., <code>v1</code>, <code>v1beta1</code>).</p>"},{"location":"specification/policy/glossary/#interval","title":"Interval","text":"<p>A time duration specifying how frequently a check should be executed (e.g., <code>1m</code>, <code>30s</code>).</p>"},{"location":"specification/policy/glossary/#cron","title":"Cron","text":"<p>A cron expression specifying when a check should be executed, using standard cron syntax.</p>"},{"location":"specification/policy/glossary/#location","title":"Location","text":"<p>A geographic region or execution environment where a check should run (e.g., <code>us-east-1</code>, <code>eu-west-1</code>).</p>"},{"location":"specification/policy/glossary/#channel","title":"Channel","text":"<p>A notification destination for check results (e.g., webhook, email, Slack).</p>"},{"location":"specification/policy/glossary/#timeout","title":"Timeout","text":"<p>The maximum duration allowed for a check to complete before it is considered failed.</p>"},{"location":"specification/policy/glossary/#retry","title":"Retry","text":"<p>The number of times a failed check should be re-attempted before marking it as definitively failed.</p>"},{"location":"specification/policy/glossary/#operator","title":"Operator","text":"<p>A comparison operation used in assertions (e.g., <code>equals</code>, <code>contains</code>, <code>greaterThan</code>).</p>"},{"location":"specification/policy/glossary/#normative-vs-informative","title":"Normative vs. Informative","text":"<ul> <li>Normative: Requirements that implementations MUST follow to claim conformance</li> <li>Informative: Explanatory material, examples, and recommendations that are not requirements</li> </ul> <p>Unless explicitly marked as informative, all content in this specification is normative.</p>"},{"location":"specification/policy/versioning/","title":"Versioning","text":"<p>This document describes the versioning strategy for Synthetic Open Schema.</p>"},{"location":"specification/policy/versioning/#api-versioning","title":"API Versioning","text":"<p>Synthetic Open Schema uses semantic versioning for its API versions:</p>"},{"location":"specification/policy/versioning/#version-format","title":"Version Format","text":"<p>API versions follow the format: <code>v{MAJOR}[{STABILITY}]</code></p> <p>Examples: - <code>v1</code> - Major version 1, stable - <code>v1beta1</code> - Major version 1, beta 1 - <code>v1alpha1</code> - Major version 1, alpha 1 - <code>v2</code> - Major version 2, stable</p>"},{"location":"specification/policy/versioning/#stability-levels","title":"Stability Levels","text":"<p>Alpha (<code>v1alpha1</code>, <code>v2alpha1</code>, etc.): - Early preview, subject to breaking changes - No backward compatibility guarantees - May be removed in future versions - Not recommended for production use</p> <p>Beta (<code>v1beta1</code>, <code>v2beta1</code>, etc.): - Feature complete but may have minor changes - Backward compatibility best effort - API is relatively stable - Suitable for testing and feedback</p> <p>Stable (<code>v1</code>, <code>v2</code>, etc.): - Production ready - Strong backward compatibility guarantees - Breaking changes only in new major versions - Long-term support</p>"},{"location":"specification/policy/versioning/#backward-compatibility","title":"Backward Compatibility","text":""},{"location":"specification/policy/versioning/#within-a-major-version","title":"Within a Major Version","text":"<p>Within a stable major version (e.g., <code>v1</code>), changes MUST maintain backward compatibility:</p> <p>Allowed Changes: - Adding new optional fields - Adding new check kinds - Adding new assertion types - Adding new operator types - Expanding allowed values for enums - Clarifying documentation</p> <p>Prohibited Changes: - Removing fields - Changing field types - Making optional fields required - Changing field semantics - Removing check kinds - Removing operators</p>"},{"location":"specification/policy/versioning/#between-major-versions","title":"Between Major Versions","text":"<p>Major version changes (e.g., <code>v1</code> \u2192 <code>v2</code>) MAY introduce breaking changes: - Removed or renamed fields - Changed field types or semantics - Different validation rules - Removed check kinds</p>"},{"location":"specification/policy/versioning/#version-lifecycle","title":"Version Lifecycle","text":"<ol> <li>Alpha: Experimental, may change significantly</li> <li>Beta: Feature complete, minor changes possible</li> <li>Stable: Production ready, long-term support</li> <li>Deprecated: Marked for removal, still supported</li> <li>Removed: No longer supported</li> </ol>"},{"location":"specification/policy/versioning/#deprecation-policy","title":"Deprecation Policy","text":"<ul> <li>Deprecation warnings MUST be provided at least one major version before removal</li> <li>Deprecated features MUST continue to work during the deprecation period</li> <li>Clear migration guides MUST be provided for deprecated features</li> </ul>"},{"location":"specification/policy/versioning/#custom-extensions","title":"Custom Extensions","text":"<p>Implementations MAY add custom check kinds under their own namespace:</p> <pre><code>apiVersion: company.com/v1\nkind: CustomCheck\n</code></pre> <p>Custom extensions: - MUST NOT conflict with standard check kinds - MUST use a company/organization domain as prefix - SHOULD follow the same versioning principles - MAY have different compatibility guarantees</p>"},{"location":"specification/policy/versioning/#schema-evolution","title":"Schema Evolution","text":"<p>JSON schemas are published in a separate repository: https://github.com/syntheticopenschema/schemas</p> <p>Schemas are versioned alongside the API: - <code>v1.json</code> corresponds to API version <code>v1</code> - <code>v1beta1.json</code> corresponds to API version <code>v1beta1</code></p> <p>Schemas are generated from the reference implementation and published for tooling integration.</p>"},{"location":"specification/v1/_index/","title":"Synthetic Open Schema v1","text":"<p>API Version: <code>v1</code> Status: Stable Release Date: 2026-02-07</p>"},{"location":"specification/v1/_index/#overview","title":"Overview","text":"<p>This directory contains the normative specification for Synthetic Open Schema version 1.</p> <p>Version 1 represents the first stable release of the specification, graduating from the v1beta1 beta release.</p>"},{"location":"specification/v1/_index/#whats-new-in-v1","title":"What's New in v1","text":""},{"location":"specification/v1/_index/#stable-api-version","title":"Stable API Version","text":"<ul> <li><code>apiVersion: v1</code> - Production-ready, stable specification</li> <li>Simplified versioning without vendor prefix</li> </ul>"},{"location":"specification/v1/_index/#new-check-types","title":"New Check Types","text":"<ul> <li>DomainCheck: Domain registration and WHOIS monitoring</li> <li>Monitor expiration dates, nameservers, registrar, EPP status, DNSSEC</li> </ul>"},{"location":"specification/v1/_index/#enhanced-features","title":"Enhanced Features","text":"<ul> <li>TLS/SSL Dual Naming: Both <code>TlsCheck</code> and <code>SslCheck</code> supported (aliases)</li> <li>Custom CA Support: TLS checks can use custom certificate authorities</li> <li>Time to First Byte: HTTP checks support TTFB assertion</li> <li>Certificate Validation: TLS checks include certificate validity assertion</li> <li>List Assertions: Support for list-based assertions (nameservers, status codes)</li> </ul>"},{"location":"specification/v1/_index/#specification-documents","title":"Specification Documents","text":"<p>This version specification is organized as follows:</p>"},{"location":"specification/v1/_index/#core-documents","title":"Core Documents","text":"<ul> <li>common.md: Shared types, fields, and concepts used across all check kinds</li> <li>check.md: Base resource model (Resource, Metadata, CheckSpec)</li> </ul>"},{"location":"specification/v1/_index/#check-kind-specifications","title":"Check Kind Specifications","text":"<p>Each check kind has its own specification document:</p> <ul> <li>http.md: HTTP/HTTPS endpoint checks</li> <li>tcp.md: TCP port connectivity checks</li> <li>tls.md: TLS/SSL certificate checks</li> <li>dns.md: DNS resolution checks</li> <li>domain.md: Domain registration and WHOIS monitoring</li> </ul> <p>Note: Browser checks are documented separately under <code>browser/v1</code> API version. See <code>../browser/v1/</code> directory.</p>"},{"location":"specification/v1/_index/#supported-check-kinds-v1-api","title":"Supported Check Kinds (v1 API)","text":"Kind Description Status HttpCheck HTTP/HTTPS endpoint monitoring \u2705 Stable TcpCheck TCP port connectivity \u2705 Stable TlsCheck TLS/SSL certificate validation \u2705 Stable DnsCheck DNS resolution \u2705 Stable DomainCheck Domain registration and WHOIS \u2705 Stable <p>Note: <code>SslCheck</code> is an alias for <code>TlsCheck</code> (both names are supported).</p> <p>Note: Browser checks (<code>LoadCheck</code>, <code>ScriptedCheck</code>) use separate <code>apiVersion: browser/v1</code>. See <code>../browser/v1/</code> for documentation.</p>"},{"location":"specification/v1/_index/#resource-structure","title":"Resource Structure","text":"<p>All checks follow this structure:</p> <pre><code>apiVersion: v1\nkind: {CheckKind}\nmetadata:\n  name: check-name\n  labels:\n    key: value\nspec:\n  # Check-specific fields\n  # Common fields (interval, timeout, locations, etc.)\n  # Assertions (checks)\n</code></pre>"},{"location":"specification/v1/_index/#common-fields","title":"Common Fields","text":"<p>All check kinds share these fields in their <code>spec</code>:</p> <ul> <li><code>interval</code> or <code>cron</code>: Scheduling (mutually exclusive, one required)</li> <li><code>timeout</code>: Maximum execution time</li> <li><code>retries</code>: Number of retry attempts</li> <li><code>locations</code>: List of execution locations</li> <li><code>channels</code>: Notification destinations</li> <li><code>checks</code>: List of assertions to evaluate</li> </ul> <p>See common.md for detailed specifications.</p>"},{"location":"specification/v1/_index/#examples","title":"Examples","text":"<p>Example configurations for all check kinds can be found in the reference implementation's <code>examples/</code> directory:</p> <p>v1 Check Examples: - <code>http-check.yaml</code> - HTTP/HTTPS endpoint monitoring - <code>tcp-check.yaml</code> - TCP port connectivity - <code>tls-check.yaml</code> - TLS certificate validation (HTTPS) - <code>tls-smtp.yaml</code> - TLS certificate validation (SMTP) - <code>ssl-check.yaml</code> - SSL/TLS (using SslCheck alias) - <code>dns-check.yaml</code> - DNS resolution - <code>domain-check.yaml</code> - Domain registration monitoring</p> <p>browser/v1 Check Examples: - <code>load-check.yaml</code> - Browser page load monitoring - <code>scripted-check.yaml</code> - Browser automation scripts - <code>scripted-check-with-file.yaml</code> - External script files</p>"},{"location":"specification/v1/_index/#json-schema","title":"JSON Schema","text":"<p>JSON Schema definitions for v1 are published at: https://github.com/syntheticopenschema/schemas</p> <p>These schemas are generated from the reference Python implementation and can be used for validation and tooling integration.</p>"},{"location":"specification/v1/_index/#conformance","title":"Conformance","text":"<p>An implementation claiming compatibility with Synthetic Open Schema v1 MUST:</p> <ol> <li>Implement the base Resource model as defined in check.md</li> <li>Support at least one check kind fully</li> <li>Reject configurations that violate normative constraints</li> <li>Clearly document which check kinds and features are supported</li> <li>Handle scheduling (interval or cron) as specified</li> <li>Evaluate assertions according to the specification</li> </ol> <p>Implementations SHOULD: - Support all stable check kinds - Provide clear error messages for validation failures - Support multiple execution locations - Implement retry logic</p>"},{"location":"specification/v1/_index/#contributing","title":"Contributing","text":"<p>To propose changes to this specification: 1. Open an issue describing the proposed change 2. Submit a pull request with specification updates 3. Update examples and schemas accordingly 4. Ensure backward compatibility (or document breaking change)</p> <p>See CONTRIBUTING.md for full guidelines.</p>"},{"location":"specification/v1/check/","title":"Base Check Definition","text":"<p>Version: v1 Status: Stable</p>"},{"location":"specification/v1/check/#overview","title":"Overview","text":"<p>This document defines the base <code>Resource</code> model that all check types in Synthetic Open Schema v1 extend.</p> <p>All checks follow a Kubernetes-style resource structure with <code>apiVersion</code>, <code>kind</code>, <code>metadata</code>, and <code>spec</code> fields.</p>"},{"location":"specification/v1/check/#resource-structure","title":"Resource Structure","text":"<p>Every check MUST conform to this base structure:</p> <pre><code>apiVersion: v1\nkind: {CheckKind}\nmetadata:\n  name: {check-name}\n  title: {optional-title}\n  labels:\n    key: value\nspec:\n  # Check-specific fields\n  # Common fields (interval, timeout, etc.)\n</code></pre>"},{"location":"specification/v1/check/#fields","title":"Fields","text":""},{"location":"specification/v1/check/#apiversion","title":"apiVersion","text":"<p>Type: <code>string</code> REQUIRED</p> <p>Description: The API version of the schema.</p> <p>Value: <code>v1</code></p> <p>Example: <pre><code>apiVersion: v1\n</code></pre></p> <p>Validation: - MUST be exactly <code>v1</code> for this specification version - MUST be a literal value (not computed)</p> <p>Custom Extensions: Companies implementing custom check kinds MAY use their own namespace: <pre><code>apiVersion: company.com/v1\nkind: CustomCheck\n</code></pre></p>"},{"location":"specification/v1/check/#kind","title":"kind","text":"<p>Type: <code>string</code> REQUIRED</p> <p>Description: The type of check being defined.</p> <p>Standard Values (for <code>apiVersion: v1</code>): - <code>HttpCheck</code> - <code>TcpCheck</code> - <code>SslCheck</code> - <code>DnsCheck</code> - <code>DomainCheck</code> (planned)</p> <p>Note: Browser checks use <code>apiVersion: browser/v1</code> and have their own check kinds: - <code>LoadCheck</code> - Passive page load monitoring - <code>ScriptedCheck</code> - Active browser automation</p> <p>Example: <pre><code>kind: HttpCheck\n</code></pre></p> <p>Validation: - MUST be a valid check kind - MUST match one of the supported kinds for the implementation - Case-sensitive</p> <p>Custom Extensions: Companies MAY define custom check kinds under their own namespace (see <code>apiVersion</code>).</p>"},{"location":"specification/v1/check/#metadata","title":"metadata","text":"<p>Type: <code>Metadata</code> object REQUIRED</p> <p>Description: Identifying information for the check.</p> <p>Fields: - <code>name</code>: Identifier for the check (REQUIRED) - <code>title</code>: Human-readable title (OPTIONAL) - <code>labels</code>: Key-value labels for organization (OPTIONAL)</p> <p>Example: <pre><code>metadata:\n  name: api-health-check\n  title: \"Production API Health Check\"\n  labels:\n    environment: production\n    service: api\n    team: platform\n</code></pre></p>"},{"location":"specification/v1/check/#metadata-fields","title":"Metadata Fields","text":""},{"location":"specification/v1/check/#metadataname","title":"metadata.name","text":"<p>Type: <code>CaseInsensitiveKey</code> REQUIRED</p> <p>Description: Unique identifier for the check within its scope.</p> <p>Format: <code>^[A-Za-z0-9\\-]+$</code></p> <p>Constraints: - MUST contain at least one character - MUST contain only alphanumeric characters and hyphens - MUST NOT start or end with a hyphen - Automatically converted to lowercase - MUST follow DNS subdomain naming conventions</p> <p>Examples: <pre><code>name: api-health-check\nname: checkout-flow-monitor\nname: prod-database-connectivity\n</code></pre></p> <p>Uniqueness: The combination of <code>apiVersion</code>, <code>kind</code>, and <code>metadata.name</code> forms a unique key for the check: <pre><code>v1:HttpCheck:api-health-check\n</code></pre></p>"},{"location":"specification/v1/check/#metadatatitle","title":"metadata.title","text":"<p>Type: <code>string</code> OPTIONAL Default: <code>null</code></p> <p>Description: Human-readable title for the check.</p> <p>Example: <pre><code>title: \"Production API Health Check\"\n</code></pre></p> <p>Usage: - For display in UIs - For reporting - Documentation purposes - Can contain spaces and special characters</p>"},{"location":"specification/v1/check/#metadatalabels","title":"metadata.labels","text":"<p>Type: <code>object</code> (key-value pairs) OPTIONAL Default: <code>{}</code></p> <p>Description: Arbitrary key-value labels for organizing and filtering checks.</p> <p>Example: <pre><code>labels:\n  environment: production\n  service: api\n  team: platform\n  region: us-east-1\n  criticality: high\n</code></pre></p> <p>Constraints: - Keys and values MUST be strings - Labels are for organization only - Do not affect check execution - Implementation-specific usage (filtering, grouping, etc.)</p> <p>Validation: - MUST be a dictionary/map - Keys and values MUST be strings - Empty labels object is valid</p>"},{"location":"specification/v1/check/#spec","title":"spec","text":"<p>Type: Check-specific object REQUIRED</p> <p>Description: The specification for the check, containing both check-specific fields and common fields.</p> <p>Structure: <pre><code>spec:\n  # Scheduling (REQUIRED - one of):\n  interval: 1m     # OR\n  cron: \"*/5 * * * *\"\n\n  # Common fields (OPTIONAL):\n  timeout: 5s\n  retries: 3\n  locations:\n    - us-east-1\n    - eu-west-1\n  channels:\n    - channel: alerts\n      severity: High\n\n  # Check-specific fields:\n  # (defined by each check kind)\n</code></pre></p>"},{"location":"specification/v1/check/#base-checkspec","title":"Base CheckSpec","text":"<p>All check kinds extend the base <code>CheckSpec</code> with these common fields:</p>"},{"location":"specification/v1/check/#scheduling-fields","title":"Scheduling Fields","text":"<p>REQUIRED: Exactly ONE of <code>interval</code> or <code>cron</code> MUST be specified.</p>"},{"location":"specification/v1/check/#interval","title":"interval","text":"<p>Type: <code>Time</code> REQUIRED (if <code>cron</code> not specified)</p> <p>Description: Execute check at regular intervals.</p> <p>Example: <pre><code>interval: 1m\n</code></pre></p> <p>See common.md for Time format specification.</p>"},{"location":"specification/v1/check/#cron","title":"cron","text":"<p>Type: <code>string</code> (cron expression) REQUIRED (if <code>interval</code> not specified)</p> <p>Description: Execute check based on cron schedule.</p> <p>Format: Standard cron (5 or 6 fields)</p> <p>Example: <pre><code>cron: \"*/5 * * * *\"  # Every 5 minutes\ncron: \"0 0 * * *\"    # Daily at midnight\n</code></pre></p> <p>Validation: - MUST be valid cron expression - Validated using croniter semantics</p> <p>Mutual Exclusion: <pre><code># VALID: Only interval\nspec:\n  interval: 1m\n\n# VALID: Only cron\nspec:\n  cron: \"*/5 * * * *\"\n\n# INVALID: Both specified\nspec:\n  interval: 1m\n  cron: \"*/5 * * * *\"  # ERROR!\n\n# INVALID: Neither specified\nspec:\n  timeout: 5s  # ERROR! Missing interval or cron\n</code></pre></p>"},{"location":"specification/v1/check/#common-optional-fields","title":"Common Optional Fields","text":""},{"location":"specification/v1/check/#timeout","title":"timeout","text":"<p>Type: <code>Time</code> OPTIONAL Default: <code>1s</code></p> <p>Description: Maximum duration allowed for check execution.</p> <p>Example: <pre><code>timeout: 5s\n</code></pre></p> <p>Behavior: - Check MUST be terminated if execution exceeds timeout - Timeout includes all retry attempts - Timed-out checks are considered failures</p>"},{"location":"specification/v1/check/#retries","title":"retries","text":"<p>Type: <code>integer</code> OPTIONAL Default: <code>1</code></p> <p>Description: Number of retry attempts on check failure.</p> <p>Example: <pre><code>retries: 3\n</code></pre></p> <p>Constraints: - MUST be positive integer - Value of <code>1</code> means no retries (execute once) - Value of <code>3</code> means execute up to 3 times (initial + 2 retries)</p> <p>Behavior: - Retries occur immediately after failure - If any attempt succeeds, check is considered successful - Timeout applies to total execution time including all retries</p>"},{"location":"specification/v1/check/#locations","title":"locations","text":"<p>Type: <code>array[string]</code> OPTIONAL Default: <code>[]</code></p> <p>Description: Geographic locations or execution environments where check should run.</p> <p>Example: <pre><code>locations:\n  - us-east-1\n  - eu-west-1\n  - ap-southeast-1\n</code></pre></p> <p>Behavior: - Empty list means run in default location - Check executes independently in each location - Location identifiers are implementation-specific - Results are reported separately per location</p>"},{"location":"specification/v1/check/#channels","title":"channels","text":"<p>Type: <code>array[object]</code> OPTIONAL Default: <code>[]</code></p> <p>Description: Notification destinations for check results.</p> <p>Example: <pre><code>channels:\n  - channel: webhook-alerts\n    severity: Critical\n  - channel: slack-team-channel\n    severity: High\n</code></pre></p> <p>Fields: - <code>channel</code>: Identifier for notification channel (string) - <code>severity</code>: Severity level (implementation-specific) - Additional fields MAY be implementation-specific</p> <p>Behavior: - Empty list means no notifications - Channel configuration is implementation-specific - Notifications are sent based on check results and severity</p>"},{"location":"specification/v1/check/#check-specific-fields","title":"Check-Specific Fields","text":"<p>Each check kind defines its own fields in the <code>spec</code> section:</p> <p>Core Checks (apiVersion: v1): - HttpCheck: <code>url</code>, <code>method</code>, <code>headers</code>, <code>checks</code> - TcpCheck: <code>host</code>, <code>port</code>, <code>checks</code> - SslCheck: <code>hostname</code>, <code>port</code>, <code>checks</code> - DnsCheck: <code>hostname</code>, <code>recordType</code>, <code>resolver</code>, <code>checks</code> - DomainCheck: <code>domain</code>, <code>checks</code> (planned)</p> <p>Browser Checks (apiVersion: browser/v1): - LoadCheck: <code>url</code>, <code>browser</code>, <code>collect</code>, <code>checks</code> - ScriptedCheck: <code>url</code>, <code>browser</code>, <code>script</code>, <code>checks</code></p> <p>See individual check kind specifications for details.</p>"},{"location":"specification/v1/check/#resource-key","title":"Resource Key","text":"<p>Each resource has a unique key formed by combining: <pre><code>{apiVersion}:{kind}:{metadata.name}\n</code></pre></p> <p>Example: <pre><code>apiVersion: v1\nkind: HttpCheck\nmetadata:\n  name: api-health\n\n# Key: v1:HttpCheck:api-health\n</code></pre></p> <p>This key is used for: - Identifying resources - Preventing duplicates - Referencing in logs and results</p>"},{"location":"specification/v1/check/#validation-rules","title":"Validation Rules","text":""},{"location":"specification/v1/check/#required-fields","title":"Required Fields","text":"<p>The following fields MUST be present: - <code>apiVersion</code> - <code>kind</code> - <code>metadata</code> - <code>metadata.name</code> - <code>spec</code> - One of <code>spec.interval</code> or <code>spec.cron</code></p>"},{"location":"specification/v1/check/#extra-fields","title":"Extra Fields","text":"<ul> <li>Extra fields at the resource level are FORBIDDEN</li> <li>Unknown fields MUST cause validation errors</li> <li>Each check kind MAY allow additional fields in its <code>spec</code></li> </ul>"},{"location":"specification/v1/check/#type-constraints","title":"Type Constraints","text":"<ul> <li><code>apiVersion</code> MUST be <code>v1</code> (literal string)</li> <li><code>kind</code> MUST be valid check kind (string)</li> <li><code>metadata.name</code> MUST be valid <code>CaseInsensitiveKey</code></li> <li><code>metadata.labels</code> MUST be string-to-string map</li> <li>All Time fields MUST match Time format</li> </ul>"},{"location":"specification/v1/check/#examples","title":"Examples","text":""},{"location":"specification/v1/check/#minimal-check","title":"Minimal Check","text":"<pre><code>apiVersion: v1\nkind: HttpCheck\nmetadata:\n  name: minimal-check\nspec:\n  url: https://example.com\n  interval: 1m\n  checks: []\n</code></pre>"},{"location":"specification/v1/check/#complete-check-with-all-common-fields","title":"Complete Check with All Common Fields","text":"<pre><code>apiVersion: v1\nkind: HttpCheck\nmetadata:\n  name: complete-check\n  title: \"Production API Health Monitor\"\n  labels:\n    environment: production\n    service: api\n    team: platform\nspec:\n  # Scheduling\n  interval: 30s\n\n  # Common fields\n  timeout: 10s\n  retries: 3\n  locations:\n    - us-east-1\n    - eu-west-1\n    - ap-southeast-1\n  channels:\n    - channel: pagerduty-oncall\n      severity: Critical\n    - channel: slack-monitoring\n      severity: High\n\n  # Check-specific fields\n  url: https://api.example.com/health\n  method: GET\n  checks:\n    - type: statusCode\n      operator: equals\n      value: 200\n</code></pre>"},{"location":"specification/v1/check/#check-with-labels","title":"Check with Labels","text":"<pre><code>apiVersion: v1\nkind: TcpCheck\nmetadata:\n  name: database-connectivity\n  title: \"Production Database Connectivity\"\n  labels:\n    environment: production\n    component: database\n    criticality: high\n    team: data\nspec:\n  host: db.example.com\n  port: 5432\n  interval: 1m\n  timeout: 5s\n  checks:\n    - type: reachable\n      operator: is\n      value: true\n</code></pre>"},{"location":"specification/v1/check/#conformance","title":"Conformance","text":"<p>Implementations claiming conformance with Synthetic Open Schema v1 MUST:</p> <ol> <li>Validate resource structure according to this specification</li> <li>Require all mandatory fields (apiVersion, kind, metadata, spec)</li> <li>Enforce mutual exclusion of interval/cron</li> <li>Apply default values for optional fields</li> <li>Reject extra fields at resource level</li> <li>Validate metadata.name as CaseInsensitiveKey</li> <li>Support common spec fields (timeout, retries, locations, channels)</li> </ol> <p>Implementations SHOULD: - Provide clear validation error messages - Generate unique resource keys - Support all standard check kinds - Document supported check kinds and features</p>"},{"location":"specification/v1/common/","title":"Common Types and Fields","text":"<p>Version: v1 Status: Stable</p>"},{"location":"specification/v1/common/#overview","title":"Overview","text":"<p>This document defines common types, fields, and concepts shared across all check kinds in Synthetic Open Schema v1.</p>"},{"location":"specification/v1/common/#time-format","title":"Time Format","text":"<p>Type: <code>Time</code></p> <p>Format: <code>^[0-9]+(ns|ms|s|m|h|d|w|mo|y)?$</code></p> <p>Description: A duration value expressed as an integer followed by an optional unit.</p> <p>Supported Units: - <code>ns</code> - Nanoseconds (fixed duration) - <code>ms</code> - Milliseconds (fixed duration) - <code>s</code> - Seconds (default if no unit specified, fixed duration) - <code>m</code> - Minutes (fixed duration) - <code>h</code> - Hours (fixed duration) - <code>d</code> - Days (fixed duration: 24 hours) - <code>w</code> - Weeks (fixed duration: 7 days) - <code>mo</code> - Months (calendar-based: varies 28-31 days) - <code>y</code> - Years (calendar-based: varies 365-366 days)</p> <p>Examples: <pre><code>timeout: 5s\ninterval: 1m\nduration: 500ms\n</code></pre></p> <p>Validation Rules: - MUST contain at least one digit - Unit is OPTIONAL; defaults to seconds - Value MUST be positive</p> <p>Calendar-Based Units (<code>mo</code>, <code>y</code>):</p> <p>Months and years are calendar-based, not fixed durations:</p> <ul> <li><code>mo</code> (months): Computed based on calendar months from reference timestamp</li> <li>Example: January 7 + 3mo = April 7 (regardless of actual days elapsed)</li> <li> <p>Handles month-end gracefully: January 31 + 1mo = February 28/29</p> </li> <li> <p><code>y</code> (years): Computed based on calendar years from reference timestamp</p> </li> <li>Example: January 7, 2024 + 1y = January 7, 2025</li> <li>Leap years handled automatically</li> </ul> <p>Reference Timestamp: The timestamp used for calendar calculation depends on context: - Scheduling (<code>interval</code>): Last execution or result timestamp - Assertions (<code>expirationTime</code>): Current time or certificate issue date</p> <p>Examples: <pre><code># Fixed duration - always 30 days\ninterval: 30d\n\n# Calendar-based - runs on same day each month\ninterval: 1mo\n\n# Certificate expires in 3 calendar months\nvalue: 3mo  # Jan 7 \u2192 April 7, Mar 31 \u2192 June 30\n</code></pre></p> <p>Usage: Used for fields where defaulting to seconds is intuitive (<code>timeout</code>, <code>interval</code>).</p>"},{"location":"specification/v1/common/#stricttime-format","title":"StrictTime Format","text":"<p>Type: <code>StrictTime</code></p> <p>Format: <code>^[0-9]+(ns|ms|s|m|h|d|w|mo|y)$</code></p> <p>Description: A duration value that REQUIRES an explicit unit suffix. Bare integers are NOT allowed.</p> <p>Supported Units: - <code>ns</code> - Nanoseconds (fixed duration) - <code>ms</code> - Milliseconds (fixed duration) - <code>s</code> - Seconds (fixed duration) - <code>m</code> - Minutes (fixed duration) - <code>h</code> - Hours (fixed duration) - <code>d</code> - Days (fixed duration: 24 hours) - <code>w</code> - Weeks (fixed duration: 7 days) - <code>mo</code> - Months (calendar-based: varies 28-31 days) - <code>y</code> - Years (calendar-based: varies 365-366 days)</p> <p>Examples: <pre><code># Valid\nvalue: 30d\nvalue: 500ms\nvalue: 5s\n\n# Invalid - unit required\nvalue: 30    # \u274c ERROR: unit suffix required\nvalue: 500   # \u274c ERROR: unit suffix required\n</code></pre></p> <p>Validation Rules: - MUST contain at least one digit - Unit suffix is REQUIRED (not optional) - Value MUST be positive - Bare integers are REJECTED</p> <p>Calendar-Based Units (<code>mo</code>, <code>y</code>):</p> <p>Same calendar semantics as <code>Time</code> type: - <code>3mo</code> = 3 calendar months from reference date (e.g., Jan 7 \u2192 April 7) - <code>1y</code> = 1 calendar year from reference date (e.g., Jan 7, 2024 \u2192 Jan 7, 2025)</p> <p>Rationale: Prevents ambiguity in contexts where defaulting to seconds would be confusing. For example, certificate expiration checks measure days, not seconds, so <code>value: 30</code> would be ambiguous without enforcing the unit.</p> <p>Usage: Used for assertion values where the appropriate unit may not be obvious (<code>expirationTime</code>, <code>duration</code> in assertions).</p>"},{"location":"specification/v1/common/#identifiers","title":"Identifiers","text":""},{"location":"specification/v1/common/#caseinsensitivekey","title":"CaseInsensitiveKey","text":"<p>Type: <code>CaseInsensitiveKey</code></p> <p>Format: <code>^[A-Za-z0-9\\-]+$</code></p> <p>Description: An identifier that is case-insensitive and contains only alphanumeric characters and hyphens.</p> <p>Constraints: - MUST contain at least one character - MUST match DNS subdomain naming rules - Automatically converted to lowercase - MAY contain hyphens - MUST NOT start or end with hyphen</p> <p>Examples: <pre><code>name: my-check\nname: prod-api-health\nname: checkout-flow-123\n</code></pre></p>"},{"location":"specification/v1/common/#dnshostname","title":"DNSHostname","text":"<p>Type: <code>DNSHostname</code></p> <p>Format: <code>^(([a-zA-Z0-9]+|([a-zA-Z0-9]+-*[a-zA-Z0-9]+))\\.)*[a-zA-Z0-9]+$</code></p> <p>Description: A valid DNS hostname.</p> <p>Constraints: - MUST be valid DNS format - Automatically converted to lowercase - Minimum length: 1 character - Maximum length: 253 characters</p> <p>Examples: <pre><code>host: example.com\nhost: api.example.com\nhost: localhost\n</code></pre></p>"},{"location":"specification/v1/common/#operators","title":"Operators","text":"<p>Operators define comparison operations used in assertions.</p>"},{"location":"specification/v1/common/#numericoperator","title":"NumericOperator","text":"<p>Used for: Status codes, sizes, numeric values</p> <p>Values: - <code>equals</code> - Exactly equal to value - <code>notEquals</code> - Not equal to value - <code>greaterThan</code> - Greater than value - <code>lessThan</code> - Less than value</p> <p>Example: <pre><code>- type: statusCode\n  operator: equals\n  value: 200\n</code></pre></p>"},{"location":"specification/v1/common/#stringoperator","title":"StringOperator","text":"<p>Used for: Body content, headers, text fields</p> <p>Values: - <code>equals</code> - Exact string match - <code>notEquals</code> - Does not match string - <code>contains</code> - Contains substring - <code>notContains</code> - Does not contain substring</p> <p>Example: <pre><code>- type: body\n  operator: contains\n  value: \"success\"\n</code></pre></p>"},{"location":"specification/v1/common/#booleanoperator","title":"BooleanOperator","text":"<p>Used for: Boolean and null comparisons (reachable, valid)</p> <p>Values: - <code>is</code> - Is exactly (true/false) - <code>isNot</code> - Is not (true/false) - <code>equals</code> - Equals (backward compatibility) - <code>notEquals</code> - Not equals (backward compatibility)</p> <p>Example: <pre><code>- type: reachable\n  operator: is\n  value: true\n</code></pre></p>"},{"location":"specification/v1/common/#listoperator","title":"ListOperator","text":"<p>Used for: List/array comparisons (nameservers, multiple values)</p> <p>Values: - <code>equals</code> - Exact match (order-independent set equality) - <code>contains</code> - All assertion values present in result (subset check) - <code>notContains</code> - No assertion values present in result</p> <p>Semantics:</p> <p><code>equals</code>: Result list MUST exactly match assertion list (order-independent) - Assertion: <code>[a, b]</code> matches result: <code>[b, a]</code> \u2705 - Assertion: <code>[a, b]</code> matches result: <code>[a]</code> \u274c (missing b) - Assertion: <code>[a, b]</code> matches result: <code>[a, b, c]</code> \u274c (extra c)</p> <p><code>contains</code>: Result list MUST contain ALL assertion values (may have more) - Assertion: <code>[a, b]</code> matches result: <code>[a, b]</code> \u2705 - Assertion: <code>[a, b]</code> matches result: <code>[a, b, c]</code> \u2705 (extra values ok) - Assertion: <code>[a, b]</code> matches result: <code>[a]</code> \u274c (missing b)</p> <p><code>notContains</code>: Result list MUST NOT contain ANY assertion values - Assertion: <code>[a, b]</code> matches result: <code>[c, d]</code> \u2705 (neither a nor b present) - Assertion: <code>[a, b]</code> matches result: <code>[a, c]</code> \u274c (a is present)</p> <p>Examples: <pre><code># Single value check (string syntax)\n- type: nameservers\n  operator: contains\n  value: ns1.cloudflare.com\n\n# Multiple values check (list syntax)\n- type: nameservers\n  operator: contains\n  value:\n    - ns1.cloudflare.com\n    - ns2.cloudflare.com\n\n# Exact match\n- type: nameservers\n  operator: equals\n  value:\n    - ns1.cloudflare.com\n    - ns2.cloudflare.com\n\n# Must NOT contain (single value)\n- type: nameservers\n  operator: notContains\n  value: ns1.oldprovider.net\n\n# Must NOT contain (multiple values)\n- type: nameservers\n  operator: notContains\n  value:\n    - ns1.oldprovider.net\n    - ns2.badactor.com\n</code></pre></p>"},{"location":"specification/v1/common/#base-assertion-types","title":"Base Assertion Types","text":"<p>All check-specific assertions extend these base types.</p>"},{"location":"specification/v1/common/#numericassertion","title":"NumericAssertion","text":"<p>Description: Base for numeric value assertions.</p> <p>Fields: - <code>operator</code>: <code>NumericOperator</code> (REQUIRED) - <code>value</code>: <code>integer</code> (REQUIRED)</p> <p>Used by: <code>statusCode</code>, <code>size</code>, numeric assertions</p> <p>Example: <pre><code>type: statusCode\noperator: equals\nvalue: 200\n</code></pre></p> <p>Validation: - Value MUST be an integer - Extra fields are FORBIDDEN</p>"},{"location":"specification/v1/common/#timebasedassertion","title":"TimebasedAssertion","text":"<p>Description: Base for time/duration assertions where unit suffix is required.</p> <p>Fields: - <code>operator</code>: <code>NumericOperator</code> (REQUIRED) - <code>value</code>: <code>StrictTime</code> (REQUIRED)</p> <p>Used by: <code>duration</code>, <code>latency</code>, <code>expirationTime</code> assertions</p> <p>Example: <pre><code>type: duration\noperator: lessThan\nvalue: 500ms\n</code></pre></p> <pre><code>type: expirationTime\noperator: greaterThan\nvalue: 30d\n</code></pre> <p>Validation: - Value MUST be <code>StrictTime</code> (unit suffix required) - Bare integers are REJECTED (e.g., <code>value: 30</code> is invalid) - MUST include unit: <code>30d</code>, <code>500ms</code>, <code>5s</code>, etc. - Extra fields are FORBIDDEN</p> <p>Rationale: Using <code>StrictTime</code> prevents ambiguity. For example, certificate expiration is measured in days, so <code>value: 30</code> would be confusing (30 seconds? 30 days?). Requiring <code>value: 30d</code> makes intent clear.</p>"},{"location":"specification/v1/common/#stringassertion","title":"StringAssertion","text":"<p>Description: Base for string content assertions.</p> <p>Fields: - <code>operator</code>: <code>StringOperator</code> (REQUIRED) - <code>value</code>: <code>string</code> (REQUIRED)</p> <p>Used by: <code>body</code>, text content assertions</p> <p>Example: <pre><code>type: body\noperator: contains\nvalue: \"OK\"\n</code></pre></p> <p>Validation: - Value MUST be a string - Extra fields are FORBIDDEN</p>"},{"location":"specification/v1/common/#keyvalueassertion","title":"KeyValueAssertion","text":"<p>Description: Base for key-value pair assertions (headers, query params).</p> <p>Fields: - <code>operator</code>: <code>StringOperator</code> (REQUIRED) - <code>name</code>: <code>string</code> (OPTIONAL) - <code>value</code>: <code>string</code> (REQUIRED)</p> <p>Behavior: - If <code>name</code> is NOT specified: Operations are against keys - If <code>name</code> IS specified: Operations are against the value of that key</p> <p>Used by: <code>header</code> assertions</p> <p>Examples:</p> <p>Check if header exists: <pre><code>type: header\noperator: contains\nvalue: \"Content-Type\"\n</code></pre></p> <p>Check header value: <pre><code>type: header\noperator: equals\nname: \"Content-Type\"\nvalue: \"application/json\"\n</code></pre></p> <p>Validation: - Extra fields are FORBIDDEN</p>"},{"location":"specification/v1/common/#booleanassertion","title":"BooleanAssertion","text":"<p>Description: Base for boolean/null assertions.</p> <p>Fields: - <code>operator</code>: <code>BooleanOperator</code> (REQUIRED) - <code>value</code>: <code>boolean</code> (REQUIRED)</p> <p>Used by: <code>reachable</code>, <code>valid</code>, boolean checks</p> <p>Example: <pre><code>type: reachable\noperator: is\nvalue: true\n</code></pre></p> <p>Validation: - Value MUST be boolean (true/false) - Extra fields are FORBIDDEN</p>"},{"location":"specification/v1/common/#listassertion","title":"ListAssertion","text":"<p>Description: Base for list/array value assertions.</p> <p>Fields: - <code>operator</code>: <code>ListOperator</code> (REQUIRED) - <code>value</code>: <code>string | array[string]</code> (REQUIRED)</p> <p>Used by: <code>nameservers</code>, multi-value assertions</p> <p>Operators: - <code>equals</code> - Exact list match (order-independent) - <code>contains</code> - All assertion values present in result - <code>notContains</code> - No assertion values present in result</p> <p>Value Type Handling:</p> <p>If <code>value</code> is a string (single value): - Automatically converted to single-element list: <code>\"a\"</code> \u2192 <code>[\"a\"]</code> - Syntactic sugar for common single-value checks - Semantically equivalent to <code>[\"a\"]</code></p> <p>If <code>value</code> is an array (multiple values): - Used as-is for multi-value checks - MUST NOT be empty</p> <p>Examples:</p> <p>Single nameserver check (string syntax): <pre><code>type: nameservers\noperator: contains\nvalue: ns1.cloudflare.com  # String - checks if this ONE nameserver is present\n</code></pre></p> <p>Single nameserver check (list syntax): <pre><code>type: nameservers\noperator: contains\nvalue:\n  - ns1.cloudflare.com  # Equivalent to above\n</code></pre></p> <p>Multiple nameservers check: <pre><code>type: nameservers\noperator: contains\nvalue:\n  - ns1.cloudflare.com\n  - ns2.cloudflare.com  # Checks if BOTH are present\n</code></pre></p> <p>Exact nameserver list match: <pre><code>type: nameservers\noperator: equals\nvalue:\n  - ns1.cloudflare.com\n  - ns2.cloudflare.com\n</code></pre></p> <p>Nameserver must NOT be present: <pre><code>type: nameservers\noperator: notContains\nvalue: ns1.oldprovider.net  # String - checks if this ONE nameserver is absent\n</code></pre></p> <p>Multiple nameservers must NOT be present: <pre><code>type: nameservers\noperator: notContains\nvalue:\n  - ns1.oldprovider.net\n  - ns2.badactor.com  # Checks if BOTH are absent\n</code></pre></p> <p>Validation: - Value MUST be a string OR an array of strings - If array, it MUST NOT be empty - If string, it MUST NOT be empty - Duplicate values in assertion list are normalized (treated as set) - Extra fields are FORBIDDEN</p> <p>Semantics:</p> <p>String to List Conversion: If <code>value</code> is a string, it is converted to a single-element list before comparison. - Assertion: <code>value: \"a\"</code> \u2192 internally becomes <code>value: [\"a\"]</code> - This is purely syntactic sugar for convenience</p> <p>Order Independence: List comparison is order-independent. <code>[a, b]</code> equals <code>[b, a]</code>.</p> <p>Comparison Behavior: - <code>equals</code>: Set equality check   - Result: <code>[ns1.cloudflare.com, ns2.cloudflare.com]</code> matches assertion: <code>[ns2.cloudflare.com, ns1.cloudflare.com]</code> \u2705   - Result: <code>[ns1.cloudflare.com]</code> matches assertion: <code>ns1.cloudflare.com</code> \u2705 (string converted to <code>[ns1.cloudflare.com]</code>)   - Result: <code>[ns1.cloudflare.com]</code> fails assertion: <code>[ns1.cloudflare.com, ns2.cloudflare.com]</code> \u274c   - Result: <code>[ns1.cloudflare.com, ns2.cloudflare.com, ns3.cloudflare.com]</code> fails assertion: <code>[ns1.cloudflare.com, ns2.cloudflare.com]</code> \u274c</p> <ul> <li><code>contains</code>: Subset check (assertion \u2286 result)</li> <li>Result: <code>[ns1.cloudflare.com, ns2.cloudflare.com]</code> matches assertion: <code>ns1.cloudflare.com</code> \u2705 (single value present)</li> <li>Result: <code>[ns1.cloudflare.com, ns2.cloudflare.com]</code> matches assertion: <code>[ns1.cloudflare.com]</code> \u2705</li> <li>Result: <code>[ns1.cloudflare.com, ns2.cloudflare.com, ns3.cloudflare.com]</code> matches assertion: <code>[ns1.cloudflare.com, ns2.cloudflare.com]</code> \u2705</li> <li> <p>Result: <code>[ns1.cloudflare.com]</code> fails assertion: <code>[ns1.cloudflare.com, ns2.cloudflare.com]</code> \u274c (missing ns2)</p> </li> <li> <p><code>notContains</code>: Disjoint check (assertion \u2229 result = \u2205)</p> </li> <li>Result: <code>[ns1.cloudflare.com, ns2.cloudflare.com]</code> matches assertion: <code>ns1.oldprovider.net</code> \u2705 (single value absent)</li> <li>Result: <code>[ns1.cloudflare.com, ns2.cloudflare.com]</code> matches assertion: <code>[ns1.oldprovider.net]</code> \u2705</li> <li>Result: <code>[ns1.cloudflare.com, ns2.cloudflare.com]</code> fails assertion: <code>ns1.cloudflare.com</code> \u274c (value is present)</li> <li>Result: <code>[ns1.cloudflare.com, ns2.cloudflare.com]</code> fails assertion: <code>[ns1.cloudflare.com, ns3.other.com]</code> \u274c (ns1.cloudflare.com present)</li> </ul> <p>Case Sensitivity: String comparisons are case-sensitive by default. <code>ns1.cloudflare.com</code> \u2260 <code>NS1.CLOUDFLARE.COM</code>.</p> <p>Normalization: Implementations MAY normalize values (e.g., lowercase DNS names) before comparison. If normalization is performed, it MUST be documented.</p>"},{"location":"specification/v1/common/#scheduling","title":"Scheduling","text":"<p>Checks MUST specify exactly one scheduling method: <code>interval</code> OR <code>cron</code>.</p>"},{"location":"specification/v1/common/#interval","title":"Interval","text":"<p>Type: <code>Time</code></p> <p>Description: Execute check at regular intervals.</p> <p>Example: <pre><code>interval: 1m\n</code></pre></p> <p>Validation: - MUST be valid <code>Time</code> format - MUST NOT be used with <code>cron</code></p>"},{"location":"specification/v1/common/#cron","title":"Cron","text":"<p>Type: <code>string</code></p> <p>Description: Execute check based on cron expression.</p> <p>Format: Standard cron format (5 or 6 fields)</p> <p>Example: <pre><code>cron: \"*/5 * * * *\"  # Every 5 minutes\n</code></pre></p> <p>Validation: - MUST be valid cron expression - MUST NOT be used with <code>interval</code> - Validated using croniter library semantics</p>"},{"location":"specification/v1/common/#common-spec-fields","title":"Common Spec Fields","text":"<p>These fields appear in the <code>spec</code> section of all check kinds.</p>"},{"location":"specification/v1/common/#timeout","title":"timeout","text":"<p>Type: <code>Time</code> Default: <code>1s</code> OPTIONAL</p> <p>Description: Maximum duration for check execution.</p> <p>Example: <pre><code>timeout: 5s\n</code></pre></p>"},{"location":"specification/v1/common/#retries","title":"retries","text":"<p>Type: <code>integer</code> Default: <code>1</code> OPTIONAL</p> <p>Description: Number of retry attempts on failure.</p> <p>Example: <pre><code>retries: 3\n</code></pre></p> <p>Validation: - MUST be positive integer</p>"},{"location":"specification/v1/common/#locations","title":"locations","text":"<p>Type: <code>array[string]</code> Default: <code>[]</code> OPTIONAL</p> <p>Description: List of geographic locations or execution environments where check should run.</p> <p>Example: <pre><code>locations:\n  - us-east-1\n  - eu-west-1\n  - ap-southeast-1\n</code></pre></p> <p>Semantics: - Empty list means run in default location - Location identifiers are implementation-specific - Check runs independently in each location</p>"},{"location":"specification/v1/common/#channels","title":"channels","text":"<p>Type: <code>array[object]</code> Default: <code>[]</code> OPTIONAL</p> <p>Description: Notification destinations for check results.</p> <p>Example: <pre><code>channels:\n  - channel: my-webhook-channel\n    severity: Critical\n  - channel: slack-alerts\n    severity: High\n</code></pre></p> <p>Fields: - <code>channel</code>: Identifier for notification channel - <code>severity</code>: Severity level (implementation-specific)</p> <p>Semantics: - Empty list means no notifications - Channel configuration is implementation-specific</p>"},{"location":"specification/v1/common/#validation-rules","title":"Validation Rules","text":""},{"location":"specification/v1/common/#extra-fields","title":"Extra Fields","text":"<p>All models in this specification use strict validation: - Extra fields are FORBIDDEN - Unknown fields MUST cause validation errors - Implementations SHOULD provide clear error messages</p>"},{"location":"specification/v1/common/#required-vs-optional","title":"Required vs Optional","text":"<ul> <li>Fields marked REQUIRED MUST be present</li> <li>Fields marked OPTIONAL MAY be omitted</li> <li>Default values apply when optional fields are omitted</li> </ul>"},{"location":"specification/v1/common/#mutually-exclusive","title":"Mutually Exclusive","text":"<p>Some fields are mutually exclusive: - <code>interval</code> and <code>cron</code> MUST NOT both be specified - Exactly one MUST be present</p> <p>Validation Error: <pre><code>Only one of interval or cron can be configured.\nEither interval or cron must be configured.\n</code></pre></p>"},{"location":"specification/v1/common/#conformance","title":"Conformance","text":"<p>Implementations claiming conformance with Synthetic Open Schema v1 MUST:</p> <ol> <li>Support all common types defined in this document</li> <li>Validate Time format according to specified pattern</li> <li>Enforce identifier constraints (CaseInsensitiveKey, DNSHostname)</li> <li>Implement all operators for their respective assertion types</li> <li>Validate mutually exclusive fields (interval/cron)</li> <li>Reject extra fields in strict mode</li> <li>Apply default values for optional fields</li> </ol> <p>Implementations SHOULD: - Provide clear error messages for validation failures - Support all common spec fields (timeout, retries, locations, channels) - Document which operators are supported for each assertion type</p>"},{"location":"specification/v1/dns/","title":"DNS Check","text":"<p>Version: v1 Kind: <code>DnsCheck</code> Status: Stable</p>"},{"location":"specification/v1/dns/#overview","title":"Overview","text":"<p>The DNS Check validates DNS resolution by querying DNS records for hostnames. It monitors record existence, values, and DNS resolution performance.</p> <p>Common Use Cases: - Domain DNS resolution monitoring - DNS propagation verification - DNS record value validation (IP addresses, MX records, TXT records) - DNS resolver health checks - SPF/DKIM/DMARC validation - Service discovery (SRV records) - Reverse DNS validation (PTR records) - DNS failover validation</p>"},{"location":"specification/v1/dns/#resource-structure","title":"Resource Structure","text":"<pre><code>apiVersion: v1\nkind: DnsCheck\nmetadata:\n  name: {check-name}\n  labels:\n    key: value\nspec:\n  hostname: example.com\n  recordType: A\n  resolver:  # optional custom DNS servers\n    - 8.8.8.8\n    - 1.1.1.1\n\n  # Scheduling (REQUIRED - one of)\n  interval: 5m\n  # OR\n  cron: \"0 */6 * * *\"\n\n  # Common fields (OPTIONAL)\n  timeout: 10s\n  retries: 3\n  locations:\n    - us-east-1\n  channels:\n    - channel: alerts\n      severity: High\n\n  # Assertions (REQUIRED)\n  checks:\n    - type: recordExists\n      operator: is\n      value: true\n    - type: recordValue\n      operator: contains\n      value: \"192.0.2.1\"\n</code></pre>"},{"location":"specification/v1/dns/#spec-fields","title":"Spec Fields","text":""},{"location":"specification/v1/dns/#hostname","title":"hostname","text":"<p>Type: <code>DNSHostname</code> REQUIRED</p> <p>Description: The hostname to query DNS records for.</p> <p>Examples: <pre><code>hostname: example.com\nhostname: www.example.com\nhostname: api.example.com\nhostname: mail.example.com\nhostname: _service._tcp.example.com  # SRV record\n</code></pre></p> <p>Validation: - MUST be valid DNS hostname - Automatically converted to lowercase - Maximum length: 253 characters - Labels separated by dots - Each label: 1-63 characters - Supports internationalized domain names (IDN)</p>"},{"location":"specification/v1/dns/#recordtype","title":"recordType","text":"<p>Type: <code>DnsRecordType</code> (enum) REQUIRED</p> <p>Description: The type of DNS record to query.</p> <p>Supported Record Types (14 types):</p> Type Description Example Value <code>A</code> IPv4 address <code>192.0.2.1</code> <code>AAAA</code> IPv6 address <code>2001:db8::1</code> <code>CNAME</code> Canonical name <code>www.example.com.</code> <code>ALIAS</code> Alias record <code>example.com.</code> <code>MX</code> Mail exchange <code>10 mail.example.com.</code> <code>NS</code> Name server <code>ns1.example.com.</code> <code>PTR</code> Pointer (reverse DNS) <code>example.com.</code> <code>SOA</code> Start of authority <code>ns1.example.com. admin.example.com. ...</code> <code>SRV</code> Service record <code>0 5 5060 sipserver.example.com.</code> <code>NAPTR</code> Naming authority pointer Complex format <code>TXT</code> Text record <code>\"v=spf1 include:_spf.example.com ~all\"</code> <code>SPF</code> Sender Policy Framework <code>\"v=spf1 mx ~all\"</code> <code>HINFO</code> Host information <code>\"PC-Intel-Core\" \"Linux\"</code> <code>CAA</code> Certificate authority authorization <code>0 issue \"letsencrypt.org\"</code> <p>Examples: <pre><code># IPv4 address\nrecordType: A\n\n# IPv6 address\nrecordType: AAAA\n\n# Mail server\nrecordType: MX\n\n# Text record (SPF, DKIM, etc.)\nrecordType: TXT\n\n# Name server\nrecordType: NS\n\n# Service discovery\nrecordType: SRV\n\n# Certificate authority authorization\nrecordType: CAA\n</code></pre></p> <p>Record Type Details:</p> <p>A (Address): IPv4 address <pre><code>example.com.  3600  IN  A  192.0.2.1\n</code></pre></p> <p>AAAA (IPv6 Address): IPv6 address <pre><code>example.com.  3600  IN  AAAA  2001:db8::1\n</code></pre></p> <p>CNAME (Canonical Name): Alias to another domain <pre><code>www.example.com.  3600  IN  CNAME  example.com.\n</code></pre></p> <p>MX (Mail Exchange): Mail server with priority <pre><code>example.com.  3600  IN  MX  10 mail.example.com.\nexample.com.  3600  IN  MX  20 mail2.example.com.\n</code></pre></p> <p>NS (Name Server): Authoritative name servers <pre><code>example.com.  3600  IN  NS  ns1.example.com.\nexample.com.  3600  IN  NS  ns2.example.com.\n</code></pre></p> <p>TXT (Text): Arbitrary text data (SPF, DKIM, DMARC, domain verification) <pre><code>example.com.  3600  IN  TXT  \"v=spf1 include:_spf.google.com ~all\"\nexample.com.  3600  IN  TXT  \"google-site-verification=...\"\n</code></pre></p> <p>SRV (Service): Service location <pre><code>_sip._tcp.example.com.  3600  IN  SRV  0 5 5060 sipserver.example.com.\nFormat: priority weight port target\n</code></pre></p> <p>CAA (Certificate Authority Authorization): Specify allowed CAs <pre><code>example.com.  3600  IN  CAA  0 issue \"letsencrypt.org\"\nexample.com.  3600  IN  CAA  0 issuewild \";\"\n</code></pre></p>"},{"location":"specification/v1/dns/#resolver","title":"resolver","text":"<p>Type: <code>array[IPvAnyAddress]</code> OPTIONAL Default: System default nameservers</p> <p>Description: Custom DNS servers to use for resolution. If not specified, uses system's default DNS resolvers.</p> <p>Examples: <pre><code># Google Public DNS\nresolver:\n  - 8.8.8.8\n  - 8.8.4.4\n\n# Cloudflare DNS\nresolver:\n  - 1.1.1.1\n  - 1.0.0.1\n\n# Quad9 DNS\nresolver:\n  - 9.9.9.9\n\n# Custom internal DNS\nresolver:\n  - 10.0.0.53\n\n# IPv6 resolvers\nresolver:\n  - 2001:4860:4860::8888  # Google\n  - 2606:4700:4700::1111  # Cloudflare\n</code></pre></p> <p>Common Public DNS Servers: - Google: <code>8.8.8.8</code>, <code>8.8.4.4</code> - Cloudflare: <code>1.1.1.1</code>, <code>1.0.0.1</code> - Quad9: <code>9.9.9.9</code>, <code>149.112.112.112</code> - OpenDNS: <code>208.67.222.222</code>, <code>208.67.220.220</code> - AdGuard: <code>94.140.14.14</code>, <code>94.140.15.15</code></p> <p>Use Cases: - Verify DNS propagation across different resolvers - Test authoritative nameservers directly - Validate internal DNS servers - Check DNS filtering/blocking - Test DNS failover</p>"},{"location":"specification/v1/dns/#checks","title":"checks","text":"<p>Type: <code>array[DnsAssertion]</code> REQUIRED</p> <p>Description: List of assertions to evaluate against DNS query results.</p> <p>Supported Assertion Types: 1. <code>recordExists</code> - Whether DNS records were found 2. <code>recordValue</code> - DNS record value matching</p> <p>See Assertions section for details.</p>"},{"location":"specification/v1/dns/#assertions","title":"Assertions","text":"<p>All DNS assertions validate properties of DNS query results.</p>"},{"location":"specification/v1/dns/#recordexists","title":"recordExists","text":"<p>Type: <code>BooleanAssertion</code></p> <p>Description: Assert on whether DNS records exist for the queried hostname and record type.</p> <p>Fields: - <code>type</code>: <code>\"recordExists\"</code> (REQUIRED) - <code>operator</code>: <code>BooleanOperator</code> (REQUIRED)   - <code>is</code>, <code>isNot</code> - <code>value</code>: <code>boolean</code> (REQUIRED)   - <code>true</code> - Records should exist   - <code>false</code> - Records should not exist</p> <p>Examples:</p> <p>Assert records exist: <pre><code>- type: recordExists\n  operator: is\n  value: true\n</code></pre></p> <p>Verify domain has A record: <pre><code>- type: recordExists\n  operator: isNot\n  value: false  # Expect records to exist\n</code></pre></p> <p>Assert no records (negative check): <pre><code>- type: recordExists\n  operator: is\n  value: false  # Expect NXDOMAIN or empty result\n</code></pre></p> <p>Semantics: - <code>true</code> means at least one DNS record was returned - <code>false</code> means no DNS records found (NXDOMAIN or empty result) - Check PASSES if assertion evaluates to true - Check FAILS if assertion evaluates to false</p> <p>Use Cases: - Positive check (<code>value: true</code>): Verify domain resolves - Negative check (<code>value: false</code>): Verify domain doesn't exist (expired, removed) - Availability monitoring: Ensure DNS is working</p>"},{"location":"specification/v1/dns/#recordvalue","title":"recordValue","text":"<p>Type: <code>StringAssertion</code></p> <p>Description: Assert on DNS record value content.</p> <p>Fields: - <code>type</code>: <code>\"recordValue\"</code> (REQUIRED) - <code>operator</code>: <code>StringOperator</code> (REQUIRED)   - <code>equals</code>, <code>notEquals</code>, <code>contains</code>, <code>notContains</code> - <code>value</code>: <code>string</code> (REQUIRED)</p> <p>Examples:</p> <p>Assert specific IP address: <pre><code>- type: recordValue\n  operator: equals\n  value: \"192.0.2.1\"\n</code></pre></p> <p>Assert IP in range (subnet): <pre><code>- type: recordValue\n  operator: contains\n  value: \"192.0.2.\"\n</code></pre></p> <p>Assert mail server: <pre><code>- type: recordValue\n  operator: contains\n  value: \"mail.example.com\"\n</code></pre></p> <p>Assert SPF record includes Google: <pre><code>- type: recordValue\n  operator: contains\n  value: \"include:_spf.google.com\"\n</code></pre></p> <p>Verify CAA allows Let's Encrypt: <pre><code>- type: recordValue\n  operator: contains\n  value: \"letsencrypt.org\"\n</code></pre></p> <p>Assert NOT using old IP: <pre><code>- type: recordValue\n  operator: notContains\n  value: \"203.0.113.1\"  # Old IP\n</code></pre></p> <p>Semantics: - Matching is case-sensitive by default - <code>contains</code> searches in ANY returned record - <code>equals</code> requires exact match with at least ONE record - Multiple records: assertion passes if ANY record matches - Check PASSES if record value assertion evaluates to true - Check FAILS if record value assertion evaluates to false</p> <p>Multi-Record Behavior:</p> <p>If DNS query returns multiple records: <pre><code>example.com.  IN  A  192.0.2.1\nexample.com.  IN  A  192.0.2.2\nexample.com.  IN  A  192.0.2.3\n</code></pre></p> <p>Then: - <code>contains: \"192.0.2.1\"</code> - PASSES (found in first record) - <code>contains: \"192.0.2\"</code> - PASSES (found in all records) - <code>equals: \"192.0.2.1\"</code> - PASSES (exact match with first record) - <code>notContains: \"192.0.2.4\"</code> - PASSES (not in any record)</p> <p>Record Format Examples:</p> <p>A/AAAA: IP address only <pre><code>192.0.2.1\n2001:db8::1\n</code></pre></p> <p>MX: Priority + mail server <pre><code>10 mail.example.com.\n20 mail2.example.com.\n</code></pre></p> <p>TXT: Quoted text <pre><code>\"v=spf1 include:_spf.example.com ~all\"\n\"google-site-verification=abc123...\"\n</code></pre></p> <p>SRV: Priority + weight + port + target <pre><code>0 5 5060 sipserver.example.com.\n</code></pre></p> <p>CNAME: Target domain <pre><code>www.example.com.\n</code></pre></p>"},{"location":"specification/v1/dns/#examples","title":"Examples","text":""},{"location":"specification/v1/dns/#basic-a-record-check","title":"Basic A Record Check","text":"<pre><code>apiVersion: v1\nkind: DnsCheck\nmetadata:\n  name: domain-a-record\n  title: \"Domain A Record Validation\"\n  labels:\n    environment: production\nspec:\n  hostname: example.com\n  recordType: A\n  interval: 5m\n  timeout: 5s\n  retries: 2\n  checks:\n    - type: recordExists\n      operator: is\n      value: true\n    - type: recordValue\n      operator: contains\n      value: \"192.0.2.\"  # Validate IP subnet\n  locations:\n    - us-east-1\n    - eu-west-1\n  channels:\n    - channel: dns-alerts\n      severity: Critical\n</code></pre>"},{"location":"specification/v1/dns/#mx-record-validation","title":"MX Record Validation","text":"<pre><code>apiVersion: v1\nkind: DnsCheck\nmetadata:\n  name: mail-server-mx\n  title: \"Mail Server MX Records\"\n  labels:\n    environment: production\n    service: email\nspec:\n  hostname: example.com\n  recordType: MX\n  interval: 1h\n  timeout: 5s\n  checks:\n    - type: recordExists\n      operator: is\n      value: true\n    - type: recordValue\n      operator: contains\n      value: \"mail.example.com\"\n  locations:\n    - us-east-1\n  channels:\n    - channel: email-alerts\n      severity: High\n</code></pre>"},{"location":"specification/v1/dns/#spf-record-validation","title":"SPF Record Validation","text":"<pre><code>apiVersion: v1\nkind: DnsCheck\nmetadata:\n  name: spf-record\n  title: \"SPF Record Validation\"\n  labels:\n    environment: production\n    security: true\nspec:\n  hostname: example.com\n  recordType: TXT\n  interval: 6h\n  timeout: 5s\n  checks:\n    - type: recordExists\n      operator: is\n      value: true\n    - type: recordValue\n      operator: contains\n      value: \"v=spf1\"\n    - type: recordValue\n      operator: contains\n      value: \"include:_spf.google.com\"\n  locations:\n    - us-east-1\n  channels:\n    - channel: security-alerts\n      severity: Medium\n</code></pre>"},{"location":"specification/v1/dns/#dns-propagation-check-multiple-resolvers","title":"DNS Propagation Check (Multiple Resolvers)","text":"<pre><code># Check Google DNS\napiVersion: v1\nkind: DnsCheck\nmetadata:\n  name: dns-propagation-google\n  title: \"DNS Propagation - Google DNS\"\nspec:\n  hostname: example.com\n  recordType: A\n  resolver:\n    - 8.8.8.8\n  interval: 5m\n  timeout: 5s\n  checks:\n    - type: recordExists\n      operator: is\n      value: true\n    - type: recordValue\n      operator: equals\n      value: \"192.0.2.1\"  # New IP\n---\n# Check Cloudflare DNS\napiVersion: v1\nkind: DnsCheck\nmetadata:\n  name: dns-propagation-cloudflare\n  title: \"DNS Propagation - Cloudflare DNS\"\nspec:\n  hostname: example.com\n  recordType: A\n  resolver:\n    - 1.1.1.1\n  interval: 5m\n  timeout: 5s\n  checks:\n    - type: recordExists\n      operator: is\n      value: true\n    - type: recordValue\n      operator: equals\n      value: \"192.0.2.1\"  # New IP\n</code></pre>"},{"location":"specification/v1/dns/#caa-record-validation","title":"CAA Record Validation","text":"<pre><code>apiVersion: v1\nkind: DnsCheck\nmetadata:\n  name: caa-letsencrypt\n  title: \"CAA Record - Let's Encrypt Authorization\"\n  labels:\n    environment: production\n    security: true\nspec:\n  hostname: example.com\n  recordType: CAA\n  interval: 24h\n  timeout: 5s\n  checks:\n    - type: recordExists\n      operator: is\n      value: true\n    - type: recordValue\n      operator: contains\n      value: \"letsencrypt.org\"\n  locations:\n    - us-east-1\n  channels:\n    - channel: security-alerts\n      severity: High\n</code></pre>"},{"location":"specification/v1/dns/#srv-record-check-service-discovery","title":"SRV Record Check (Service Discovery)","text":"<pre><code>apiVersion: v1\nkind: DnsCheck\nmetadata:\n  name: sip-service\n  title: \"SIP Service SRV Record\"\nspec:\n  hostname: _sip._tcp.example.com\n  recordType: SRV\n  interval: 10m\n  timeout: 5s\n  checks:\n    - type: recordExists\n      operator: is\n      value: true\n    - type: recordValue\n      operator: contains\n      value: \"sipserver.example.com\"\n  locations:\n    - us-east-1\n</code></pre>"},{"location":"specification/v1/dns/#ipv6-aaaa-record-check","title":"IPv6 (AAAA) Record Check","text":"<pre><code>apiVersion: v1\nkind: DnsCheck\nmetadata:\n  name: ipv6-address\n  title: \"IPv6 AAAA Record\"\n  labels:\n    environment: production\nspec:\n  hostname: www.example.com\n  recordType: AAAA\n  interval: 5m\n  timeout: 5s\n  checks:\n    - type: recordExists\n      operator: is\n      value: true\n    - type: recordValue\n      operator: contains\n      value: \"2001:db8:\"\n  locations:\n    - us-east-1\n</code></pre>"},{"location":"specification/v1/dns/#cname-record-validation","title":"CNAME Record Validation","text":"<pre><code>apiVersion: v1\nkind: DnsCheck\nmetadata:\n  name: www-cname\n  title: \"WWW CNAME Record\"\nspec:\n  hostname: www.example.com\n  recordType: CNAME\n  interval: 1h\n  timeout: 5s\n  checks:\n    - type: recordExists\n      operator: is\n      value: true\n    - type: recordValue\n      operator: contains\n      value: \"example.com\"\n  locations:\n    - us-east-1\n</code></pre>"},{"location":"specification/v1/dns/#ns-record-check","title":"NS Record Check","text":"<pre><code>apiVersion: v1\nkind: DnsCheck\nmetadata:\n  name: nameserver-records\n  title: \"Authoritative Nameservers\"\nspec:\n  hostname: example.com\n  recordType: NS\n  interval: 12h\n  timeout: 5s\n  checks:\n    - type: recordExists\n      operator: is\n      value: true\n    - type: recordValue\n      operator: contains\n      value: \"ns1.example.com\"\n    - type: recordValue\n      operator: contains\n      value: \"ns2.example.com\"\n  locations:\n    - us-east-1\n</code></pre>"},{"location":"specification/v1/dns/#domain-verification-txt-record","title":"Domain Verification TXT Record","text":"<pre><code>apiVersion: v1\nkind: DnsCheck\nmetadata:\n  name: google-verification\n  title: \"Google Domain Verification\"\nspec:\n  hostname: example.com\n  recordType: TXT\n  interval: 24h\n  timeout: 5s\n  checks:\n    - type: recordExists\n      operator: is\n      value: true\n    - type: recordValue\n      operator: contains\n      value: \"google-site-verification=\"\n  locations:\n    - us-east-1\n</code></pre>"},{"location":"specification/v1/dns/#validation-rules","title":"Validation Rules","text":""},{"location":"specification/v1/dns/#required-fields","title":"Required Fields","text":"<ul> <li><code>apiVersion</code> MUST be <code>\"v1\"</code></li> <li><code>kind</code> MUST be <code>\"DnsCheck\"</code></li> <li><code>metadata.name</code> MUST be valid <code>CaseInsensitiveKey</code></li> <li><code>spec.hostname</code> MUST be valid <code>DNSHostname</code></li> <li><code>spec.recordType</code> MUST be valid <code>DnsRecordType</code></li> <li><code>spec.checks</code> MUST be non-empty array</li> <li>One of <code>spec.interval</code> or <code>spec.cron</code> MUST be specified</li> </ul>"},{"location":"specification/v1/dns/#optional-fields","title":"Optional Fields","text":"<ul> <li><code>spec.resolver</code> defaults to system nameservers</li> <li><code>spec.timeout</code> defaults to <code>10s</code></li> <li><code>spec.retries</code> defaults to <code>1</code></li> <li><code>spec.locations</code> defaults to <code>[]</code></li> <li><code>spec.channels</code> defaults to <code>[]</code></li> </ul>"},{"location":"specification/v1/dns/#extra-fields","title":"Extra Fields","text":"<ul> <li>Extra fields are FORBIDDEN (<code>extra=\"forbid\"</code>)</li> <li>Unknown fields MUST cause validation errors</li> </ul>"},{"location":"specification/v1/dns/#execution-semantics","title":"Execution Semantics","text":""},{"location":"specification/v1/dns/#query-behavior","title":"Query Behavior","text":"<ol> <li>Runner selects nameserver (custom resolver or system default)</li> <li>Runner sends DNS query for <code>hostname</code> with <code>recordType</code></li> <li>Runner waits for DNS response</li> <li>Runner parses returned records</li> <li>Runner evaluates all assertions in <code>checks</code> array</li> <li>Check PASSES if all assertions pass</li> <li>Check FAILS if any assertion fails</li> </ol>"},{"location":"specification/v1/dns/#resolver-selection","title":"Resolver Selection","text":"<ul> <li>If <code>resolver</code> specified: Use first responsive resolver from list</li> <li>If <code>resolver</code> not specified: Use system's default nameservers</li> <li>Fallback to next resolver if first fails (implementation-defined)</li> </ul>"},{"location":"specification/v1/dns/#timeout-behavior","title":"Timeout Behavior","text":"<ul> <li>Timeout applies to total query execution time</li> <li>DNS query timeout: <code>timeout</code> value</li> <li>If timeout exceeded, check FAILS with timeout error</li> </ul>"},{"location":"specification/v1/dns/#error-conditions","title":"Error Conditions","text":"<p>Check FAILS if: - DNS query timeout - NXDOMAIN (domain does not exist) - SERVFAIL (server failure) - REFUSED (query refused) - No nameservers responsive - Any assertion evaluates to false - Network error occurs</p> <p>Common DNS Errors: - NXDOMAIN: Domain does not exist - SERVFAIL: DNS server encountered an error - TIMEOUT: No response within timeout period - REFUSED: Server refused the query - NODATA: Domain exists but no records of requested type</p>"},{"location":"specification/v1/dns/#retry-behavior","title":"Retry Behavior","text":"<ul> <li>Failed checks are retried up to <code>retries</code> times</li> <li>Retries occur immediately after failure</li> <li>If ANY attempt succeeds, check is considered successful</li> <li>Timeout applies to each individual attempt</li> </ul>"},{"location":"specification/v1/dns/#conformance","title":"Conformance","text":"<p>Implementations claiming DnsCheck conformance MUST:</p> <ol> <li>Support all record types: Implement all 14 DnsRecordType values</li> <li>Support custom resolvers: Accept <code>resolver</code> parameter with IPv4/IPv6 addresses</li> <li>Support all assertions: Implement recordExists and recordValue</li> <li>Evaluate all checks: Execute all assertions in <code>checks</code> array</li> <li>Fail on any assertion failure: Check fails if ANY assertion fails</li> <li>Handle timeouts: Respect <code>timeout</code> field</li> <li>Retry on failure: Implement retry logic according to <code>retries</code> field</li> <li>Parse DNS responses: Correctly parse all supported record types</li> </ol> <p>Implementations SHOULD: - Support multiple locations - Send notifications to configured channels - Provide detailed error messages (RCODE, error type) - Report TTL values - Report authoritative flag - Report which resolver was used - Cache DNS results appropriately</p>"},{"location":"specification/v1/dns/#security-considerations","title":"Security Considerations","text":""},{"location":"specification/v1/dns/#dns-cache-poisoning","title":"DNS Cache Poisoning","text":"<ul> <li>Use secure DNS resolvers (DNSSEC-enabled)</li> <li>Validate DNS responses</li> <li>Consider using DNS-over-HTTPS (DoH) or DNS-over-TLS (DoT)</li> </ul>"},{"location":"specification/v1/dns/#dns-privacy","title":"DNS Privacy","text":"<ul> <li>DNS queries may reveal monitoring targets</li> <li>Consider privacy implications of DNS queries</li> <li>Use encrypted DNS protocols when appropriate</li> </ul>"},{"location":"specification/v1/dns/#dnssec","title":"DNSSEC","text":"<ul> <li>Implementations SHOULD support DNSSEC validation</li> <li>Report DNSSEC validation status</li> <li>Fail checks on DNSSEC validation errors (configurable)</li> </ul>"},{"location":"specification/v1/dns/#dns-amplification","title":"DNS Amplification","text":"<ul> <li>Frequent DNS queries MAY be flagged as abuse</li> <li>Configure appropriate check frequency</li> <li>Document check sources for DNS operators</li> </ul>"},{"location":"specification/v1/dns/#performance-considerations","title":"Performance Considerations","text":""},{"location":"specification/v1/dns/#query-latency","title":"Query Latency","text":"<p>Typical DNS resolution times: - Cached: &lt; 1ms - Local network: 1-10ms - ISP DNS: 10-50ms - Public DNS: 10-100ms - Authoritative query: 50-200ms</p>"},{"location":"specification/v1/dns/#ttl-time-to-live","title":"TTL (Time to Live)","text":"<ul> <li>DNS records have TTL values (cache duration)</li> <li>Low TTL: More queries, higher load, faster updates</li> <li>High TTL: Fewer queries, lower load, slower updates</li> <li>Consider TTL when setting check frequency</li> </ul>"},{"location":"specification/v1/dns/#check-frequency","title":"Check Frequency","text":"<ul> <li>Critical domains: 1m - 5m</li> <li>Standard domains: 5m - 1h</li> <li>Non-critical domains: 1h - 24h</li> <li>Consider DNS server load</li> </ul>"},{"location":"specification/v1/dns/#resolver-performance","title":"Resolver Performance","text":"<p>Public DNS Latency (approximate): - Cloudflare (1.1.1.1): 10-30ms - Google (8.8.8.8): 15-40ms - Quad9 (9.9.9.9): 20-50ms</p>"},{"location":"specification/v1/dns/#implementation-notes","title":"Implementation Notes","text":""},{"location":"specification/v1/dns/#record-parsing","title":"Record Parsing","text":"<p>A/AAAA: Simple IP address string <pre><code>\"192.0.2.1\"\n\"2001:db8::1\"\n</code></pre></p> <p>MX: Priority + hostname <pre><code>\"10 mail.example.com.\"\n</code></pre></p> <p>TXT: Quoted strings (may have multiple) <pre><code>\"v=spf1 include:_spf.example.com ~all\"\n</code></pre></p> <p>SRV: Priority + weight + port + target <pre><code>\"0 5 5060 sipserver.example.com.\"\n</code></pre></p>"},{"location":"specification/v1/dns/#multiple-records","title":"Multiple Records","text":"<ul> <li>DNS queries often return multiple records</li> <li>Store all records in results</li> <li>Assertions evaluated against ALL records</li> <li>ANY record match = assertion passes</li> </ul>"},{"location":"specification/v1/dns/#dns-libraries","title":"DNS Libraries","text":"<p>Recommended libraries: - Python: <code>dnspython</code> - Go: <code>net</code> package, <code>miekg/dns</code> - Node.js: <code>dns</code> module, <code>dns-packet</code> - Java: <code>dnsjava</code></p>"},{"location":"specification/v1/dns/#related","title":"Related","text":"<ul> <li>Base Check Definition - Common check structure</li> <li>Common Types - Shared types and operators</li> <li>TcpCheck - TCP connection testing</li> <li>HttpCheck - HTTP endpoint checks</li> </ul>"},{"location":"specification/v1/dns/#changelog","title":"Changelog","text":""},{"location":"specification/v1/dns/#v1-current","title":"v1 (Current)","text":"<ul> <li>Initial stable release</li> <li>14 DNS record types supported</li> <li>Two assertion types: recordExists, recordValue</li> <li>Custom resolver support (IPv4/IPv6)</li> <li>Multi-location execution</li> </ul>"},{"location":"specification/v1/domain/","title":"DomainCheck Specification","text":"<p>API Version: <code>v1</code> Kind: <code>DomainCheck</code> Status: Stable</p>"},{"location":"specification/v1/domain/#overview","title":"Overview","text":"<p>DomainCheck monitors domain registration status, expiration, and configuration to prevent domain loss and detect unauthorized changes.</p> <p>Use Cases: - Domain expiration monitoring (prevent accidental loss) - DNS hijacking detection (nameserver changes) - Unauthorized transfer detection (registrar changes) - Domain lock verification (EPP status codes) - DNSSEC compliance monitoring</p> <p>Different from: - DnsCheck: Validates DNS resolution (A, MX, TXT records) - TlsCheck: Validates SSL/TLS certificates - DomainCheck: Validates domain registration and ownership</p>"},{"location":"specification/v1/domain/#table-of-contents","title":"Table of Contents","text":"<ul> <li>Resource Structure</li> <li>DomainCheckSpec</li> <li>Assertion Types</li> <li>ExpirationTimeAssertion</li> <li>NameserversAssertion</li> <li>RegistrarAssertion</li> <li>StatusAssertion</li> <li>DnssecAssertion</li> <li>Examples</li> <li>Implementation Notes</li> <li>Security Considerations</li> <li>Conformance</li> </ul>"},{"location":"specification/v1/domain/#resource-structure","title":"Resource Structure","text":"<pre><code>apiVersion: v1\nkind: DomainCheck\nmetadata:\n  name: example-com-registration\n  title: \"Example.com Domain Monitoring\"\n  labels:\n    domain: example.com\n    registrar: namecheap\nspec:\n  domain: example.com\n\n  checks:\n    - type: expirationTime\n      operator: greaterThan\n      value: 30d\n\n    - type: nameservers\n      operator: contains\n      value:\n        - ns1.cloudflare.com\n        - ns2.cloudflare.com\n\n    - type: registrar\n      operator: equals\n      value: \"Namecheap Inc\"\n\n    - type: status\n      operator: contains\n      value: clientTransferProhibited\n\n    - type: dnssec\n      operator: equals\n      value: signed\n\n  interval: 1d\n  timeout: 30s\n  retries: 2\n</code></pre>"},{"location":"specification/v1/domain/#domaincheckspec","title":"DomainCheckSpec","text":"<p>Specification for domain registration monitoring.</p>"},{"location":"specification/v1/domain/#fields","title":"Fields","text":"Field Type Required Default Description <code>domain</code> <code>DNSHostname</code> REQUIRED \u2014 Domain to monitor <code>checks</code> <code>DomainRegistrationAssertion[]</code> OPTIONAL <code>[]</code> Assertions to validate <code>interval</code> <code>Time</code> CONDITIONAL \u2014 Scheduling interval (mutually exclusive with <code>cron</code>) <code>cron</code> <code>Crontab</code> CONDITIONAL \u2014 Cron schedule (mutually exclusive with <code>interval</code>) <code>timeout</code> <code>Time</code> OPTIONAL <code>30s</code> Maximum execution time <code>retries</code> <code>integer</code> OPTIONAL <code>1</code> Number of retry attempts <code>locations</code> <code>string[]</code> OPTIONAL <code>[]</code> Execution locations <code>channels</code> <code>NotificationChannel[]</code> OPTIONAL <code>[]</code> Notification destinations"},{"location":"specification/v1/domain/#field-details","title":"Field Details","text":""},{"location":"specification/v1/domain/#domain","title":"<code>domain</code>","text":"<ul> <li>Type: <code>DNSHostname</code></li> <li>Required: REQUIRED</li> <li>Description: Domain name to monitor</li> <li>Constraints:</li> <li>MUST be valid DNS format</li> <li>MUST contain at least one dot (e.g., <code>example.com</code>)</li> <li>Bare TLDs not allowed (e.g., <code>com</code> is invalid)</li> <li>Automatically converted to lowercase</li> <li>Examples:</li> <li><code>example.com</code> \u2705</li> <li><code>subdomain.example.com</code> \u2705</li> <li><code>example-site.org</code> \u2705</li> <li><code>com</code> \u274c (bare TLD)</li> </ul>"},{"location":"specification/v1/domain/#checks","title":"<code>checks</code>","text":"<ul> <li>Type: Array of <code>DomainRegistrationAssertion</code></li> <li>Required: OPTIONAL</li> <li>Default: <code>[]</code> (empty array)</li> <li>Description: Assertions to validate against domain registration data</li> <li>Note: Empty checks array is valid (monitoring-only mode, no assertions)</li> </ul>"},{"location":"specification/v1/domain/#common-fields","title":"Common Fields","text":"<p>DomainCheck inherits common scheduling and execution fields from base <code>CheckSpec</code>: - See v1/check.md for <code>interval</code>, <code>cron</code>, <code>timeout</code>, <code>retries</code>, <code>locations</code>, <code>channels</code></p>"},{"location":"specification/v1/domain/#scheduling-recommendation","title":"Scheduling Recommendation","text":"<p>Recommended: <code>interval: 1d</code> (check daily)</p> <p>Rationale: - WHOIS servers have aggressive rate limits (typically 1-10 queries/minute) - Domain data changes infrequently (days/weeks, not hours) - Daily checks provide sufficient detection time for most threats - More frequent checks may result in IP blocking</p>"},{"location":"specification/v1/domain/#assertion-types","title":"Assertion Types","text":"<p>DomainCheck supports five assertion types for validating domain registration data.</p> <p>All assertions extend base assertion types defined in v1/common.md.</p>"},{"location":"specification/v1/domain/#expirationtimeassertion","title":"ExpirationTimeAssertion","text":"<p>Assert on days until domain expiration.</p> <p>Extends: <code>TimebasedAssertion</code></p>"},{"location":"specification/v1/domain/#fields_1","title":"Fields","text":"Field Type Required Description <code>type</code> <code>\"expirationTime\"</code> REQUIRED Assertion type discriminator <code>operator</code> <code>NumericOperator</code> REQUIRED Comparison operator <code>value</code> <code>StrictTime</code> REQUIRED Time threshold with unit"},{"location":"specification/v1/domain/#supported-operators","title":"Supported Operators","text":"<ul> <li><code>equals</code> - Exact time match (rarely useful)</li> <li><code>notEquals</code> - Not equal (rarely useful)</li> <li><code>greaterThan</code> - Greater than (most common)</li> <li><code>greaterThanOrEquals</code> - Greater than or equal</li> <li><code>lessThan</code> - Less than</li> <li><code>lessThanOrEquals</code> - Less than or equal</li> </ul>"},{"location":"specification/v1/domain/#semantics","title":"Semantics","text":"<ul> <li>Measures time from current date to domain expiration date</li> <li>Uses calendar-based calculation for units like <code>mo</code> (months) and <code>y</code> (years)</li> <li>Most common: <code>operator: greaterThan</code> (alert if less than threshold)</li> </ul>"},{"location":"specification/v1/domain/#common-thresholds","title":"Common Thresholds","text":"Threshold Use Case <code>30d</code> Standard warning (1 month) <code>60d</code> Early warning (2 months) <code>90d</code> Very early warning (3 months) <code>1y</code> Annual renewal reminder"},{"location":"specification/v1/domain/#examples","title":"Examples","text":"<pre><code># Alert if domain expires in less than 30 days\n- type: expirationTime\n  operator: greaterThan\n  value: 30d\n\n# Alert if domain expires in less than 90 days\n- type: expirationTime\n  operator: greaterThan\n  value: 90d\n\n# Alert if domain expires in less than 1 year\n- type: expirationTime\n  operator: greaterThan\n  value: 1y\n</code></pre>"},{"location":"specification/v1/domain/#nameserversassertion","title":"NameserversAssertion","text":"<p>Assert on authoritative nameservers for the domain.</p> <p>Extends: <code>ListAssertion</code></p>"},{"location":"specification/v1/domain/#fields_2","title":"Fields","text":"Field Type Required Description <code>type</code> <code>\"nameservers\"</code> REQUIRED Assertion type discriminator <code>operator</code> <code>ListOperator</code> REQUIRED Comparison operator <code>value</code> <code>string \\| string[]</code> REQUIRED Nameserver(s) to check"},{"location":"specification/v1/domain/#supported-operators_1","title":"Supported Operators","text":"<ul> <li><code>equals</code> - Exact nameserver list match (order-independent)</li> <li><code>contains</code> - All specified nameservers present (most common)</li> <li><code>notContains</code> - No specified nameservers present</li> </ul>"},{"location":"specification/v1/domain/#semantics_1","title":"Semantics","text":"<ul> <li>Checks authoritative nameservers returned by WHOIS/RDAP</li> <li>Comparison is case-insensitive (<code>ns1.example.com</code> == <code>NS1.EXAMPLE.COM</code>)</li> <li>Order is not significant</li> <li>Trailing dots are normalized (removed)</li> </ul>"},{"location":"specification/v1/domain/#value-format","title":"Value Format","text":"<p>Single nameserver (string): <pre><code>value: ns1.cloudflare.com\n</code></pre></p> <p>Multiple nameservers (list): <pre><code>value:\n  - ns1.cloudflare.com\n  - ns2.cloudflare.com\n</code></pre></p>"},{"location":"specification/v1/domain/#examples_1","title":"Examples","text":"<pre><code># Verify at least one Cloudflare nameserver is present\n- type: nameservers\n  operator: contains\n  value: ns1.cloudflare.com\n\n# Verify both Cloudflare nameservers are present\n- type: nameservers\n  operator: contains\n  value:\n    - hope.ns.cloudflare.com\n    - jeff.ns.cloudflare.com\n\n# Exact nameserver list match\n- type: nameservers\n  operator: equals\n  value:\n    - ns1.example.com\n    - ns2.example.com\n\n# Alert if old provider nameservers are still present\n- type: nameservers\n  operator: notContains\n  value:\n    - ns1.oldprovider.net\n    - ns2.oldprovider.net\n\n# Ensure specific nameserver is NOT present (security)\n- type: nameservers\n  operator: notContains\n  value: ns1.malicious.example\n</code></pre>"},{"location":"specification/v1/domain/#registrarassertion","title":"RegistrarAssertion","text":"<p>Assert on domain registrar.</p> <p>Extends: <code>StringAssertion</code></p>"},{"location":"specification/v1/domain/#fields_3","title":"Fields","text":"Field Type Required Description <code>type</code> <code>\"registrar\"</code> REQUIRED Assertion type discriminator <code>operator</code> <code>StringOperator</code> REQUIRED Comparison operator <code>value</code> <code>string</code> REQUIRED Registrar name or pattern"},{"location":"specification/v1/domain/#supported-operators_2","title":"Supported Operators","text":"<ul> <li><code>equals</code> - Exact registrar name match (most common)</li> <li><code>notEquals</code> - Not equal to registrar</li> <li><code>contains</code> - Contains substring (flexible matching)</li> <li><code>notContains</code> - Does not contain substring</li> </ul>"},{"location":"specification/v1/domain/#semantics_2","title":"Semantics","text":"<ul> <li>Checks the registrar name returned by WHOIS/RDAP</li> <li>Registrar names may vary slightly by data source</li> <li>Case-sensitive by default (use <code>contains</code> for flexible matching)</li> </ul>"},{"location":"specification/v1/domain/#registrar-name-variations","title":"Registrar Name Variations","text":"<p>Registrar names may include suffixes like: - <code>\"Namecheap Inc\"</code> - <code>\"NAMECHEAP INC\"</code> - <code>\"Namecheap, Inc.\"</code></p> <p>Use <code>contains</code> operator for flexible matching.</p>"},{"location":"specification/v1/domain/#examples_2","title":"Examples","text":"<pre><code># Exact registrar match\n- type: registrar\n  operator: equals\n  value: \"Namecheap Inc\"\n\n# Flexible matching (case variations)\n- type: registrar\n  operator: contains\n  value: \"Namecheap\"\n\n# Alert if registrar changes\n- type: registrar\n  operator: notEquals\n  value: \"Unknown Registrar LLC\"\n\n# Ensure domain is NOT with specific registrar\n- type: registrar\n  operator: notContains\n  value: \"BadRegistrar\"\n</code></pre>"},{"location":"specification/v1/domain/#statusassertion","title":"StatusAssertion","text":"<p>Assert on EPP status codes (domain lock status, transfer status, etc.).</p> <p>Extends: <code>ListAssertion</code></p>"},{"location":"specification/v1/domain/#fields_4","title":"Fields","text":"Field Type Required Description <code>type</code> <code>\"status\"</code> REQUIRED Assertion type discriminator <code>operator</code> <code>ListOperator</code> REQUIRED Comparison operator <code>value</code> <code>string \\| string[]</code> REQUIRED EPP status code(s)"},{"location":"specification/v1/domain/#supported-operators_3","title":"Supported Operators","text":"<ul> <li><code>equals</code> - Exact status list match</li> <li><code>contains</code> - All specified statuses present (most common)</li> <li><code>notContains</code> - No specified statuses present</li> </ul>"},{"location":"specification/v1/domain/#semantics_3","title":"Semantics","text":"<ul> <li>Checks EPP (Extensible Provisioning Protocol) status codes</li> <li>Status codes indicate domain state (locked, transferring, redemption, etc.)</li> <li>Implementations MUST normalize status codes (strip URLs and whitespace)</li> </ul>"},{"location":"specification/v1/domain/#status-code-normalization","title":"Status Code Normalization","text":"<p>WHOIS returns status codes with URLs: <pre><code>Input:  \"clientTransferProhibited https://icann.org/epp#clientTransferProhibited\"\nOutput: \"clientTransferProhibited\"\n</code></pre></p> <p>Implementations MUST: 1. Strip URLs (everything after first space) 2. Trim whitespace 3. Compare normalized values</p>"},{"location":"specification/v1/domain/#common-epp-status-codes","title":"Common EPP Status Codes","text":"Status Code Description Security Level <code>ok</code> No restrictions Normal <code>clientTransferProhibited</code> Transfer locked \ud83d\udd12 Secure <code>clientUpdateProhibited</code> Update locked \ud83d\udd12 Secure <code>clientDeleteProhibited</code> Delete locked \ud83d\udd12 Secure <code>serverTransferProhibited</code> Registrar transfer lock \ud83d\udd12 Secure <code>serverUpdateProhibited</code> Registrar update lock \ud83d\udd12 Secure <code>serverDeleteProhibited</code> Registrar delete lock \ud83d\udd12 Secure <code>addPeriod</code> Recently registered (grace period) \u2139\ufe0f Info <code>autoRenewPeriod</code> Auto-renewal period \u2139\ufe0f Info <code>renewPeriod</code> Recently renewed (grace period) \u2139\ufe0f Info <code>transferPeriod</code> Recently transferred (grace period) \u2139\ufe0f Info <code>redemptionPeriod</code> Deleted, can be restored \u26a0\ufe0f CRITICAL <code>pendingDelete</code> About to be permanently deleted \u26a0\ufe0f CRITICAL <code>pendingTransfer</code> Transfer in progress \u2139\ufe0f Info"},{"location":"specification/v1/domain/#value-format_1","title":"Value Format","text":"<p>Single status (string): <pre><code>value: clientTransferProhibited\n</code></pre></p> <p>Multiple statuses (list): <pre><code>value:\n  - clientTransferProhibited\n  - clientUpdateProhibited\n  - clientDeleteProhibited\n</code></pre></p>"},{"location":"specification/v1/domain/#examples_3","title":"Examples","text":"<pre><code># Verify domain is locked against transfers\n- type: status\n  operator: contains\n  value: clientTransferProhibited\n\n# Verify domain has all locks\n- type: status\n  operator: contains\n  value:\n    - clientTransferProhibited\n    - clientUpdateProhibited\n    - clientDeleteProhibited\n\n# CRITICAL: Alert if domain enters redemption period\n- type: status\n  operator: notContains\n  value: redemptionPeriod\n\n# CRITICAL: Alert if domain pending deletion\n- type: status\n  operator: notContains\n  value: pendingDelete\n\n# Alert if domain is being transferred\n- type: status\n  operator: notContains\n  value: pendingTransfer\n\n# Verify domain is in normal state\n- type: status\n  operator: contains\n  value: ok\n</code></pre>"},{"location":"specification/v1/domain/#dnssecassertion","title":"DnssecAssertion","text":"<p>Assert on DNSSEC (Domain Name System Security Extensions) status.</p> <p>Extends: <code>StringAssertion</code></p>"},{"location":"specification/v1/domain/#fields_5","title":"Fields","text":"Field Type Required Description <code>type</code> <code>\"dnssec\"</code> REQUIRED Assertion type discriminator <code>operator</code> <code>StringOperator</code> REQUIRED Comparison operator <code>value</code> <code>string</code> REQUIRED DNSSEC status value"},{"location":"specification/v1/domain/#supported-operators_4","title":"Supported Operators","text":"<ul> <li><code>equals</code> - Exact status match (most common)</li> <li><code>notEquals</code> - Not equal to status</li> </ul>"},{"location":"specification/v1/domain/#semantics_4","title":"Semantics","text":"<ul> <li>Checks DNSSEC signing status returned by WHOIS/RDAP</li> <li>DNSSEC provides cryptographic authentication for DNS responses</li> <li>Enabling DNSSEC is a security best practice</li> </ul>"},{"location":"specification/v1/domain/#dnssec-status-values","title":"DNSSEC Status Values","text":"Value Description <code>unsigned</code> DNSSEC not enabled (most common) <code>signed</code> DNSSEC enabled <code>signedDelegation</code> DNSSEC signed delegation <p>Note: Some registrars/TLDs may return different values. Check implementation documentation.</p>"},{"location":"specification/v1/domain/#examples_4","title":"Examples","text":"<pre><code># Ensure DNSSEC is enabled\n- type: dnssec\n  operator: equals\n  value: signed\n\n# Ensure DNSSEC is NOT disabled\n- type: dnssec\n  operator: notEquals\n  value: unsigned\n\n# Alert if DNSSEC becomes unsigned\n- type: dnssec\n  operator: equals\n  value: signed\n</code></pre>"},{"location":"specification/v1/domain/#examples_5","title":"Examples","text":""},{"location":"specification/v1/domain/#example-1-basic-domain-expiration-monitoring","title":"Example 1: Basic Domain Expiration Monitoring","text":"<pre><code>apiVersion: v1\nkind: DomainCheck\nmetadata:\n  name: example-com-basic\n  title: \"Example.com Basic Monitoring\"\nspec:\n  domain: example.com\n\n  checks:\n    # Alert if domain expires in less than 30 days\n    - type: expirationTime\n      operator: greaterThan\n      value: 30d\n\n  interval: 1d\n  timeout: 30s\n\n  channels:\n    - channel: email-alerts\n      severity: Critical\n</code></pre>"},{"location":"specification/v1/domain/#example-2-comprehensive-domain-security","title":"Example 2: Comprehensive Domain Security","text":"<pre><code>apiVersion: v1\nkind: DomainCheck\nmetadata:\n  name: syntheticopenschema-org\n  title: \"SyntheticOpenSchema.org Domain Security\"\n  labels:\n    domain: syntheticopenschema.org\n    registrar: namecheap\n    criticality: high\nspec:\n  domain: syntheticopenschema.org\n\n  checks:\n    # Expiration: Alert if less than 30 days\n    - type: expirationTime\n      operator: greaterThan\n      value: 30d\n\n    # Nameservers: Verify Cloudflare DNS\n    - type: nameservers\n      operator: contains\n      value:\n        - hope.ns.cloudflare.com\n        - jeff.ns.cloudflare.com\n\n    # Registrar: Verify still with Namecheap\n    - type: registrar\n      operator: contains\n      value: \"NAMECHEAP\"\n\n    # Security: Verify domain is locked\n    - type: status\n      operator: contains\n      value: clientTransferProhibited\n\n    # Security: Alert if entering redemption\n    - type: status\n      operator: notContains\n      value: redemptionPeriod\n\n    # Best practice: Verify DNSSEC enabled\n    - type: dnssec\n      operator: equals\n      value: signed\n\n  interval: 1d\n  timeout: 30s\n  retries: 2\n\n  locations:\n    - us-east-1\n\n  channels:\n    - channel: pagerduty-infrastructure\n      severity: Critical\n    - channel: slack-infrastructure\n      severity: High\n</code></pre>"},{"location":"specification/v1/domain/#example-3-detect-unauthorized-changes","title":"Example 3: Detect Unauthorized Changes","text":"<pre><code>apiVersion: v1\nkind: DomainCheck\nmetadata:\n  name: company-com-security\n  title: \"Company.com Unauthorized Change Detection\"\nspec:\n  domain: company.com\n\n  checks:\n    # Detect nameserver hijacking\n    - type: nameservers\n      operator: equals\n      value:\n        - ns1.company-dns.com\n        - ns2.company-dns.com\n\n    # Detect unauthorized transfer\n    - type: registrar\n      operator: equals\n      value: \"GoDaddy LLC\"\n\n    # Verify domain remains locked\n    - type: status\n      operator: contains\n      value:\n        - clientTransferProhibited\n        - clientUpdateProhibited\n        - clientDeleteProhibited\n\n  interval: 1d\n\n  channels:\n    - channel: security-alerts\n      severity: Critical\n</code></pre>"},{"location":"specification/v1/domain/#example-4-multi-domain-fleet-monitoring","title":"Example 4: Multi-Domain Fleet Monitoring","text":"<pre><code># Check 1: Primary domain\napiVersion: v1\nkind: DomainCheck\nmetadata:\n  name: example-com\n  labels:\n    fleet: production\n    priority: critical\nspec:\n  domain: example.com\n  checks:\n    - type: expirationTime\n      operator: greaterThan\n      value: 30d\n    - type: status\n      operator: contains\n      value: clientTransferProhibited\n  interval: 1d\n  channels:\n    - channel: ops-critical\n      severity: Critical\n\n---\n\n# Check 2: API domain\napiVersion: v1\nkind: DomainCheck\nmetadata:\n  name: api-example-com\n  labels:\n    fleet: production\n    priority: high\nspec:\n  domain: api.example.com\n  checks:\n    - type: expirationTime\n      operator: greaterThan\n      value: 30d\n    - type: nameservers\n      operator: contains\n      value:\n        - ns1.cloudflare.com\n  interval: 1d\n  channels:\n    - channel: ops-high\n      severity: High\n\n---\n\n# Check 3: Staging domain\napiVersion: v1\nkind: DomainCheck\nmetadata:\n  name: staging-example-com\n  labels:\n    fleet: staging\n    priority: medium\nspec:\n  domain: staging.example.com\n  checks:\n    - type: expirationTime\n      operator: greaterThan\n      value: 14d\n  interval: 1d\n  channels:\n    - channel: ops-medium\n      severity: Medium\n</code></pre>"},{"location":"specification/v1/domain/#example-5-redemption-period-emergency-detection","title":"Example 5: Redemption Period Emergency Detection","text":"<pre><code>apiVersion: v1\nkind: DomainCheck\nmetadata:\n  name: critical-domain-emergency\n  title: \"Critical Domain Emergency Monitoring\"\nspec:\n  domain: critical-business.com\n\n  checks:\n    # CRITICAL: Alert immediately if domain enters redemption\n    - type: status\n      operator: notContains\n      value: redemptionPeriod\n\n    # CRITICAL: Alert if domain pending deletion\n    - type: status\n      operator: notContains\n      value: pendingDelete\n\n    # Standard: Check expiration\n    - type: expirationTime\n      operator: greaterThan\n      value: 60d\n\n  interval: 1d\n  timeout: 30s\n  retries: 3\n\n  locations:\n    - us-east-1\n    - us-west-2\n\n  channels:\n    - channel: pagerduty-critical\n      severity: Critical\n    - channel: sms-ceo\n      severity: Critical\n</code></pre>"},{"location":"specification/v1/domain/#example-6-dnssec-compliance-monitoring","title":"Example 6: DNSSEC Compliance Monitoring","text":"<pre><code>apiVersion: v1\nkind: DomainCheck\nmetadata:\n  name: secure-domain-dnssec\n  title: \"Secure Domain DNSSEC Compliance\"\n  labels:\n    compliance: pci-dss\n    security: high\nspec:\n  domain: secure.example.com\n\n  checks:\n    # Compliance: Ensure DNSSEC is enabled\n    - type: dnssec\n      operator: equals\n      value: signed\n\n    # Security: Verify locks\n    - type: status\n      operator: contains\n      value:\n        - clientTransferProhibited\n        - serverTransferProhibited\n\n    # Operational: Check expiration\n    - type: expirationTime\n      operator: greaterThan\n      value: 90d\n\n  interval: 1d\n\n  channels:\n    - channel: compliance-alerts\n      severity: High\n</code></pre>"},{"location":"specification/v1/domain/#implementation-notes","title":"Implementation Notes","text":""},{"location":"specification/v1/domain/#data-sources","title":"Data Sources","text":"<p>Implementations may obtain domain registration data from:</p> <p>WHOIS (RFC 3912) - Traditional protocol - Pros: Universal support, simple text-based - Cons: Inconsistent formats, aggressive rate limiting, parsing complexity - Libraries: <code>python-whois</code>, <code>whois</code> (Ruby), <code>whoiser</code> (Node.js)</p> <p>RDAP (RFC 7480) - Modern alternative - Pros: Structured JSON, standardized format, better rate limits, authentication support - Cons: Not universally adopted yet, requires per-TLD RDAP server discovery - Libraries: <code>rdap</code> (Python), <code>rdap-client</code> (Node.js)</p> <p>Registrar APIs - Direct access - Pros: Most accurate, highest rate limits, authenticated access, real-time data - Cons: Implementation-specific, requires credentials, not portable - Examples: Namecheap API, Cloudflare API, GoDaddy API</p> <p>Recommendations: 1. Prefer RDAP when available (modern, structured) 2. Fall back to WHOIS for unsupported TLDs 3. Document which data source is used 4. Implement caching to reduce query load</p>"},{"location":"specification/v1/domain/#data-normalization","title":"Data Normalization","text":""},{"location":"specification/v1/domain/#expiration-date","title":"Expiration Date","text":"<ul> <li>WHOIS may return multiple date values (duplicates with varying precision)</li> <li>Implementations SHOULD use the first value or most precise value</li> <li>Handle timezone information appropriately</li> <li>Parse formats: ISO 8601, RFC 3339, locale-specific formats</li> </ul>"},{"location":"specification/v1/domain/#nameservers","title":"Nameservers","text":"<ul> <li>WHOIS returns nameservers as list of strings</li> <li>Comparison MUST be case-insensitive</li> <li>Remove trailing dots if present (<code>ns1.example.com.</code> \u2192 <code>ns1.example.com</code>)</li> <li>Order is not significant (set comparison)</li> </ul>"},{"location":"specification/v1/domain/#registrar","title":"Registrar","text":"<ul> <li>Registrar names vary by source (case, punctuation, suffixes)</li> <li>Consider using <code>contains</code> operator for flexible matching</li> <li>Examples: <code>\"Namecheap Inc\"</code>, <code>\"NAMECHEAP INC\"</code>, <code>\"Namecheap, Inc.\"</code></li> </ul>"},{"location":"specification/v1/domain/#epp-status-codes","title":"EPP Status Codes","text":"<ul> <li>WHOIS appends URLs to status codes</li> <li>MUST normalize: Strip everything after first space</li> <li>Input: <code>\"clientTransferProhibited https://icann.org/epp#clientTransferProhibited\"</code></li> <li>Output: <code>\"clientTransferProhibited\"</code></li> <li>Case-sensitive comparison</li> </ul>"},{"location":"specification/v1/domain/#dnssec","title":"DNSSEC","text":"<ul> <li>Common values: <code>\"signed\"</code>, <code>\"unsigned\"</code>, <code>\"signedDelegation\"</code></li> <li>Case-sensitive comparison</li> <li>Some TLDs may not return DNSSEC information</li> </ul>"},{"location":"specification/v1/domain/#privacy-protection","title":"Privacy Protection","text":"<p>Many domains use privacy/proxy services: - Personal information (name, email, address) is redacted - Example: <code>\"Redacted for Privacy\"</code>, <code>\"WHOIS Privacy Protection Service\"</code> - Available data: expiration date, nameservers, registrar, status, DNSSEC - Unavailable data: registrant name, contact emails, physical address</p> <p>This is why DomainCheck focuses on public, non-personal data.</p>"},{"location":"specification/v1/domain/#rate-limiting","title":"Rate Limiting","text":"<p>WHOIS servers impose strict rate limits: - Typical: 1-10 queries per minute per IP address - Violation: Temporary IP blocking (minutes to hours) - RDAP: Generally higher limits, varies by registry - Registrar APIs: Highest limits, token-based</p> <p>Recommendations: 1. Minimum interval: <code>1d</code> (24 hours) to respect rate limits 2. Implement caching: Cache results for at least 23 hours 3. Exponential backoff: On rate limit errors, back off exponentially 4. Distributed checking: Use multiple source IPs if checking many domains 5. Document limits: Clearly document rate limit behavior</p>"},{"location":"specification/v1/domain/#whois-data-freshness","title":"WHOIS Data Freshness","text":"<p>WHOIS data propagation: - Registrar updates may take 24-48 hours to propagate - WHOIS servers cache data (TTLs vary) - Recent changes may not appear immediately</p> <p>Recommendations: 1. Don't alert on single-check anomalies 2. Consider grace periods before alerting (2-3 checks) 3. Document expected propagation delays</p>"},{"location":"specification/v1/domain/#error-handling","title":"Error Handling","text":"<p>Common errors: - Rate limit exceeded: Back off, retry later - Domain not found: Domain may be deleted or invalid - WHOIS server timeout: Retry with backoff - Parse error: WHOIS format variation, log for debugging - Network error: Transient, retry with backoff</p> <p>Implementations SHOULD: - Return clear error messages - Distinguish transient errors (retry) from permanent errors (fail) - Log raw WHOIS responses for debugging</p>"},{"location":"specification/v1/domain/#security-considerations","title":"Security Considerations","text":""},{"location":"specification/v1/domain/#domain-hijacking-detection","title":"Domain Hijacking Detection","text":"<p>DomainCheck helps detect domain hijacking through:</p> <p>Nameserver hijacking: - Attacker changes nameservers to redirect traffic - Monitor: <code>nameservers</code> assertion - Impact: Complete DNS control, phishing, data theft</p> <p>Registrar transfer: - Attacker transfers domain to different registrar - Monitor: <code>registrar</code> assertion - Impact: Loss of domain control, potential theft</p> <p>Lock bypass: - Attacker removes transfer locks - Monitor: <code>status</code> assertion (clientTransferProhibited) - Impact: Domain vulnerable to transfer</p> <p>Redemption period: - Domain expires and enters grace period - Monitor: <code>status</code> assertion (redemptionPeriod, pendingDelete) - Impact: Domain may be lost permanently</p>"},{"location":"specification/v1/domain/#domain-expiration-risks","title":"Domain Expiration Risks","text":"<p>Timeline after expiration: 1. Day 0: Domain expires, enters grace period 2. Day 0-40: Grace period (varies by registrar) 3. Day 41-70: Redemption period (expensive recovery) 4. Day 71+: Pending delete (5 days) 5. Day 76+: Domain released, anyone can register</p> <p>Monitoring strategy: - 90 days: Early warning (plenty of time) - 60 days: Standard warning (safe buffer) - 30 days: Urgent warning (act now) - 14 days: Critical warning (emergency)</p>"},{"location":"specification/v1/domain/#false-positives","title":"False Positives","text":"<p>Be aware of legitimate changes:</p> <p>Intentional changes (not hijacking): - Registrar transfers (corporate acquisitions, consolidation) - Nameserver migrations (DNS provider changes) - Domain renewals (expiration date extends) - EPP status changes (lock changes during transfers)</p> <p>Recommendations: 1. Document planned changes in advance 2. Use maintenance windows to suppress alerts 3. Configure alerts appropriately (severity levels) 4. Implement alert correlation (multiple checks fail = more serious)</p>"},{"location":"specification/v1/domain/#whois-query-privacy","title":"WHOIS Query Privacy","text":"<p>WHOIS queries are logged: - Registrars log all WHOIS queries - May reveal monitoring strategy - Queries are public record</p> <p>Implications: - Attackers may monitor WHOIS query patterns - Consider privacy when naming checks - Don't include sensitive information in check metadata</p>"},{"location":"specification/v1/domain/#dnssec-benefits","title":"DNSSEC Benefits","text":"<p>DNSSEC provides: - Authentication: Cryptographically verify DNS responses - Integrity: Detect DNS spoofing and cache poisoning - Non-repudiation: Prove DNS records are authentic</p> <p>Limitations: - Does not provide confidentiality (DNS responses still public) - Requires resolver support (not all ISPs/DNS resolvers validate DNSSEC) - Adds complexity to DNS operations</p>"},{"location":"specification/v1/domain/#conformance","title":"Conformance","text":"<p>Implementations claiming support for <code>DomainCheck</code> MUST:</p> <ol> <li>Support domain field: Accept valid DNS hostnames</li> <li>Query registration data: Obtain domain registration information from WHOIS, RDAP, or registrar API</li> <li>Support all assertion types:</li> <li><code>expirationTime</code> - Domain expiration monitoring</li> <li><code>nameservers</code> - Authoritative nameserver validation</li> <li><code>registrar</code> - Registrar verification</li> <li><code>status</code> - EPP status code validation</li> <li><code>dnssec</code> - DNSSEC status validation</li> <li>Normalize status codes: Strip URLs from EPP status codes</li> <li>Case-insensitive nameservers: Nameserver comparison ignores case</li> <li>Evaluate assertions: Run all <code>checks</code> assertions against obtained data</li> <li>Report results: Return pass/fail status with detailed error messages</li> <li>Honor timeout: Abort check if <code>timeout</code> is exceeded</li> <li>Retry logic: Retry failed checks up to <code>retries</code> count</li> <li>Document data source: Clearly specify which data source is used (WHOIS, RDAP, API)</li> <li>Document rate limits: Specify rate limit behavior and recommendations</li> </ol> <p>Implementations SHOULD: - Cache registration data for at least 23 hours (reduce query load) - Implement exponential backoff on rate limit errors - Support both WHOIS and RDAP data sources - Provide clear error messages for rate limiting, parsing failures, and network errors - Log raw WHOIS/RDAP responses for debugging</p> <p>Implementations MAY: - Support additional data sources (registrar APIs, custom sources) - Collect additional metrics (query time, data freshness, cache hit rate) - Provide additional assertion types (creation date, registrant, etc.) - Implement intelligent caching strategies</p>"},{"location":"specification/v1/domain/#related-documents","title":"Related Documents","text":"<ul> <li>v1/_index.md - V1 API overview</li> <li>v1/common.md - Common types (ListAssertion, TimebasedAssertion, StringAssertion)</li> <li>v1/check.md - Base Check resource</li> <li>v1/dns.md - DNS resolution checks (different from domain registration)</li> <li>v1/tls.md - TLS certificate checks (different from domain registration)</li> </ul> <p>Status: Stable Last Updated: 2026-02-07</p>"},{"location":"specification/v1/http/","title":"HTTP Check","text":"<p>Version: v1 Kind: <code>HttpCheck</code> Status: Stable</p>"},{"location":"specification/v1/http/#overview","title":"Overview","text":"<p>The HTTP Check validates HTTP/HTTPS endpoints by making requests and evaluating response characteristics including status codes, headers, body content, response time, and size.</p> <p>Common Use Cases: - API health monitoring - Website availability checks - Response time SLA validation - Content verification - Header validation (security headers, caching, etc.) - SSL/TLS-enabled endpoints (HTTPS) - RESTful API testing</p>"},{"location":"specification/v1/http/#resource-structure","title":"Resource Structure","text":"<pre><code>apiVersion: v1\nkind: HttpCheck\nmetadata:\n  name: {check-name}\n  labels:\n    key: value\nspec:\n  url: https://api.example.com/health\n  method: GET  # optional, default: GET\n  headers:     # optional\n    Authorization: Bearer token\n    User-Agent: SyntheticMonitor/1.0\n\n  # Scheduling (REQUIRED - one of)\n  interval: 1m\n  # OR\n  cron: \"*/5 * * * *\"\n\n  # Common fields (OPTIONAL)\n  timeout: 10s\n  retries: 3\n  locations:\n    - us-east-1\n  channels:\n    - channel: alerts\n      severity: High\n\n  # Assertions (REQUIRED)\n  checks:\n    - type: statusCode\n      operator: equals\n      value: 200\n    - type: duration\n      operator: lessThan\n      value: 500ms\n</code></pre>"},{"location":"specification/v1/http/#spec-fields","title":"Spec Fields","text":""},{"location":"specification/v1/http/#url","title":"url","text":"<p>Type: <code>HttpUrl</code> REQUIRED</p> <p>Description: The HTTP/HTTPS URL to check.</p> <p>Examples: <pre><code>url: https://example.com\nurl: https://api.example.com/v1/health\nurl: http://localhost:8080/status\nurl: https://example.com:8443/metrics\n</code></pre></p> <p>Validation: - MUST be valid HTTP or HTTPS URL - MUST include scheme (<code>http://</code> or <code>https://</code>) - MAY include port number - MAY include path, query parameters, and fragment</p> <p>URL Components: - Scheme: <code>http</code> or <code>https</code> (REQUIRED) - Host: Domain name or IP address (REQUIRED) - Port: Custom port (OPTIONAL, defaults: 80 for HTTP, 443 for HTTPS) - Path: URL path (OPTIONAL, defaults to <code>/</code>) - Query: Query parameters (OPTIONAL) - Fragment: URL fragment (OPTIONAL)</p>"},{"location":"specification/v1/http/#method","title":"method","text":"<p>Type: <code>string</code> OPTIONAL Default: <code>\"GET\"</code></p> <p>Description: HTTP method to use for the request.</p> <p>Supported Methods: - <code>GET</code> (default) - Retrieve resource - <code>POST</code> - Create resource - <code>PUT</code> - Update resource - <code>PATCH</code> - Partial update - <code>DELETE</code> - Delete resource - <code>HEAD</code> - Get headers only (no body) - <code>OPTIONS</code> - Get supported methods</p> <p>Examples: <pre><code># GET request (default)\nmethod: GET\n\n# POST request for create operations\nmethod: POST\n\n# HEAD request for lightweight checks\nmethod: HEAD\n</code></pre></p> <p>Notes: - Method names are case-sensitive (UPPERCASE recommended) - <code>HEAD</code> requests are useful for checking endpoint availability without downloading the response body - <code>OPTIONS</code> requests can verify CORS configuration</p>"},{"location":"specification/v1/http/#headers","title":"headers","text":"<p>Type: <code>dict[str, str]</code> OPTIONAL Default: <code>{}</code></p> <p>Description: HTTP headers to include in the request.</p> <p>Common Headers: - <code>Authorization</code> - Authentication credentials - <code>User-Agent</code> - Client identification - <code>Accept</code> - Acceptable response content types - <code>Content-Type</code> - Request body content type (for POST/PUT) - <code>Cache-Control</code> - Caching directives - <code>X-Custom-Header</code> - Custom application headers</p> <p>Examples: <pre><code># Bearer token authentication\nheaders:\n  Authorization: Bearer eyJhbGc...\n\n# API key authentication\nheaders:\n  X-API-Key: secret-api-key\n\n# Content negotiation\nheaders:\n  Accept: application/json\n  User-Agent: SyntheticMonitor/1.0\n\n# Multiple headers\nheaders:\n  Authorization: Bearer token\n  Accept: application/json\n  X-Request-ID: check-12345\n</code></pre></p> <p>Security Considerations: - Credentials in headers are stored in plain text - Consider using environment variable substitution - Avoid committing secrets to version control - Use secure channels for check definition storage</p>"},{"location":"specification/v1/http/#checks","title":"checks","text":"<p>Type: <code>array[HttpAssertion]</code> REQUIRED</p> <p>Description: List of assertions to evaluate against the HTTP response.</p> <p>Supported Assertion Types: 1. <code>statusCode</code> - HTTP status code (200, 404, 500, etc.) 2. <code>duration</code> - Total request/response latency 3. <code>ttfb</code> - Time to first byte (server response time) 4. <code>size</code> - Response body size in bytes 5. <code>body</code> - Response body content matching 6. <code>header</code> - Response header validation</p> <p>See Assertions section for details.</p>"},{"location":"specification/v1/http/#assertions","title":"Assertions","text":"<p>All HTTP assertions validate properties of the HTTP response.</p>"},{"location":"specification/v1/http/#statuscode","title":"statusCode","text":"<p>Type: <code>NumericAssertion</code></p> <p>Description: Assert on HTTP response status code.</p> <p>Fields: - <code>type</code>: <code>\"statusCode\"</code> (REQUIRED) - <code>operator</code>: <code>NumericOperator</code> (REQUIRED)   - <code>equals</code>, <code>notEquals</code>, <code>greaterThan</code>, <code>lessThan</code> - <code>value</code>: <code>integer</code> (REQUIRED)   - Valid range: 100-599</p> <p>Examples:</p> <p>Assert successful response: <pre><code>- type: statusCode\n  operator: equals\n  value: 200\n</code></pre></p> <p>Assert any 2xx success: <pre><code>- type: statusCode\n  operator: greaterThan\n  value: 199\n- type: statusCode\n  operator: lessThan\n  value: 300\n</code></pre></p> <p>Assert not a server error: <pre><code>- type: statusCode\n  operator: lessThan\n  value: 500\n</code></pre></p> <p>Assert specific status code: <pre><code>- type: statusCode\n  operator: equals\n  value: 201  # Created\n</code></pre></p> <p>Common Status Codes: - 2xx Success: 200 OK, 201 Created, 204 No Content - 3xx Redirect: 301 Moved Permanently, 302 Found, 304 Not Modified - 4xx Client Error: 400 Bad Request, 401 Unauthorized, 403 Forbidden, 404 Not Found, 429 Too Many Requests - 5xx Server Error: 500 Internal Server Error, 502 Bad Gateway, 503 Service Unavailable, 504 Gateway Timeout</p> <p>Semantics: - Check PASSES if status code assertion evaluates to true - Check FAILS if status code assertion evaluates to false - Redirect responses (3xx) are followed by default unless implementation specifies otherwise</p>"},{"location":"specification/v1/http/#duration","title":"duration","text":"<p>Type: <code>TimebasedAssertion</code></p> <p>Description: Assert on total request/response latency (time from request start to response complete).</p> <p>Fields: - <code>type</code>: <code>\"duration\"</code> (REQUIRED) - <code>operator</code>: <code>NumericOperator</code> (REQUIRED)   - <code>equals</code>, <code>notEquals</code>, <code>greaterThan</code>, <code>lessThan</code> - <code>value</code>: <code>StrictTime</code> (REQUIRED)   - MUST include unit suffix: <code>\"500ms\"</code>, <code>\"5s\"</code>, <code>\"1m\"</code>, etc.   - Bare integers are NOT allowed</p> <p>Examples:</p> <p>Assert response within 500ms (SLA): <pre><code>- type: duration\n  operator: lessThan\n  value: 500ms\n</code></pre></p> <p>Assert response within 5 seconds: <pre><code>- type: duration\n  operator: lessThan\n  value: 5s\n</code></pre></p> <p>Assert response within 200ms (strict performance): <pre><code>- type: duration\n  operator: lessThan\n  value: 200ms\n</code></pre></p> <p>Using seconds: <pre><code>- type: duration\n  operator: lessThan\n  value: 2s\n</code></pre></p> <p>Invalid - bare integers rejected: <pre><code>- type: duration\n  operator: lessThan\n  value: 500  # \u274c ERROR: unit suffix required\n</code></pre></p> <p>Semantics: - Duration includes full request/response cycle:   - DNS resolution time (if applicable)   - TCP connection time   - TLS handshake time (for HTTPS)   - Time to first byte (TTFB)   - Response body download time - Check PASSES if duration assertion evaluates to true - Check FAILS if duration assertion evaluates to false - Unit suffix REQUIRED to avoid ambiguity</p> <p>Performance Guidance: - Excellent: &lt; 200ms - Good: 200ms - 500ms - Acceptable: 500ms - 1000ms - Slow: &gt; 1000ms</p>"},{"location":"specification/v1/http/#ttfb","title":"ttfb","text":"<p>Type: <code>TimebasedAssertion</code></p> <p>Description: Assert on Time to First Byte (TTFB) - the time from request sent to receiving the first response byte.</p> <p>Fields: - <code>type</code>: <code>\"ttfb\"</code> (REQUIRED) - <code>operator</code>: <code>NumericOperator</code> (REQUIRED)   - <code>equals</code>, <code>notEquals</code>, <code>greaterThan</code>, <code>lessThan</code> - <code>value</code>: <code>StrictTime</code> (REQUIRED)   - MUST include unit suffix: <code>\"100ms\"</code>, <code>\"1s\"</code>, etc.   - Bare integers are NOT allowed</p> <p>Examples:</p> <p>Assert TTFB within 100ms (excellent server performance): <pre><code>- type: ttfb\n  operator: lessThan\n  value: 100ms\n</code></pre></p> <p>Assert TTFB within 300ms (acceptable): <pre><code>- type: ttfb\n  operator: lessThan\n  value: 300ms\n</code></pre></p> <p>Assert TTFB within 1 second: <pre><code>- type: ttfb\n  operator: lessThan\n  value: 1s\n</code></pre></p> <p>Invalid - bare integers rejected: <pre><code>- type: ttfb\n  operator: lessThan\n  value: 100  # \u274c ERROR: unit suffix required\n</code></pre></p> <p>Semantics: - TTFB measures server response time only - Includes: DNS + Connect + TLS + Server Processing - Does NOT include: Response body download time - TTFB &lt; Total Duration (duration includes download) - Check PASSES if TTFB assertion evaluates to true - Check FAILS if TTFB assertion evaluates to false - Unit suffix REQUIRED to avoid ambiguity</p> <p>TTFB vs Duration: <pre><code>duration = DNS + Connect + TLS + TTFB + Download\nttfb = DNS + Connect + TLS + Server Processing\n</code></pre></p> <p>Performance Guidance: - Excellent: &lt; 100ms - Good: 100ms - 300ms - Acceptable: 300ms - 600ms - Slow: &gt; 600ms</p> <p>Use Cases: - Monitor backend server performance - Separate network latency from server processing - Identify slow database queries or API calls - Validate server-side SLA (independent of response size)</p>"},{"location":"specification/v1/http/#size","title":"size","text":"<p>Type: <code>NumericAssertion</code></p> <p>Description: Assert on response body size in bytes.</p> <p>Fields: - <code>type</code>: <code>\"size\"</code> (REQUIRED) - <code>operator</code>: <code>NumericOperator</code> (REQUIRED)   - <code>equals</code>, <code>notEquals</code>, <code>greaterThan</code>, <code>lessThan</code> - <code>value</code>: <code>integer</code> (REQUIRED)   - Response body size in bytes</p> <p>Examples:</p> <p>Assert non-empty response: <pre><code>- type: size\n  operator: greaterThan\n  value: 0\n</code></pre></p> <p>Assert response smaller than 1MB: <pre><code>- type: size\n  operator: lessThan\n  value: 1048576  # 1MB in bytes\n</code></pre></p> <p>Assert exact response size: <pre><code>- type: size\n  operator: equals\n  value: 512\n</code></pre></p> <p>Assert response at least 100 bytes: <pre><code>- type: size\n  operator: greaterThan\n  value: 99\n</code></pre></p> <p>Common Size Limits: - 1 KB = 1,024 bytes - 1 MB = 1,048,576 bytes - 1 GB = 1,073,741,824 bytes</p> <p>Semantics: - Size represents decompressed response body length in bytes - Check PASSES if size assertion evaluates to true - Check FAILS if size assertion evaluates to false - Empty responses have size 0</p> <p>Use Cases: - Verify response is not empty - Detect unexpectedly large responses - Validate payload size for bandwidth monitoring - Ensure consistent response sizes</p>"},{"location":"specification/v1/http/#body","title":"body","text":"<p>Type: <code>StringAssertion</code></p> <p>Description: Assert on response body content.</p> <p>Fields: - <code>type</code>: <code>\"body\"</code> (REQUIRED) - <code>operator</code>: <code>StringOperator</code> (REQUIRED)   - <code>equals</code>, <code>notEquals</code>, <code>contains</code>, <code>notContains</code> - <code>value</code>: <code>string</code> (REQUIRED)</p> <p>Examples:</p> <p>Assert body contains expected text: <pre><code>- type: body\n  operator: contains\n  value: \"OK\"\n</code></pre></p> <p>Assert JSON response contains field: <pre><code>- type: body\n  operator: contains\n  value: '\"status\":\"healthy\"'\n</code></pre></p> <p>Assert body equals specific content: <pre><code>- type: body\n  operator: equals\n  value: '{\"status\":\"ok\"}'\n</code></pre></p> <p>Assert body does not contain error: <pre><code>- type: body\n  operator: notContains\n  value: \"error\"\n</code></pre></p> <p>Assert health check response: <pre><code>- type: body\n  operator: contains\n  value: \"healthy\"\n</code></pre></p> <p>Semantics: - Matching is case-sensitive by default - <code>contains</code> searches anywhere in response body - <code>equals</code> requires exact match (including whitespace) - Check PASSES if body assertion evaluates to true - Check FAILS if body assertion evaluates to false</p> <p>Best Practices: - Use <code>contains</code> for flexible matching (recommended for JSON/HTML) - Use <code>equals</code> for exact text responses - Prefer specific strings over generic ones - Be aware of whitespace sensitivity with <code>equals</code></p> <p>Limitations: - No regex support (use <code>contains</code> for substring matching) - No JSON path support (implementation-specific extension) - Full body loaded into memory (consider size limits)</p>"},{"location":"specification/v1/http/#header","title":"header","text":"<p>Type: <code>KeyValueAssertion</code></p> <p>Description: Assert on response headers.</p> <p>Modes: 1. Without <code>name</code>: Operations against header names (keys) 2. With <code>name</code>: Operations against specific header value</p> <p>Fields: - <code>type</code>: <code>\"header\"</code> (REQUIRED) - <code>operator</code>: <code>StringOperator</code> (REQUIRED)   - <code>equals</code>, <code>notEquals</code>, <code>contains</code>, <code>notContains</code> - <code>name</code>: <code>string</code> (OPTIONAL)   - Header name to check (e.g., <code>\"Content-Type\"</code>) - <code>value</code>: <code>string</code> (REQUIRED)   - Expected value or substring</p> <p>Examples - Header Name Assertions (without <code>name</code>):</p> <p>Assert Content-Type header exists: <pre><code>- type: header\n  operator: contains\n  value: \"Content-Type\"\n</code></pre></p> <p>Assert security header exists: <pre><code>- type: header\n  operator: contains\n  value: \"Strict-Transport-Security\"\n</code></pre></p> <p>Examples - Header Value Assertions (with <code>name</code>):</p> <p>Assert JSON content type: <pre><code>- type: header\n  name: Content-Type\n  operator: contains\n  value: \"application/json\"\n</code></pre></p> <p>Assert exact content type: <pre><code>- type: header\n  name: Content-Type\n  operator: equals\n  value: \"application/json; charset=utf-8\"\n</code></pre></p> <p>Assert cache control: <pre><code>- type: header\n  name: Cache-Control\n  operator: contains\n  value: \"max-age\"\n</code></pre></p> <p>Assert HSTS enabled: <pre><code>- type: header\n  name: Strict-Transport-Security\n  operator: contains\n  value: \"max-age\"\n</code></pre></p> <p>Assert CORS header: <pre><code>- type: header\n  name: Access-Control-Allow-Origin\n  operator: equals\n  value: \"*\"\n</code></pre></p> <p>Common Security Headers: - <code>Strict-Transport-Security</code> - HSTS (force HTTPS) - <code>Content-Security-Policy</code> - CSP (XSS protection) - <code>X-Frame-Options</code> - Clickjacking protection - <code>X-Content-Type-Options</code> - MIME sniffing protection - <code>Permissions-Policy</code> - Feature permissions</p> <p>Common Headers to Validate: - <code>Content-Type</code> - Response content type - <code>Cache-Control</code> - Caching behavior - <code>ETag</code> - Resource versioning - <code>Last-Modified</code> - Resource modification time - <code>Server</code> - Server identification - <code>X-RateLimit-*</code> - Rate limiting info</p> <p>Semantics: - Header names are case-insensitive (per HTTP spec) - Header values are case-sensitive - Check PASSES if header assertion evaluates to true - Check FAILS if header assertion evaluates to false</p>"},{"location":"specification/v1/http/#examples","title":"Examples","text":""},{"location":"specification/v1/http/#basic-api-health-check","title":"Basic API Health Check","text":"<pre><code>apiVersion: v1\nkind: HttpCheck\nmetadata:\n  name: api-health\n  title: \"API Health Endpoint\"\n  labels:\n    environment: production\n    service: api\nspec:\n  url: https://api.example.com/health\n  method: GET\n  interval: 1m\n  timeout: 5s\n  retries: 2\n  checks:\n    - type: statusCode\n      operator: equals\n      value: 200\n    - type: body\n      operator: contains\n      value: \"healthy\"\n    - type: duration\n      operator: lessThan\n      value: 500ms\n  locations:\n    - us-east-1\n    - eu-west-1\n  channels:\n    - channel: api-alerts\n      severity: Critical\n</code></pre>"},{"location":"specification/v1/http/#authenticated-api-check","title":"Authenticated API Check","text":"<pre><code>apiVersion: v1\nkind: HttpCheck\nmetadata:\n  name: authenticated-api\n  title: \"Authenticated API Endpoint\"\n  labels:\n    environment: production\nspec:\n  url: https://api.example.com/v1/users/me\n  method: GET\n  headers:\n    Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...\n    Accept: application/json\n  interval: 5m\n  timeout: 10s\n  checks:\n    - type: statusCode\n      operator: equals\n      value: 200\n    - type: header\n      name: Content-Type\n      operator: contains\n      value: \"application/json\"\n    - type: body\n      operator: contains\n      value: '\"email\"'\n    - type: duration\n      operator: lessThan\n      value: 1s\n  locations:\n    - us-east-1\n  channels:\n    - channel: security-alerts\n      severity: High\n</code></pre>"},{"location":"specification/v1/http/#post-request-check","title":"POST Request Check","text":"<pre><code>apiVersion: v1\nkind: HttpCheck\nmetadata:\n  name: create-user-endpoint\n  title: \"POST /users Endpoint Test\"\nspec:\n  url: https://api.example.com/v1/users\n  method: POST\n  headers:\n    Authorization: Bearer test-token\n    Content-Type: application/json\n  interval: 10m\n  timeout: 5s\n  checks:\n    - type: statusCode\n      operator: equals\n      value: 201  # Created\n    - type: header\n      name: Location\n      operator: contains\n      value: \"/users/\"\n    - type: duration\n      operator: lessThan\n      value: 2s\n  locations:\n    - us-east-1\n</code></pre>"},{"location":"specification/v1/http/#performance-sla-validation","title":"Performance SLA Validation","text":"<pre><code>apiVersion: v1\nkind: HttpCheck\nmetadata:\n  name: homepage-performance\n  title: \"Homepage Performance SLA\"\n  labels:\n    environment: production\n    team: frontend\nspec:\n  url: https://example.com\n  method: GET\n  interval: 1m\n  timeout: 10s\n  retries: 3\n  checks:\n    - type: statusCode\n      operator: equals\n      value: 200\n    # SLA: 95th percentile &lt; 1s\n    - type: duration\n      operator: lessThan\n      value: 1s\n    # Ensure response is not empty\n    - type: size\n      operator: greaterThan\n      value: 0\n    # Verify page title present\n    - type: body\n      operator: contains\n      value: \"&lt;title&gt;\"\n  locations:\n    - us-east-1\n    - us-west-2\n    - eu-west-1\n  channels:\n    - channel: frontend-alerts\n      severity: High\n</code></pre>"},{"location":"specification/v1/http/#security-headers-validation","title":"Security Headers Validation","text":"<pre><code>apiVersion: v1\nkind: HttpCheck\nmetadata:\n  name: security-headers\n  title: \"Security Headers Compliance\"\n  labels:\n    environment: production\n    security: true\nspec:\n  url: https://example.com\n  method: HEAD  # Lightweight, headers only\n  interval: 1h\n  timeout: 5s\n  checks:\n    - type: statusCode\n      operator: equals\n      value: 200\n    # HSTS enabled\n    - type: header\n      name: Strict-Transport-Security\n      operator: contains\n      value: \"max-age\"\n    # CSP present\n    - type: header\n      name: Content-Security-Policy\n      operator: contains\n      value: \"default-src\"\n    # X-Frame-Options set\n    - type: header\n      operator: contains\n      value: \"X-Frame-Options\"\n    # X-Content-Type-Options set\n    - type: header\n      name: X-Content-Type-Options\n      operator: equals\n      value: \"nosniff\"\n  locations:\n    - us-east-1\n  channels:\n    - channel: security-alerts\n      severity: Critical\n</code></pre>"},{"location":"specification/v1/http/#json-api-validation","title":"JSON API Validation","text":"<pre><code>apiVersion: v1\nkind: HttpCheck\nmetadata:\n  name: json-api-structure\n  title: \"JSON API Structure Validation\"\nspec:\n  url: https://api.example.com/v1/status\n  method: GET\n  headers:\n    Accept: application/json\n  interval: 2m\n  timeout: 5s\n  checks:\n    - type: statusCode\n      operator: equals\n      value: 200\n    - type: header\n      name: Content-Type\n      operator: contains\n      value: \"application/json\"\n    # Validate JSON structure\n    - type: body\n      operator: contains\n      value: '\"version\"'\n    - type: body\n      operator: contains\n      value: '\"status\"'\n    - type: body\n      operator: contains\n      value: '\"timestamp\"'\n    # Performance requirement\n    - type: duration\n      operator: lessThan\n      value: 300ms\n  locations:\n    - us-east-1\n</code></pre>"},{"location":"specification/v1/http/#redirect-validation","title":"Redirect Validation","text":"<pre><code>apiVersion: v1\nkind: HttpCheck\nmetadata:\n  name: http-to-https-redirect\n  title: \"HTTP to HTTPS Redirect\"\nspec:\n  url: http://example.com  # Note: HTTP not HTTPS\n  method: GET\n  interval: 6h\n  timeout: 5s\n  checks:\n    # Expect redirect\n    - type: statusCode\n      operator: equals\n      value: 301  # Moved Permanently\n    # Verify Location header\n    - type: header\n      name: Location\n      operator: contains\n      value: \"https://\"\n  locations:\n    - us-east-1\n</code></pre>"},{"location":"specification/v1/http/#validation-rules","title":"Validation Rules","text":""},{"location":"specification/v1/http/#required-fields","title":"Required Fields","text":"<ul> <li><code>apiVersion</code> MUST be <code>\"v1\"</code></li> <li><code>kind</code> MUST be <code>\"HttpCheck\"</code></li> <li><code>metadata.name</code> MUST be valid <code>CaseInsensitiveKey</code></li> <li><code>spec.url</code> MUST be valid <code>HttpUrl</code></li> <li><code>spec.checks</code> MUST be non-empty array</li> <li>One of <code>spec.interval</code> or <code>spec.cron</code> MUST be specified</li> </ul>"},{"location":"specification/v1/http/#optional-fields","title":"Optional Fields","text":"<ul> <li><code>spec.method</code> defaults to <code>\"GET\"</code></li> <li><code>spec.headers</code> defaults to <code>{}</code></li> <li><code>spec.timeout</code> defaults to <code>10s</code></li> <li><code>spec.retries</code> defaults to <code>1</code></li> <li><code>spec.locations</code> defaults to <code>[]</code></li> <li><code>spec.channels</code> defaults to <code>[]</code></li> </ul>"},{"location":"specification/v1/http/#extra-fields","title":"Extra Fields","text":"<ul> <li>Extra fields are FORBIDDEN (<code>extra=\"forbid\"</code>)</li> <li>Unknown fields MUST cause validation errors</li> </ul>"},{"location":"specification/v1/http/#execution-semantics","title":"Execution Semantics","text":""},{"location":"specification/v1/http/#request-behavior","title":"Request Behavior","text":"<ol> <li>Runner resolves <code>url</code> hostname via DNS</li> <li>Runner establishes TCP connection to target (port 80 or 443)</li> <li>Runner initiates TLS handshake (HTTPS only)</li> <li>Runner sends HTTP request with <code>method</code> and <code>headers</code></li> <li>Runner receives response (status, headers, body)</li> <li>Runner evaluates all assertions in <code>checks</code> array</li> <li>Check PASSES if all assertions pass</li> <li>Check FAILS if any assertion fails</li> </ol>"},{"location":"specification/v1/http/#redirect-handling","title":"Redirect Handling","text":"<ul> <li>Implementations SHOULD follow redirects (3xx status codes) by default</li> <li>Implementations MAY provide configuration to disable redirect following</li> <li>Final response after redirects is used for assertions</li> <li>Status code assertions can validate redirect behavior</li> </ul>"},{"location":"specification/v1/http/#timeout-behavior","title":"Timeout Behavior","text":"<ul> <li>Timeout applies to total execution time (DNS + TCP + TLS + HTTP)</li> <li>If timeout exceeded, check FAILS with timeout error</li> <li>Partial responses are discarded on timeout</li> </ul>"},{"location":"specification/v1/http/#error-conditions","title":"Error Conditions","text":"<p>Check FAILS if: - DNS resolution fails - Cannot establish TCP connection - TLS handshake fails (HTTPS) - HTTP request fails - Any assertion evaluates to false - Timeout exceeded - Network error occurs</p>"},{"location":"specification/v1/http/#retry-behavior","title":"Retry Behavior","text":"<ul> <li>Failed checks are retried up to <code>retries</code> times</li> <li>Retries occur immediately after failure</li> <li>If ANY attempt succeeds, check is considered successful</li> <li>Timeout applies to total execution time including retries</li> </ul>"},{"location":"specification/v1/http/#conformance","title":"Conformance","text":"<p>Implementations claiming HttpCheck conformance MUST:</p> <ol> <li>Support HTTP/HTTPS: Accept both <code>http://</code> and <code>https://</code> URLs</li> <li>Support common methods: Implement GET, POST, PUT, PATCH, DELETE, HEAD, OPTIONS</li> <li>Support headers: Send custom headers specified in <code>spec.headers</code></li> <li>Support all assertions: Implement statusCode, duration, size, body, header</li> <li>Evaluate all checks: Execute all assertions in <code>checks</code> array</li> <li>Fail on any assertion failure: Check fails if ANY assertion fails</li> <li>Handle timeouts: Respect <code>timeout</code> field</li> <li>Retry on failure: Implement retry logic according to <code>retries</code> field</li> <li>Follow redirects: Follow HTTP redirects by default (MAY be configurable)</li> </ol> <p>Implementations SHOULD: - Capture timing breakdown (DNS, connect, TLS, TTFB, download) - Capture response size - Support multiple locations - Send notifications to configured channels - Provide detailed error messages for validation failures - Report full HTTP metrics in results</p>"},{"location":"specification/v1/http/#security-considerations","title":"Security Considerations","text":""},{"location":"specification/v1/http/#credential-management","title":"Credential Management","text":"<ul> <li>Headers MAY contain sensitive credentials (API keys, tokens)</li> <li>Implementations SHOULD support secure credential storage</li> <li>Implementations SHOULD NOT log headers containing credentials</li> <li>Consider environment variable substitution for secrets</li> </ul>"},{"location":"specification/v1/http/#tlsssl-validation","title":"TLS/SSL Validation","text":"<ul> <li>HTTPS requests SHOULD validate server certificates</li> <li>Implementations SHOULD verify certificate chain</li> <li>Implementations SHOULD check certificate expiration</li> <li>Implementations MAY allow custom CA certificates</li> <li>Invalid certificates SHOULD cause check failure</li> </ul>"},{"location":"specification/v1/http/#request-safety","title":"Request Safety","text":"<ul> <li>Implementations SHOULD limit request body size</li> <li>Implementations SHOULD limit response body size</li> <li>Implementations SHOULD handle malformed responses safely</li> <li>Implementations SHOULD sanitize URLs before execution</li> </ul>"},{"location":"specification/v1/http/#rate-limiting","title":"Rate Limiting","text":"<ul> <li>Frequent checks MAY trigger rate limiting</li> <li>Implementations SHOULD respect HTTP 429 (Too Many Requests)</li> <li>Implementations SHOULD provide configurable retry backoff</li> </ul>"},{"location":"specification/v1/http/#performance-considerations","title":"Performance Considerations","text":""},{"location":"specification/v1/http/#response-time-thresholds","title":"Response Time Thresholds","text":"<p>Recommended thresholds for <code>duration</code> assertions:</p> <ul> <li>API endpoints: &lt; 500ms</li> <li>Web pages: &lt; 1s</li> <li>Complex queries: &lt; 5s</li> <li>TTFB: &lt; 100ms (excellent), &lt; 300ms (acceptable)</li> </ul>"},{"location":"specification/v1/http/#body-size-limits","title":"Body Size Limits","text":"<ul> <li>Implementations MAY limit response body size</li> <li>Typical limit: 10MB</li> <li>Consider memory usage for body assertions</li> <li>Use <code>HEAD</code> method for lightweight checks</li> </ul>"},{"location":"specification/v1/http/#connection-reuse","title":"Connection Reuse","text":"<ul> <li>Implementations MAY reuse connections for repeated checks</li> <li>Connection pooling can improve performance</li> <li>Consider DNS caching for frequent checks</li> </ul>"},{"location":"specification/v1/http/#implementation-notes","title":"Implementation Notes","text":""},{"location":"specification/v1/http/#timing-measurements","title":"Timing Measurements","text":"<p>Total Response Time = DNS + Connect + TLS + TTFB + Download</p> <ul> <li>DNS Time: Hostname resolution</li> <li>Connect Time: TCP connection establishment</li> <li>TLS Time: TLS handshake (HTTPS only, 0 for HTTP)</li> <li>TTFB: Time from request sent to first response byte</li> <li>Download Time: Time to receive full response body</li> </ul>"},{"location":"specification/v1/http/#header-matching","title":"Header Matching","text":"<ul> <li>Header names are case-insensitive per HTTP specification</li> <li>Header values are case-sensitive</li> <li><code>contains</code> operator searches entire header value</li> <li>Multiple headers with same name: implementation-defined behavior</li> </ul>"},{"location":"specification/v1/http/#body-encoding","title":"Body Encoding","text":"<ul> <li>Response body decoded based on Content-Type charset</li> <li>Default: UTF-8</li> <li>Binary responses: implementation-defined handling</li> <li>Large responses: MAY be truncated (with warning)</li> </ul>"},{"location":"specification/v1/http/#related","title":"Related","text":"<ul> <li>Base Check Definition - Common check structure</li> <li>Common Types - Shared types and operators</li> <li>TlsCheck - TLS/SSL certificate validation</li> <li>TcpCheck - TCP connection testing</li> </ul>"},{"location":"specification/v1/http/#changelog","title":"Changelog","text":""},{"location":"specification/v1/http/#v1-current","title":"v1 (Current)","text":"<ul> <li>Initial stable release</li> <li>Six assertion types: statusCode, duration, ttfb, size, body, header</li> <li>StrictTime for duration and ttfb assertions (unit suffix required)</li> <li>Support for GET, POST, PUT, PATCH, DELETE, HEAD, OPTIONS</li> <li>Custom headers support</li> <li>Multi-location execution</li> <li>TTFB (Time to First Byte) assertion for server performance monitoring</li> </ul>"},{"location":"specification/v1/tcp/","title":"TCP Check","text":"<p>Version: v1 Kind: <code>TcpCheck</code> Status: Stable</p>"},{"location":"specification/v1/tcp/#overview","title":"Overview","text":"<p>The TCP Check validates TCP service availability by establishing TCP connections to specified ports. It monitors connection success, latency, and optionally SSL/TLS handshake completion.</p> <p>Common Use Cases: - Database server monitoring (PostgreSQL 5432, MySQL 3306, Redis 6379) - Message queue monitoring (RabbitMQ 5672, Kafka 9092) - Cache server monitoring (Memcached 11211, Redis 6379) - Mail server monitoring (SMTP 25/587, IMAP 143/993, POP3 110/995) - Custom TCP services - Port availability verification - Network connectivity testing - SSL/TLS service validation</p>"},{"location":"specification/v1/tcp/#resource-structure","title":"Resource Structure","text":"<pre><code>apiVersion: v1\nkind: TcpCheck\nmetadata:\n  name: {check-name}\n  labels:\n    key: value\nspec:\n  host: db.example.com  # or IP address\n  port: 5432\n\n  # Scheduling (REQUIRED - one of)\n  interval: 1m\n  # OR\n  cron: \"*/5 * * * *\"\n\n  # Common fields (OPTIONAL)\n  timeout: 10s\n  retries: 3\n  locations:\n    - us-east-1\n  channels:\n    - channel: alerts\n      severity: High\n\n  # Assertions (REQUIRED)\n  checks:\n    - type: reachable\n      operator: is\n      value: true\n    - type: latency\n      operator: lessThan\n      value: 100ms\n</code></pre>"},{"location":"specification/v1/tcp/#spec-fields","title":"Spec Fields","text":""},{"location":"specification/v1/tcp/#host","title":"host","text":"<p>Type: <code>DNSHostname | IPvAnyAddress</code> REQUIRED</p> <p>Description: The hostname or IP address of the TCP service to check.</p> <p>Formats: - DNS Hostname: Domain name (e.g., <code>db.example.com</code>, <code>localhost</code>) - IPv4 Address: Dotted decimal notation (e.g., <code>192.168.1.1</code>, <code>10.0.0.5</code>) - IPv6 Address: Colon-hexadecimal notation (e.g., <code>2001:db8::1</code>, <code>::1</code>)</p> <p>Examples: <pre><code># DNS hostname\nhost: db.example.com\n\n# Localhost\nhost: localhost\n\n# IPv4 address\nhost: 192.168.1.100\n\n# IPv6 address\nhost: 2001:db8::8a2e:370:7334\n\n# IPv6 loopback\nhost: ::1\n</code></pre></p> <p>Validation: - MUST be valid DNS hostname or IP address - DNS hostnames automatically converted to lowercase - IPv6 addresses MAY be compressed (::) - Maximum hostname length: 253 characters</p>"},{"location":"specification/v1/tcp/#port","title":"port","text":"<p>Type: <code>integer</code> REQUIRED</p> <p>Description: The TCP port number to connect to.</p> <p>Common Ports:</p> <p>Databases: - <code>5432</code> - PostgreSQL - <code>3306</code> - MySQL/MariaDB - <code>27017</code> - MongoDB - <code>6379</code> - Redis - <code>1433</code> - Microsoft SQL Server - <code>5984</code> - CouchDB - <code>9042</code> - Cassandra - <code>7000</code> - Cassandra inter-node - <code>8529</code> - ArangoDB</p> <p>Message Queues: - <code>5672</code> - RabbitMQ (AMQP) - <code>15672</code> - RabbitMQ Management - <code>9092</code> - Kafka - <code>4222</code> - NATS - <code>5445</code> - ActiveMQ</p> <p>Caching: - <code>6379</code> - Redis - <code>11211</code> - Memcached</p> <p>Mail: - <code>25</code> - SMTP - <code>587</code> - SMTP (submission) - <code>465</code> - SMTPS - <code>143</code> - IMAP - <code>993</code> - IMAPS - <code>110</code> - POP3 - <code>995</code> - POP3S</p> <p>Web/Proxy: - <code>80</code> - HTTP - <code>443</code> - HTTPS - <code>8080</code> - HTTP alternate - <code>3128</code> - Squid proxy - <code>9200</code> - Elasticsearch</p> <p>Other: - <code>22</code> - SSH - <code>21</code> - FTP - <code>3389</code> - RDP (Remote Desktop) - <code>5900</code> - VNC</p> <p>Examples: <pre><code># PostgreSQL\nport: 5432\n\n# MySQL\nport: 3306\n\n# Redis\nport: 6379\n\n# Custom application\nport: 8888\n</code></pre></p> <p>Validation: - MUST be integer between 1 and 65535 - Well-known ports: 1-1023 (may require privileges) - Registered ports: 1024-49151 - Dynamic/private ports: 49152-65535</p>"},{"location":"specification/v1/tcp/#checks","title":"checks","text":"<p>Type: <code>array[TcpAssertion]</code> REQUIRED</p> <p>Description: List of assertions to evaluate against the TCP connection.</p> <p>Supported Assertion Types: 1. <code>reachable</code> - Whether TCP connection succeeds 2. <code>latency</code> - TCP connection establishment time 3. <code>sslHandshake</code> - Whether SSL/TLS handshake succeeds (for TLS-enabled services)</p> <p>See Assertions section for details.</p>"},{"location":"specification/v1/tcp/#assertions","title":"Assertions","text":"<p>All TCP assertions validate properties of the TCP connection.</p>"},{"location":"specification/v1/tcp/#reachable","title":"reachable","text":"<p>Type: <code>BooleanAssertion</code></p> <p>Description: Assert on TCP connection success/failure.</p> <p>Fields: - <code>type</code>: <code>\"reachable\"</code> (REQUIRED) - <code>operator</code>: <code>BooleanOperator</code> (REQUIRED)   - <code>is</code>, <code>isNot</code> - <code>value</code>: <code>boolean</code> (REQUIRED)   - <code>true</code> - Connection should succeed   - <code>false</code> - Connection should fail</p> <p>Examples:</p> <p>Assert connection succeeds: <pre><code>- type: reachable\n  operator: is\n  value: true\n</code></pre></p> <p>Assert port is closed (connection fails): <pre><code>- type: reachable\n  operator: is\n  value: false\n</code></pre></p> <p>Verify service is down: <pre><code>- type: reachable\n  operator: isNot\n  value: true\n</code></pre></p> <p>Semantics: - <code>true</code> means TCP connection established successfully - <code>false</code> means connection failed (refused, timeout, unreachable) - Check PASSES if assertion evaluates to true - Check FAILS if assertion evaluates to false</p> <p>Use Cases: - Positive check (<code>value: true</code>): Verify service is running - Negative check (<code>value: false</code>): Verify port is closed (security validation) - Availability monitoring: Ensure database/service is reachable</p>"},{"location":"specification/v1/tcp/#latency","title":"latency","text":"<p>Type: <code>TimebasedAssertion</code></p> <p>Description: Assert on TCP connection establishment time (from connection initiation to successful establishment).</p> <p>Fields: - <code>type</code>: <code>\"latency\"</code> (REQUIRED) - <code>operator</code>: <code>NumericOperator</code> (REQUIRED)   - <code>equals</code>, <code>notEquals</code>, <code>greaterThan</code>, <code>lessThan</code> - <code>value</code>: <code>StrictTime</code> (REQUIRED)   - MUST include unit suffix: <code>\"100ms\"</code>, <code>\"1s\"</code>, etc.   - Bare integers are NOT allowed</p> <p>Examples:</p> <p>Assert connection within 100ms (low latency): <pre><code>- type: latency\n  operator: lessThan\n  value: 100ms\n</code></pre></p> <p>Assert connection within 1 second: <pre><code>- type: latency\n  operator: lessThan\n  value: 1s\n</code></pre></p> <p>Assert connection within 500ms (SLA): <pre><code>- type: latency\n  operator: lessThan\n  value: 500ms\n</code></pre></p> <p>Using seconds: <pre><code>- type: latency\n  operator: lessThan\n  value: 2s\n</code></pre></p> <p>Invalid - bare integers rejected: <pre><code>- type: latency\n  operator: lessThan\n  value: 100  # \u274c ERROR: unit suffix required\n</code></pre></p> <p>Semantics: - Latency measures time from connection initiation to successful TCP handshake - Includes DNS resolution time (if hostname used) - Does NOT include SSL/TLS handshake time - Check PASSES if latency assertion evaluates to true - Check FAILS if latency assertion evaluates to false - Unit suffix REQUIRED to avoid ambiguity</p> <p>Performance Guidance: - Excellent: &lt; 10ms (local network) - Good: 10ms - 50ms (same region) - Acceptable: 50ms - 100ms (cross-region) - Slow: &gt; 100ms</p> <p>Network Latency Context: - Local network: &lt; 1ms - Same datacenter: 1-5ms - Same region: 10-20ms - Cross-region (US): 50-80ms - Transatlantic: 80-120ms - Transpacific: 150-200ms</p>"},{"location":"specification/v1/tcp/#sslhandshake","title":"sslHandshake","text":"<p>Type: <code>BooleanAssertion</code></p> <p>Description: Assert on SSL/TLS handshake success for TLS-enabled TCP services.</p> <p>Fields: - <code>type</code>: <code>\"sslHandshake\"</code> (REQUIRED) - <code>operator</code>: <code>BooleanOperator</code> (REQUIRED)   - <code>is</code>, <code>isNot</code> - <code>value</code>: <code>boolean</code> (REQUIRED)   - <code>true</code> - TLS handshake should succeed   - <code>false</code> - TLS handshake should fail</p> <p>Examples:</p> <p>Assert TLS handshake succeeds: <pre><code>- type: sslHandshake\n  operator: is\n  value: true\n</code></pre></p> <p>Verify TLS is enabled: <pre><code>- type: sslHandshake\n  operator: isNot\n  value: false\n</code></pre></p> <p>Semantics: - Only applicable to services that support SSL/TLS - <code>true</code> means TLS handshake completed successfully - <code>false</code> means TLS handshake failed - Check PASSES if assertion evaluates to true - Check FAILS if assertion evaluates to false</p> <p>Use Cases: - Verify database uses SSL/TLS (PostgreSQL, MySQL) - Validate SMTP STARTTLS support - Ensure Redis TLS is enabled - Confirm LDAPS connection</p> <p>TLS-Enabled Services: - SMTPS: port 465 - IMAPS: port 993 - POP3S: port 995 - LDAPS: port 636 - PostgreSQL with TLS: port 5432 (optional) - MySQL with TLS: port 3306 (optional) - Redis with TLS: port 6379 (configurable)</p> <p>Note: For comprehensive certificate validation (expiration, issuer, subject), use TlsCheck instead.</p>"},{"location":"specification/v1/tcp/#examples","title":"Examples","text":""},{"location":"specification/v1/tcp/#basic-database-connectivity-check","title":"Basic Database Connectivity Check","text":"<pre><code>apiVersion: v1\nkind: TcpCheck\nmetadata:\n  name: postgres-connectivity\n  title: \"PostgreSQL Database Connectivity\"\n  labels:\n    environment: production\n    service: database\nspec:\n  host: db.example.com\n  port: 5432\n  interval: 1m\n  timeout: 5s\n  retries: 2\n  checks:\n    - type: reachable\n      operator: is\n      value: true\n    - type: latency\n      operator: lessThan\n      value: 100ms\n  locations:\n    - us-east-1\n  channels:\n    - channel: database-alerts\n      severity: Critical\n</code></pre>"},{"location":"specification/v1/tcp/#redis-cache-monitoring","title":"Redis Cache Monitoring","text":"<pre><code>apiVersion: v1\nkind: TcpCheck\nmetadata:\n  name: redis-cache\n  title: \"Redis Cache Availability\"\n  labels:\n    environment: production\n    service: cache\nspec:\n  host: cache.example.com\n  port: 6379\n  interval: 30s\n  timeout: 3s\n  retries: 3\n  checks:\n    - type: reachable\n      operator: is\n      value: true\n    - type: latency\n      operator: lessThan\n      value: 50ms\n  locations:\n    - us-east-1\n    - us-west-2\n  channels:\n    - channel: infrastructure-alerts\n      severity: High\n</code></pre>"},{"location":"specification/v1/tcp/#mysql-with-tls-validation","title":"MySQL with TLS Validation","text":"<pre><code>apiVersion: v1\nkind: TcpCheck\nmetadata:\n  name: mysql-tls-check\n  title: \"MySQL TLS Connectivity\"\n  labels:\n    environment: production\n    service: database\n    security: true\nspec:\n  host: mysql.example.com\n  port: 3306\n  interval: 5m\n  timeout: 10s\n  checks:\n    - type: reachable\n      operator: is\n      value: true\n    - type: sslHandshake\n      operator: is\n      value: true  # Verify TLS is enabled\n    - type: latency\n      operator: lessThan\n      value: 200ms\n  locations:\n    - us-east-1\n  channels:\n    - channel: security-alerts\n      severity: Critical\n</code></pre>"},{"location":"specification/v1/tcp/#smtp-server-connectivity","title":"SMTP Server Connectivity","text":"<pre><code>apiVersion: v1\nkind: TcpCheck\nmetadata:\n  name: smtp-server\n  title: \"SMTP Server Availability\"\n  labels:\n    environment: production\n    service: email\nspec:\n  host: smtp.example.com\n  port: 587  # SMTP submission\n  interval: 5m\n  timeout: 5s\n  checks:\n    - type: reachable\n      operator: is\n      value: true\n    - type: latency\n      operator: lessThan\n      value: 500ms\n  locations:\n    - us-east-1\n  channels:\n    - channel: email-alerts\n      severity: High\n</code></pre>"},{"location":"specification/v1/tcp/#ipv4-and-ipv6-dual-stack-monitoring","title":"IPv4 and IPv6 Dual-Stack Monitoring","text":"<pre><code>apiVersion: v1\nkind: TcpCheck\nmetadata:\n  name: web-server-ipv4\n  title: \"Web Server IPv4 Connectivity\"\nspec:\n  host: 203.0.113.42  # IPv4 address\n  port: 443\n  interval: 1m\n  timeout: 5s\n  checks:\n    - type: reachable\n      operator: is\n      value: true\n    - type: latency\n      operator: lessThan\n      value: 100ms\n---\napiVersion: v1\nkind: TcpCheck\nmetadata:\n  name: web-server-ipv6\n  title: \"Web Server IPv6 Connectivity\"\nspec:\n  host: 2001:db8::1  # IPv6 address\n  port: 443\n  interval: 1m\n  timeout: 5s\n  checks:\n    - type: reachable\n      operator: is\n      value: true\n    - type: latency\n      operator: lessThan\n      value: 100ms\n</code></pre>"},{"location":"specification/v1/tcp/#port-security-validation-negative-check","title":"Port Security Validation (Negative Check)","text":"<pre><code>apiVersion: v1\nkind: TcpCheck\nmetadata:\n  name: ftp-port-closed\n  title: \"Verify FTP Port is Closed (Security)\"\n  labels:\n    environment: production\n    security: true\nspec:\n  host: server.example.com\n  port: 21  # FTP (should be disabled)\n  interval: 1h\n  timeout: 5s\n  checks:\n    - type: reachable\n      operator: is\n      value: false  # Expect connection to fail\n  locations:\n    - us-east-1\n  channels:\n    - channel: security-alerts\n      severity: Critical\n</code></pre>"},{"location":"specification/v1/tcp/#message-queue-monitoring","title":"Message Queue Monitoring","text":"<pre><code>apiVersion: v1\nkind: TcpCheck\nmetadata:\n  name: rabbitmq-broker\n  title: \"RabbitMQ Broker Connectivity\"\n  labels:\n    environment: production\n    service: messaging\nspec:\n  host: mq.example.com\n  port: 5672  # AMQP\n  interval: 1m\n  timeout: 5s\n  retries: 2\n  checks:\n    - type: reachable\n      operator: is\n      value: true\n    - type: latency\n      operator: lessThan\n      value: 100ms\n  locations:\n    - us-east-1\n    - eu-west-1\n  channels:\n    - channel: messaging-alerts\n      severity: Critical\n</code></pre>"},{"location":"specification/v1/tcp/#localhost-service-check","title":"Localhost Service Check","text":"<pre><code>apiVersion: v1\nkind: TcpCheck\nmetadata:\n  name: local-service\n  title: \"Local Service Health\"\nspec:\n  host: localhost\n  port: 8080\n  interval: 30s\n  timeout: 2s\n  checks:\n    - type: reachable\n      operator: is\n      value: true\n    - type: latency\n      operator: lessThan\n      value: 10ms  # Local should be very fast\n  locations:\n    - local\n</code></pre>"},{"location":"specification/v1/tcp/#validation-rules","title":"Validation Rules","text":""},{"location":"specification/v1/tcp/#required-fields","title":"Required Fields","text":"<ul> <li><code>apiVersion</code> MUST be <code>\"v1\"</code></li> <li><code>kind</code> MUST be <code>\"TcpCheck\"</code></li> <li><code>metadata.name</code> MUST be valid <code>CaseInsensitiveKey</code></li> <li><code>spec.host</code> MUST be valid <code>DNSHostname</code> or <code>IPvAnyAddress</code></li> <li><code>spec.port</code> MUST be integer 1-65535</li> <li><code>spec.checks</code> MUST be non-empty array</li> <li>One of <code>spec.interval</code> or <code>spec.cron</code> MUST be specified</li> </ul>"},{"location":"specification/v1/tcp/#optional-fields","title":"Optional Fields","text":"<ul> <li><code>spec.timeout</code> defaults to <code>10s</code></li> <li><code>spec.retries</code> defaults to <code>1</code></li> <li><code>spec.locations</code> defaults to <code>[]</code></li> <li><code>spec.channels</code> defaults to <code>[]</code></li> </ul>"},{"location":"specification/v1/tcp/#extra-fields","title":"Extra Fields","text":"<ul> <li>Extra fields are FORBIDDEN (<code>extra=\"forbid\"</code>)</li> <li>Unknown fields MUST cause validation errors</li> </ul>"},{"location":"specification/v1/tcp/#execution-semantics","title":"Execution Semantics","text":""},{"location":"specification/v1/tcp/#connection-behavior","title":"Connection Behavior","text":"<ol> <li>Runner resolves <code>host</code> hostname via DNS (if hostname, not IP)</li> <li>Runner initiates TCP connection to <code>host:port</code></li> <li>Runner performs TCP three-way handshake (SYN, SYN-ACK, ACK)</li> <li>If <code>sslHandshake</code> assertion present, runner initiates TLS handshake</li> <li>Runner evaluates all assertions in <code>checks</code> array</li> <li>Runner closes connection</li> <li>Check PASSES if all assertions pass</li> <li>Check FAILS if any assertion fails</li> </ol>"},{"location":"specification/v1/tcp/#tcp-handshake","title":"TCP Handshake","text":"<p>Three-way handshake: 1. Client sends SYN packet 2. Server responds with SYN-ACK packet 3. Client sends ACK packet 4. Connection established</p> <p>Latency measurement: Time from step 1 to step 4 completion.</p>"},{"location":"specification/v1/tcp/#tls-handshake-if-sslhandshake-checked","title":"TLS Handshake (if sslHandshake checked)","text":"<p>After TCP established: 1. Client sends ClientHello 2. Server responds with ServerHello, Certificate, etc. 3. Client verifies certificate, sends key exchange 4. TLS connection established</p> <p>Note: Use TlsCheck for comprehensive certificate validation.</p>"},{"location":"specification/v1/tcp/#timeout-behavior","title":"Timeout Behavior","text":"<ul> <li>Timeout applies to total execution time (DNS + TCP handshake + TLS handshake)</li> <li>If timeout exceeded, check FAILS with timeout error</li> <li>Connection is aborted on timeout</li> </ul>"},{"location":"specification/v1/tcp/#error-conditions","title":"Error Conditions","text":"<p>Check FAILS if: - DNS resolution fails (hostname) - Cannot establish TCP connection - Connection refused (port closed/filtered) - Connection timeout - TLS handshake fails (if sslHandshake assertion present) - Any assertion evaluates to false - Network error occurs</p> <p>Common Error Types: - DNS Error: Hostname cannot be resolved - Connection Refused: Port is closed or service not listening - Timeout: No response within timeout period - Network Unreachable: Routing failure - TLS Error: TLS handshake failed</p>"},{"location":"specification/v1/tcp/#retry-behavior","title":"Retry Behavior","text":"<ul> <li>Failed checks are retried up to <code>retries</code> times</li> <li>Retries occur immediately after failure</li> <li>If ANY attempt succeeds, check is considered successful</li> <li>Timeout applies to each individual attempt</li> </ul>"},{"location":"specification/v1/tcp/#conformance","title":"Conformance","text":"<p>Implementations claiming TcpCheck conformance MUST:</p> <ol> <li>Support DNS hostnames: Resolve DNS names to IP addresses</li> <li>Support IP addresses: Accept both IPv4 and IPv6 addresses</li> <li>Support all assertions: Implement reachable, latency, sslHandshake</li> <li>Evaluate all checks: Execute all assertions in <code>checks</code> array</li> <li>Fail on any assertion failure: Check fails if ANY assertion fails</li> <li>Handle timeouts: Respect <code>timeout</code> field</li> <li>Retry on failure: Implement retry logic according to <code>retries</code> field</li> <li>Close connections: Properly close TCP connections after check</li> </ol> <p>Implementations SHOULD: - Support multiple locations - Send notifications to configured channels - Provide detailed error messages for connection failures - Report DNS resolution time separately - Report TLS handshake time separately (if applicable) - Validate TLS certificates (if sslHandshake used)</p>"},{"location":"specification/v1/tcp/#security-considerations","title":"Security Considerations","text":""},{"location":"specification/v1/tcp/#firewall-and-network-policies","title":"Firewall and Network Policies","text":"<ul> <li>TCP checks originate from check runner infrastructure</li> <li>May require firewall rules to allow connections</li> <li>Consider IP allowlisting for production checks</li> <li>Private networks may need VPN or bastion access</li> </ul>"},{"location":"specification/v1/tcp/#port-scanning","title":"Port Scanning","text":"<ul> <li>Frequent TCP checks MAY appear as port scanning</li> <li>Configure check frequency appropriately</li> <li>Document check sources for security teams</li> <li>Avoid checking large port ranges</li> </ul>"},{"location":"specification/v1/tcp/#tls-validation","title":"TLS Validation","text":"<ul> <li><code>sslHandshake</code> assertion verifies TLS capability only</li> <li>For certificate validation, use TlsCheck</li> <li>Implementations SHOULD validate certificates by default</li> <li>Invalid certificates SHOULD cause sslHandshake to fail</li> </ul>"},{"location":"specification/v1/tcp/#credential-free","title":"Credential-Free","text":"<ul> <li>TCP checks do NOT support authentication</li> <li>Only tests network connectivity</li> <li>Use application-level checks (HTTP, etc.) for authenticated services</li> </ul>"},{"location":"specification/v1/tcp/#performance-considerations","title":"Performance Considerations","text":""},{"location":"specification/v1/tcp/#connection-overhead","title":"Connection Overhead","text":"<ul> <li>Each check opens and closes a new TCP connection</li> <li>No connection pooling/reuse</li> <li>Minimal overhead for most services</li> <li>Some services MAY rate-limit connection attempts</li> </ul>"},{"location":"specification/v1/tcp/#latency-expectations","title":"Latency Expectations","text":"<p>By Network Type: - Loopback (localhost): &lt; 1ms - LAN: 1-10ms - Same Region: 10-50ms - Cross-Region: 50-200ms - International: 100-300ms</p> <p>By Service Type: - Databases: Expect 1-50ms (same region) - Caches: Expect 1-20ms (same region) - Message Queues: Expect 1-50ms (same region)</p>"},{"location":"specification/v1/tcp/#check-frequency","title":"Check Frequency","text":"<ul> <li>Critical services: 30s - 1m</li> <li>Standard services: 1m - 5m</li> <li>Non-critical services: 5m - 15m</li> <li>Consider service load and connection limits</li> </ul>"},{"location":"specification/v1/tcp/#implementation-notes","title":"Implementation Notes","text":""},{"location":"specification/v1/tcp/#dns-resolution","title":"DNS Resolution","text":"<ul> <li>DNS resolution time included in latency</li> <li>Cache DNS results to reduce latency variation</li> <li>Support both IPv4 (A) and IPv6 (AAAA) records</li> <li>Prefer IPv6 if available (dual-stack)</li> </ul>"},{"location":"specification/v1/tcp/#connection-establishment","title":"Connection Establishment","text":"<ul> <li>Use operating system's TCP stack</li> <li>Respect system socket timeouts</li> <li>Handle connection backlog appropriately</li> <li>Clean up file descriptors</li> </ul>"},{"location":"specification/v1/tcp/#tls-handshake","title":"TLS Handshake","text":"<ul> <li>Use system's TLS library</li> <li>Validate certificates against system trust store</li> <li>Support TLS 1.2 and TLS 1.3</li> <li>Handle TLS errors gracefully</li> </ul>"},{"location":"specification/v1/tcp/#error-handling","title":"Error Handling","text":"<ul> <li>Distinguish connection refused vs. timeout</li> <li>Report DNS errors separately</li> <li>Provide actionable error messages</li> <li>Log connection attempts for debugging</li> </ul>"},{"location":"specification/v1/tcp/#related","title":"Related","text":"<ul> <li>Base Check Definition - Common check structure</li> <li>Common Types - Shared types and operators</li> <li>TlsCheck - Comprehensive TLS/SSL certificate validation</li> <li>HttpCheck - HTTP/HTTPS endpoint checks</li> </ul>"},{"location":"specification/v1/tcp/#changelog","title":"Changelog","text":""},{"location":"specification/v1/tcp/#v1-current","title":"v1 (Current)","text":"<ul> <li>Initial stable release</li> <li>Three assertion types: reachable, latency, sslHandshake</li> <li>Support for DNS hostnames, IPv4, and IPv6 addresses</li> <li>StrictTime for latency assertions (unit suffix required)</li> <li>Dual-stack (IPv4/IPv6) support</li> <li>Multi-location execution</li> </ul>"},{"location":"specification/v1/tls/","title":"TLS Certificate Check","text":"<p>Version: v1 Kind: <code>TlsCheck</code> Alias: <code>SslCheck</code> (for backward compatibility) Status: Stable</p>"},{"location":"specification/v1/tls/#overview","title":"Overview","text":"<p>The TLS Certificate Check validates TLS/SSL certificates for any TCP service, not just HTTPS. It monitors certificate validity, expiration, and issuer information.</p> <p>Common Use Cases: - HTTPS servers (port 443) - SMTP with STARTTLS (port 587) or SMTPS (port 465) - IMAP with SSL/TLS (port 993) - POP3 with SSL/TLS (port 995) - PostgreSQL with TLS (port 5432) - MySQL with TLS (port 3306) - LDAPS (port 636) - Any TCP service using TLS</p>"},{"location":"specification/v1/tls/#naming-tlscheck-vs-sslcheck","title":"Naming: TlsCheck vs SslCheck","text":"<p>Primary Name: <code>TlsCheck</code> (technically correct, protocol-agnostic) Alias: <code>SslCheck</code> (widely recognized, user-friendly)</p> <p>Both names are accepted in YAML definitions and resolve to the same implementation:</p> <pre><code># Canonical (technically correct)\nkind: TlsCheck\n\n# Alias (familiar name)\nkind: SslCheck\n</code></pre> <p>Rationale: - TLS is the modern protocol (SSL is deprecated since 2015) - \"SSL\" terminology remains widely used in industry - Supporting both names provides technical accuracy AND user familiarity - TlsCheck is protocol-agnostic (not web-specific like \"SSL certificate\")</p>"},{"location":"specification/v1/tls/#resource-structure","title":"Resource Structure","text":"<pre><code>apiVersion: v1\nkind: TlsCheck  # or SslCheck\nmetadata:\n  name: {check-name}\n  labels:\n    key: value\nspec:\n  hostname: example.com\n  port: 443  # optional, default: 443\n\n  # Custom CA trust (OPTIONAL - for internal PKI)\n  trustedCAs:\n    - |\n      -----BEGIN CERTIFICATE-----\n      MIIDXTCCAkWgAwIBAgIJAKJ...\n      -----END CERTIFICATE-----\n\n  # OR skip verification (OPTIONAL - development only!)\n  # insecureSkipVerify: true\n\n  # Scheduling (REQUIRED - one of)\n  interval: 1h\n  # OR\n  cron: \"0 */6 * * *\"\n\n  # Common fields (OPTIONAL)\n  timeout: 10s\n  retries: 3\n  locations:\n    - us-east-1\n  channels:\n    - channel: alerts\n      severity: High\n\n  # Assertions (REQUIRED)\n  checks:\n    - type: expirationTime\n      operator: greaterThan\n      value: 30d\n</code></pre>"},{"location":"specification/v1/tls/#spec-fields","title":"Spec Fields","text":""},{"location":"specification/v1/tls/#hostname","title":"hostname","text":"<p>Type: <code>DNSHostname</code> REQUIRED</p> <p>Description: The hostname of the server whose certificate to validate.</p> <p>Examples: <pre><code>hostname: example.com\nhostname: smtp.example.com\nhostname: db.example.com\n</code></pre></p> <p>Validation: - MUST be valid DNS hostname - Automatically converted to lowercase - Maximum length: 253 characters</p>"},{"location":"specification/v1/tls/#port","title":"port","text":"<p>Type: <code>integer</code> OPTIONAL Default: <code>443</code></p> <p>Description: The TCP port where the TLS service is running.</p> <p>Common Ports: - <code>443</code> - HTTPS (default) - <code>465</code> - SMTPS (SMTP over SSL) - <code>587</code> - SMTP with STARTTLS - <code>993</code> - IMAPS (IMAP over SSL) - <code>995</code> - POP3S (POP3 over SSL) - <code>636</code> - LDAPS (LDAP over SSL) - <code>5432</code> - PostgreSQL with TLS - <code>3306</code> - MySQL with TLS</p> <p>Examples: <pre><code># HTTPS (default)\nport: 443\n\n# SMTP with STARTTLS\nport: 587\n\n# PostgreSQL with TLS\nport: 5432\n</code></pre></p> <p>Validation: - MUST be integer between 1 and 65535</p>"},{"location":"specification/v1/tls/#trustedcas","title":"trustedCAs","text":"<p>Type: <code>array[string]</code> OPTIONAL Default: <code>null</code> (use system trust store)</p> <p>Description: Custom CA certificates to trust for certificate validation. If specified, replaces the system trust store.</p> <p>Format: Array of PEM-encoded X.509 certificates (string format).</p> <p>Examples:</p> <p>Single internal CA: <pre><code>trustedCAs:\n  - |\n    -----BEGIN CERTIFICATE-----\n    MIIDXTCCAkWgAwIBAgIJAKJ...\n    -----END CERTIFICATE-----\n</code></pre></p> <p>Multiple CAs (internal PKI hierarchy): <pre><code>trustedCAs:\n  - |\n    -----BEGIN CERTIFICATE-----\n    ... Root CA ...\n    -----END CERTIFICATE-----\n  - |\n    -----BEGIN CERTIFICATE-----\n    ... Intermediate CA ...\n    -----END CERTIFICATE-----\n</code></pre></p> <p>Semantics: - If NOT specified: Use system trust store (default behavior) - If specified: Use ONLY these CAs (system trust store is ignored) - Validates certificate chain against provided CAs - Still checks: expiration, hostname match, revocation (if enabled)</p> <p>Use Cases: - Internal networks: Services with internal CA-issued certificates - Private PKI: Enterprise infrastructure with private certificate authorities - Air-gapped environments: No access to public CA infrastructure - Testing: Validate against test CAs without modifying system trust store</p> <p>Security Considerations: - \u26a0\ufe0f Validate CA certificates before adding to <code>trustedCAs</code> - \u26a0\ufe0f Store securely: CAs are sensitive (control what you trust) - \u26a0\ufe0f Audit regularly: Review which checks use custom CAs - \u26a0\ufe0f Rotate CAs: Update when CAs expire or are compromised - \u2705 Prefer proper PKI: Better than self-signed certificates</p> <p>Validation: - Each CA MUST be valid PEM-encoded X.509 certificate - Mutually exclusive with <code>insecureSkipVerify</code></p> <p>Best Practices: - Use for production internal services with proper PKI - Document why custom CAs are needed - Maintain CA certificate lifecycle (expiration, rotation) - Store CA certificates in secrets management system - Don't commit CA certificates to public repositories</p>"},{"location":"specification/v1/tls/#insecureskipverify","title":"insecureSkipVerify","text":"<p>Type: <code>boolean</code> OPTIONAL Default: <code>false</code></p> <p>Description: Skip ALL certificate validation. \u26a0\ufe0f DEVELOPMENT/TESTING ONLY - disables trust verification.</p> <p>Examples:</p> <p>Development with self-signed certificate: <pre><code>insecureSkipVerify: true  # WARNING: Development only!\n</code></pre></p> <p>Semantics: - If <code>false</code> (default): Perform full certificate validation - If <code>true</code>: Skip certificate validation entirely   - No expiration check   - No trust chain validation   - No hostname verification   - No revocation check - Still performs TLS handshake (connection is encrypted) - Incompatible with <code>valid</code> assertion (validation disabled) - Can still use: <code>expirationTime</code>, <code>certificateIssuer</code>, <code>certificateSubject</code></p> <p>Use Cases: - \u26a0\ufe0f Development: Local testing with self-signed certificates - \u26a0\ufe0f Debugging: Investigate TLS issues - \u26a0\ufe0f Migration: Temporary workaround during certificate migration - \u274c Production: NEVER use in production environments</p> <p>Security Warnings: <pre><code># \u26a0\ufe0f\u26a0\ufe0f\u26a0\ufe0f SECURITY WARNING \u26a0\ufe0f\u26a0\ufe0f\u26a0\ufe0f\n# insecureSkipVerify disables ALL certificate validation\n#\n# This makes you vulnerable to:\n# - Man-in-the-middle attacks\n# - Impersonation attacks\n# - Expired certificate usage\n# - Untrusted certificate acceptance\n#\n# Use ONLY for development/testing\n# NEVER use in production\ninsecureSkipVerify: true\n</code></pre></p> <p>Validation: - Mutually exclusive with <code>trustedCAs</code> - Incompatible with <code>valid</code> assertion type - If <code>true</code> and <code>checks</code> contains <code>valid</code>, validation FAILS</p> <p>Examples of Invalid Usage:</p> <pre><code># \u274c INVALID: Cannot validate when verification skipped\nspec:\n  hostname: localhost\n  insecureSkipVerify: true\n  checks:\n    - type: valid  # ERROR: incompatible\n      operator: is\n      value: true\n</code></pre> <pre><code># \u274c INVALID: Mutually exclusive with trustedCAs\nspec:\n  hostname: example.com\n  trustedCAs: [...]\n  insecureSkipVerify: true  # ERROR: conflicting\n</code></pre> <p>Valid Development Usage:</p> <pre><code># \u2705 VALID: Can check expiration even without trust validation\nspec:\n  hostname: localhost\n  port: 8443\n  insecureSkipVerify: true\n  checks:\n    - type: expirationTime\n      operator: greaterThan\n      value: 7d\n</code></pre> <p>Alternatives: - Production: Use <code>trustedCAs</code> with proper internal CA - Development: Set up local CA and use <code>trustedCAs</code> - Testing: Use mkcert or similar tools for trusted local certificates</p>"},{"location":"specification/v1/tls/#checks","title":"checks","text":"<p>Type: <code>array[TlsAssertion]</code> REQUIRED</p> <p>Description: List of assertions to evaluate against the TLS certificate.</p> <p>Supported Assertion Types: 1. <code>expirationTime</code> - Time until certificate expiration 2. <code>certificateIssuer</code> - Certificate issuer organization 3. <code>certificateSubject</code> - Certificate subject/CN 4. <code>valid</code> - Certificate validity (not expired, trusted, hostname match)</p> <p>See Assertions section for details.</p>"},{"location":"specification/v1/tls/#assertions","title":"Assertions","text":"<p>All TLS assertions validate properties of the TLS certificate.</p>"},{"location":"specification/v1/tls/#expirationtime","title":"expirationTime","text":"<p>Type: <code>TimebasedAssertion</code></p> <p>Description: Assert on time until certificate expiration.</p> <p>Fields: - <code>type</code>: <code>\"expirationTime\"</code> (REQUIRED) - <code>operator</code>: <code>NumericOperator</code> (REQUIRED)   - <code>equals</code>, <code>notEquals</code>, <code>greaterThan</code>, <code>lessThan</code> - <code>value</code>: <code>StrictTime</code> (REQUIRED)   - MUST include unit suffix: <code>\"30d\"</code>, <code>\"7d\"</code>, <code>\"720h\"</code>, etc.   - Bare integers are NOT allowed</p> <p>Examples:</p> <p>Alert if certificate expires in less than 30 days: <pre><code>- type: expirationTime\n  operator: greaterThan\n  value: 30d\n</code></pre></p> <p>Alert if certificate expires in less than 7 days: <pre><code>- type: expirationTime\n  operator: greaterThan\n  value: 7d\n</code></pre></p> <p>Using hours instead of days: <pre><code>- type: expirationTime\n  operator: greaterThan\n  value: 720h  # 30 days in hours\n</code></pre></p> <p>Using weeks: <pre><code>- type: expirationTime\n  operator: greaterThan\n  value: 4w  # approximately 30 days\n</code></pre></p> <p>Using calendar-based months (recommended for certificates): <pre><code>- type: expirationTime\n  operator: greaterThan\n  value: 3mo  # 3 calendar months (Jan 7 \u2192 April 7)\n</code></pre></p> <p>Using calendar-based years: <pre><code>- type: expirationTime\n  operator: greaterThan\n  value: 1y  # 1 calendar year (handles leap years)\n</code></pre></p> <p>Invalid - bare integers rejected: <pre><code>- type: expirationTime\n  operator: greaterThan\n  value: 30  # \u274c ERROR: unit suffix required\n</code></pre></p> <p>Semantics: - Value represents duration UNTIL expiration - Check FAILS if certificate expires within the specified time - <code>greaterThan</code> typically used to ensure sufficient validity remaining - Unit suffix REQUIRED to avoid ambiguity (days vs seconds vs hours)</p>"},{"location":"specification/v1/tls/#certificateissuer","title":"certificateIssuer","text":"<p>Type: <code>StringAssertion</code></p> <p>Description: Assert on the certificate issuer (CA) organization name.</p> <p>Fields: - <code>type</code>: <code>\"certificateIssuer\"</code> (REQUIRED) - <code>operator</code>: <code>StringOperator</code> (REQUIRED)   - <code>equals</code>, <code>notEquals</code>, <code>contains</code>, <code>notContains</code> - <code>value</code>: <code>string</code> (REQUIRED)</p> <p>Examples:</p> <p>Verify certificate issued by Let's Encrypt: <pre><code>- type: certificateIssuer\n  operator: contains\n  value: \"Let's Encrypt\"\n</code></pre></p> <p>Verify certificate issued by specific CA: <pre><code>- type: certificateIssuer\n  operator: equals\n  value: \"DigiCert Inc\"\n</code></pre></p> <p>Ensure certificate NOT issued by untrusted CA: <pre><code>- type: certificateIssuer\n  operator: notContains\n  value: \"UnknownCA\"\n</code></pre></p> <p>Common Issuers: - <code>\"Let's Encrypt\"</code> - <code>\"DigiCert Inc\"</code> - <code>\"Google Trust Services\"</code> - <code>\"Amazon\"</code> - <code>\"Cloudflare\"</code> - <code>\"GlobalSign\"</code></p>"},{"location":"specification/v1/tls/#certificatesubject","title":"certificateSubject","text":"<p>Type: <code>StringAssertion</code></p> <p>Description: Assert on the certificate subject (Common Name or Subject Alternative Names).</p> <p>Fields: - <code>type</code>: <code>\"certificateSubject\"</code> (REQUIRED) - <code>operator</code>: <code>StringOperator</code> (REQUIRED)   - <code>equals</code>, <code>notEquals</code>, <code>contains</code>, <code>notContains</code> - <code>value</code>: <code>string</code> (REQUIRED)</p> <p>Examples:</p> <p>Verify certificate subject contains domain: <pre><code>- type: certificateSubject\n  operator: contains\n  value: \"CN=example.com\"\n</code></pre></p> <p>Verify exact subject match: <pre><code>- type: certificateSubject\n  operator: equals\n  value: \"CN=*.example.com, O=Example Inc, L=San Francisco, ST=California, C=US\"\n</code></pre></p> <p>Verify wildcard certificate: <pre><code>- type: certificateSubject\n  operator: contains\n  value: \"*.example.com\"\n</code></pre></p> <p>Common Patterns: - <code>\"CN=example.com\"</code> - Single domain - <code>\"CN=*.example.com\"</code> - Wildcard certificate - <code>\"O=Example Inc\"</code> - Organization - <code>\"C=US\"</code> - Country</p>"},{"location":"specification/v1/tls/#valid","title":"valid","text":"<p>Type: <code>BooleanAssertion</code></p> <p>Description: Assert on overall certificate validity.</p> <p>Fields: - <code>type</code>: <code>\"valid\"</code> (REQUIRED) - <code>operator</code>: <code>BooleanOperator</code> (REQUIRED)   - <code>is</code>, <code>isNot</code> - <code>value</code>: <code>boolean</code> (REQUIRED)   - <code>true</code> - Certificate should be valid   - <code>false</code> - Certificate should be invalid</p> <p>Examples:</p> <p>Assert certificate is valid: <pre><code>- type: valid\n  operator: is\n  value: true\n</code></pre></p> <p>Verify certificate is trusted: <pre><code>- type: valid\n  operator: isNot\n  value: false  # Certificate must be valid\n</code></pre></p> <p>Semantics: - <code>true</code> means certificate passed all validation checks:   - Not expired (current time between notBefore and notAfter)   - Trusted certificate chain (signed by trusted CA)   - Hostname matches (certificate subject/SAN matches spec.hostname)   - Not revoked (implementation-dependent, may check OCSP/CRL) - <code>false</code> means certificate failed validation - Check PASSES if assertion evaluates to true - Check FAILS if assertion evaluates to false</p> <p>Validation Checks (implementation performs): 1. Expiration: Certificate not expired 2. Trust Chain: Certificate chain validates to trusted root CA 3. Hostname: Certificate subject/SAN matches <code>spec.hostname</code> 4. Revocation: Certificate not revoked (optional, implementation-dependent)</p> <p>Use Cases: - Security compliance: Ensure certificates are properly validated - Trust validation: Verify certificates signed by trusted CAs - Hostname verification: Confirm certificate matches expected hostname - General health: Single assertion for overall certificate validity</p> <p>Comparison with expirationTime: - <code>valid</code> checks multiple criteria (expiration + trust + hostname) - <code>expirationTime</code> only checks expiration date - Use <code>valid</code> for general security compliance - Use <code>expirationTime</code> for specific expiration monitoring/alerting</p> <p>Examples:</p> <p>Basic validity check: <pre><code>- type: valid\n  operator: is\n  value: true\n</code></pre></p> <p>Combined with expiration monitoring: <pre><code># General validity (security)\n- type: valid\n  operator: is\n  value: true\n\n# Specific expiration alert (30 day warning)\n- type: expirationTime\n  operator: greaterThan\n  value: 30d\n</code></pre></p>"},{"location":"specification/v1/tls/#examples","title":"Examples","text":""},{"location":"specification/v1/tls/#basic-https-certificate-check","title":"Basic HTTPS Certificate Check","text":"<pre><code>apiVersion: v1\nkind: TlsCheck\nmetadata:\n  name: web-tls-monitor\n  title: \"HTTPS Certificate Monitor\"\n  labels:\n    environment: production\nspec:\n  hostname: example.com\n  port: 443\n  interval: 6h\n  timeout: 10s\n  retries: 2\n  checks:\n    - type: expirationTime\n      operator: greaterThan\n      value: 30d\n    - type: certificateIssuer\n      operator: contains\n      value: \"Let's Encrypt\"\n  locations:\n    - us-east-1\n    - eu-west-1\n  channels:\n    - channel: security-alerts\n      severity: Critical\n</code></pre>"},{"location":"specification/v1/tls/#smtp-tls-certificate-check","title":"SMTP TLS Certificate Check","text":"<pre><code>apiVersion: v1\nkind: TlsCheck\nmetadata:\n  name: smtp-tls-certificate\n  title: \"SMTP Server TLS Monitor\"\n  labels:\n    environment: production\n    service: email\nspec:\n  hostname: smtp.example.com\n  port: 587  # SMTP with STARTTLS\n  interval: 6h\n  timeout: 5s\n  retries: 2\n  checks:\n    - type: expirationTime\n      operator: greaterThan\n      value: 7d\n    - type: certificateIssuer\n      operator: contains\n      value: \"DigiCert\"\n  locations:\n    - us-east-1\n  channels:\n    - channel: email-alerts\n      severity: High\n</code></pre>"},{"location":"specification/v1/tls/#database-tls-certificate-check","title":"Database TLS Certificate Check","text":"<pre><code>apiVersion: v1\nkind: TlsCheck\nmetadata:\n  name: postgres-tls-certificate\n  title: \"PostgreSQL TLS Certificate Monitor\"\n  labels:\n    environment: production\n    service: database\nspec:\n  hostname: db.example.com\n  port: 5432\n  interval: 12h\n  timeout: 5s\n  checks:\n    - type: expirationTime\n      operator: greaterThan\n      value: 14d\n    - type: certificateSubject\n      operator: contains\n      value: \"CN=db.example.com\"\n  locations:\n    - us-east-1\n  channels:\n    - channel: database-alerts\n      severity: Critical\n</code></pre>"},{"location":"specification/v1/tls/#using-sslcheck-alias","title":"Using SslCheck Alias","text":"<pre><code>apiVersion: v1\nkind: SslCheck  # Alias for TlsCheck\nmetadata:\n  name: ssl-cert-monitor\n  title: \"SSL Certificate Monitor\"\nspec:\n  hostname: example.com\n  interval: 1h\n  checks:\n    - type: expirationTime\n      operator: greaterThan\n      value: 30d\n</code></pre>"},{"location":"specification/v1/tls/#comprehensive-certificate-validation","title":"Comprehensive Certificate Validation","text":"<pre><code>apiVersion: v1\nkind: TlsCheck\nmetadata:\n  name: comprehensive-tls-check\n  title: \"Comprehensive TLS Validation\"\n  labels:\n    environment: production\n    criticality: high\nspec:\n  hostname: api.example.com\n  port: 443\n  interval: 6h\n  timeout: 10s\n  retries: 3\n  checks:\n    # Overall validity check\n    - type: valid\n      operator: is\n      value: true\n\n    # Ensure at least 30 days until expiration\n    - type: expirationTime\n      operator: greaterThan\n      value: 30d\n\n    # Verify trusted CA\n    - type: certificateIssuer\n      operator: contains\n      value: \"Let's Encrypt\"\n\n    # Verify certificate subject\n    - type: certificateSubject\n      operator: contains\n      value: \"CN=api.example.com\"\n\n    # Ensure not using wildcard (if desired)\n    - type: certificateSubject\n      operator: notContains\n      value: \"*\"\n\n  locations:\n    - us-east-1\n    - eu-west-1\n    - ap-southeast-1\n\n  channels:\n    - channel: pagerduty-security\n      severity: Critical\n    - channel: slack-security\n      severity: High\n</code></pre>"},{"location":"specification/v1/tls/#internal-service-with-custom-ca","title":"Internal Service with Custom CA","text":"<pre><code>apiVersion: v1\nkind: TlsCheck\nmetadata:\n  name: internal-api-tls\n  title: \"Internal API TLS (Custom CA)\"\n  labels:\n    environment: production\n    network: internal\nspec:\n  hostname: internal-api.corp.example.com\n  port: 443\n  interval: 6h\n  timeout: 10s\n\n  # Custom internal CA certificate\n  trustedCAs:\n    - |\n      -----BEGIN CERTIFICATE-----\n      MIIDXTCCAkWgAwIBAgIJAKJ8FqEVUvKCMA0GCSqGSIb3DQEBCwUAMEUxCzAJBgNV\n      BAYTAlVTMRMwEQYDVQQIDApDYWxpZm9ybmlhMSEwHwYDVQQKDBhJbnRlcm5hbCBD\n      QSAtIEV4YW1wbGUgSW5jMB4XDTI0MDEwMTAwMDAwMFoXDTM0MDEwMTAwMDAwMFow\n      RTELMAkGA1UEBhMCVVMxEzARBgNVBAgMCkNhbGlmb3JuaWExITAfBgNVBAoMGElu\n      dGVybmFsIENBIC0gRXhhbXBsZSBJbmMwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAw\n      ggEKAoIBAQC...\n      -----END CERTIFICATE-----\n\n  checks:\n    # Validate against internal CA\n    - type: valid\n      operator: is\n      value: true\n\n    # Monitor expiration (30 day warning)\n    - type: expirationTime\n      operator: greaterThan\n      value: 30d\n\n    # Verify internal CA\n    - type: certificateIssuer\n      operator: contains\n      value: \"Internal CA - Example Inc\"\n\n  locations:\n    - internal-dc-1\n\n  channels:\n    - channel: internal-alerts\n      severity: High\n</code></pre>"},{"location":"specification/v1/tls/#internal-service-with-multiple-cas-pki-hierarchy","title":"Internal Service with Multiple CAs (PKI Hierarchy)","text":"<pre><code>apiVersion: v1\nkind: TlsCheck\nmetadata:\n  name: internal-db-tls\n  title: \"Internal Database TLS (PKI Hierarchy)\"\nspec:\n  hostname: db.internal.example.com\n  port: 5432\n  interval: 12h\n  timeout: 5s\n\n  # Internal PKI - Root + Intermediate CAs\n  trustedCAs:\n    # Root CA\n    - |\n      -----BEGIN CERTIFICATE-----\n      MIIDXTCCAkWgAwIBAgIJAKJ8FqEVUvKCMA0GCSqGSIb3DQEBCwUAMEUxCzAJBgNV\n      ... Root CA Certificate ...\n      -----END CERTIFICATE-----\n\n    # Intermediate CA\n    - |\n      -----BEGIN CERTIFICATE-----\n      MIIDXTCCAkWgAwIBAgIJAKJ8FqEVUvKDMA0GCSqGSIb3DQEBCwUAMEUxCzAJBgNV\n      ... Intermediate CA Certificate ...\n      -----END CERTIFICATE-----\n\n  checks:\n    - type: valid\n      operator: is\n      value: true\n\n    - type: expirationTime\n      operator: greaterThan\n      value: 14d\n\n  locations:\n    - internal-dc-1\n\n  channels:\n    - channel: database-alerts\n      severity: Critical\n</code></pre>"},{"location":"specification/v1/tls/#development-with-self-signed-certificate","title":"Development with Self-Signed Certificate","text":"<pre><code>apiVersion: v1\nkind: TlsCheck\nmetadata:\n  name: dev-localhost-tls\n  title: \"Development Localhost TLS\"\n  labels:\n    environment: development\nspec:\n  hostname: localhost\n  port: 8443\n  interval: 5m\n  timeout: 5s\n\n  # \u26a0\ufe0f WARNING: Development only - disables validation\n  insecureSkipVerify: true\n\n  checks:\n    # Can still check expiration without trust validation\n    - type: expirationTime\n      operator: greaterThan\n      value: 7d\n\n    # Can check issuer/subject\n    - type: certificateSubject\n      operator: contains\n      value: \"localhost\"\n\n  locations:\n    - local\n</code></pre>"},{"location":"specification/v1/tls/#testing-environment-with-self-signed-better-approach","title":"Testing Environment with Self-Signed (Better Approach)","text":"<pre><code>apiVersion: v1\nkind: TlsCheck\nmetadata:\n  name: staging-api-tls\n  title: \"Staging API TLS (Test CA)\"\n  labels:\n    environment: staging\nspec:\n  hostname: api.staging.example.com\n  port: 443\n  interval: 1h\n  timeout: 10s\n\n  # Better than insecureSkipVerify: Use test CA\n  trustedCAs:\n    - |\n      -----BEGIN CERTIFICATE-----\n      ... Test/Staging CA Certificate ...\n      -----END CERTIFICATE-----\n\n  checks:\n    - type: valid\n      operator: is\n      value: true\n\n    - type: expirationTime\n      operator: greaterThan\n      value: 30d\n\n  locations:\n    - staging-us-east-1\n</code></pre>"},{"location":"specification/v1/tls/#validation-rules","title":"Validation Rules","text":""},{"location":"specification/v1/tls/#required-fields","title":"Required Fields","text":"<ul> <li><code>apiVersion</code> MUST be <code>\"v1\"</code></li> <li><code>kind</code> MUST be <code>\"TlsCheck\"</code> or <code>\"SslCheck\"</code></li> <li><code>metadata.name</code> MUST be valid <code>CaseInsensitiveKey</code></li> <li><code>spec.hostname</code> MUST be valid <code>DNSHostname</code></li> <li><code>spec.checks</code> MUST be non-empty array</li> <li>One of <code>spec.interval</code> or <code>spec.cron</code> MUST be specified</li> </ul>"},{"location":"specification/v1/tls/#optional-fields","title":"Optional Fields","text":"<ul> <li><code>spec.port</code> defaults to <code>443</code></li> <li><code>spec.trustedCAs</code> defaults to <code>null</code> (use system trust store)</li> <li><code>spec.insecureSkipVerify</code> defaults to <code>false</code></li> <li><code>spec.timeout</code> defaults to <code>1s</code></li> <li><code>spec.retries</code> defaults to <code>1</code></li> <li><code>spec.locations</code> defaults to <code>[]</code></li> <li><code>spec.channels</code> defaults to <code>[]</code></li> </ul>"},{"location":"specification/v1/tls/#field-constraints","title":"Field Constraints","text":"<ul> <li><code>spec.trustedCAs</code> and <code>spec.insecureSkipVerify</code> are mutually exclusive</li> <li>If <code>spec.insecureSkipVerify</code> is <code>true</code>, <code>checks</code> MUST NOT contain <code>valid</code> assertion</li> <li>Each CA in <code>spec.trustedCAs</code> MUST be valid PEM-encoded X.509 certificate</li> </ul>"},{"location":"specification/v1/tls/#extra-fields","title":"Extra Fields","text":"<ul> <li>Extra fields are FORBIDDEN (<code>extra=\"forbid\"</code>)</li> <li>Unknown fields MUST cause validation errors</li> </ul>"},{"location":"specification/v1/tls/#execution-semantics","title":"Execution Semantics","text":""},{"location":"specification/v1/tls/#connection-behavior","title":"Connection Behavior","text":"<ol> <li>Runner connects to <code>hostname:port</code> via TCP</li> <li>Runner initiates TLS handshake</li> <li>Runner retrieves server certificate</li> <li>Runner evaluates all assertions against certificate</li> <li>Check PASSES if all assertions pass</li> <li>Check FAILS if any assertion fails</li> </ol>"},{"location":"specification/v1/tls/#error-conditions","title":"Error Conditions","text":"<p>Check FAILS if: - Cannot connect to <code>hostname:port</code> - TLS handshake fails - No certificate presented - Certificate is invalid or expired - Any assertion evaluates to false - Timeout exceeded</p>"},{"location":"specification/v1/tls/#retry-behavior","title":"Retry Behavior","text":"<ul> <li>Failed checks are retried up to <code>retries</code> times</li> <li>Retries occur immediately after failure</li> <li>If ANY attempt succeeds, check is considered successful</li> <li>Timeout applies to total execution time including retries</li> </ul>"},{"location":"specification/v1/tls/#conformance","title":"Conformance","text":"<p>Implementations claiming TlsCheck conformance MUST:</p> <ol> <li>Support both names: Accept <code>TlsCheck</code> and <code>SslCheck</code> as valid kinds</li> <li>Validate hostname: Enforce <code>DNSHostname</code> constraints</li> <li>Support all assertions: Implement <code>expirationTime</code>, <code>certificateIssuer</code>, <code>certificateSubject</code></li> <li>Default port: Use <code>443</code> when port is not specified</li> <li>Evaluate all checks: Execute all assertions in <code>checks</code> array</li> <li>Fail on any assertion failure: Check fails if ANY assertion fails</li> <li>Handle timeouts: Respect <code>timeout</code> field</li> <li>Retry on failure: Implement retry logic according to <code>retries</code> field</li> </ol> <p>Implementations SHOULD: - Support multiple locations - Send notifications to configured channels - Provide detailed error messages for validation failures - Report certificate details in results (issuer, subject, expiration date)</p>"},{"location":"specification/v1/tls/#security-considerations","title":"Security Considerations","text":""},{"location":"specification/v1/tls/#certificate-validation","title":"Certificate Validation","text":"<ul> <li>Implementations SHOULD validate entire certificate chain</li> <li>Implementations SHOULD verify certificate against system trust store</li> <li>Implementations MAY allow custom CA certificates</li> <li>Implementations SHOULD report certificate chain issues</li> </ul>"},{"location":"specification/v1/tls/#hostname-verification","title":"Hostname Verification","text":"<ul> <li>Implementations SHOULD verify certificate hostname matches <code>spec.hostname</code></li> <li>Implementations SHOULD support wildcards and Subject Alternative Names (SANs)</li> <li>Implementations SHOULD report hostname mismatch as check failure</li> </ul>"},{"location":"specification/v1/tls/#timing-attacks","title":"Timing Attacks","text":"<ul> <li>Implementations SHOULD NOT leak timing information that could aid attackers</li> <li>Certificate validation SHOULD use constant-time operations where possible</li> </ul>"},{"location":"specification/v1/tls/#implementation-notes","title":"Implementation Notes","text":""},{"location":"specification/v1/tls/#certificate-parsing","title":"Certificate Parsing","text":"<ul> <li>Extract certificate expiration date</li> <li>Parse issuer Distinguished Name (DN)</li> <li>Parse subject Distinguished Name (DN)</li> <li>Handle certificate chain traversal</li> </ul>"},{"location":"specification/v1/tls/#expiration-calculation","title":"Expiration Calculation","text":"<ul> <li>Calculate days until expiration: <code>(expiration_date - current_date).days</code></li> <li>Use system clock or NTP-synchronized time</li> <li>Consider timezone differences</li> </ul>"},{"location":"specification/v1/tls/#string-matching","title":"String Matching","text":"<ul> <li>Certificate issuer/subject matching is case-sensitive by default</li> <li>Implementations MAY support case-insensitive matching</li> <li><code>contains</code> operator searches anywhere in the DN string</li> </ul>"},{"location":"specification/v1/tls/#custom-ca-trust-store","title":"Custom CA Trust Store","text":"<p>Check-Level Configuration (via <code>trustedCAs</code>): - Specified in check definition - Portable across runners - Self-contained - Per-check granularity</p> <p>Runner-Level Configuration (alternative approach):</p> <p>Implementations MAY support runner-level CA configuration via:</p> <p>Environment Variables: <pre><code># Set custom CA bundle for all TLS checks\nexport CUSTOM_CA_BUNDLE=/etc/ssl/certs/internal-ca-bundle.pem\nsynthetic-runner start\n\n# Or for multiple CAs\nexport CUSTOM_CA_PATH=/etc/ssl/certs/internal-cas/\nsynthetic-runner start\n</code></pre></p> <p>Configuration File: <pre><code># runner-config.yaml\ntls:\n  customCABundle: /etc/ssl/certs/internal-ca-bundle.pem\n  # OR\n  customCAPath: /etc/ssl/certs/internal-cas/\n  # OR\n  trustedCAs:\n    - /etc/ssl/certs/ca1.pem\n    - /etc/ssl/certs/ca2.pem\n</code></pre></p> <p>System Trust Store Updates: <pre><code># Add CA to system trust store (Linux)\nsudo cp internal-ca.crt /usr/local/share/ca-certificates/\nsudo update-ca-certificates\n\n# Add CA to system trust store (macOS)\nsudo security add-trusted-cert -d -r trustRoot \\\n  -k /Library/Keychains/System.keychain internal-ca.crt\n</code></pre></p> <p>Precedence (when both check-level and runner-level configured): 1. Check-level <code>trustedCAs</code> (highest priority) 2. Check-level <code>insecureSkipVerify</code> 3. Runner-level CA configuration 4. System trust store (default)</p> <p>Trade-offs:</p> Approach Pros Cons Check-level (<code>trustedCAs</code>) Portable, explicit, auditable Large YAML, duplication Runner-level (env/config) Shared across checks, smaller YAML Implicit, runner-specific System trust store Standard approach, no config Global impact, requires admin <p>Recommendation: - Production: Check-level <code>trustedCAs</code> (explicit, auditable) - Development: Runner-level or system trust store (convenience) - CI/CD: Runner-level via environment variables (flexibility)</p>"},{"location":"specification/v1/tls/#related","title":"Related","text":"<ul> <li>Base Check Definition - Common check structure</li> <li>Common Types - Shared types and operators</li> <li>HttpCheck - HTTP endpoint checks (uses TLS on port 443)</li> </ul>"},{"location":"specification/v1/tls/#changelog","title":"Changelog","text":""},{"location":"specification/v1/tls/#v1-current","title":"v1 (Current)","text":"<ul> <li>Renamed from <code>SslCheck</code> to <code>TlsCheck</code> (canonical name)</li> <li>Added <code>SslCheck</code> as backward-compatible alias</li> <li>Four assertion types: expirationTime, certificateIssuer, certificateSubject, valid</li> <li>Added <code>valid</code> assertion for overall certificate validity checking</li> <li>Added <code>trustedCAs</code> field for custom CA certificates (internal PKI support)</li> <li>Added <code>insecureSkipVerify</code> field for development/testing (disables validation)</li> <li>Clarified support for non-web protocols (SMTP, databases, etc.)</li> <li>Added port examples for common TLS services</li> <li>Documented both <code>TlsCheck</code> and <code>SslCheck</code> as valid kinds</li> <li>Documented runner-level CA configuration options</li> <li>StrictTime for expirationTime assertions (unit suffix required)</li> </ul>"}]}